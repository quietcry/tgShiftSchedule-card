{"version":3,"file":"tgshiftschedule-card.js","mappings":"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","sources":["webpack://tgshiftschedule-card/webpack/runtime/load script","webpack://tgshiftschedule-card/webpack/bootstrap","webpack://tgshiftschedule-card/webpack/runtime/define property getters","webpack://tgshiftschedule-card/webpack/runtime/ensure chunk","webpack://tgshiftschedule-card/webpack/runtime/get javascript chunk filename","webpack://tgshiftschedule-card/webpack/runtime/global","webpack://tgshiftschedule-card/webpack/runtime/hasOwnProperty shorthand","webpack://tgshiftschedule-card/webpack/runtime/make namespace object","webpack://tgshiftschedule-card/webpack/runtime/publicPath","webpack://tgshiftschedule-card/webpack/runtime/jsonp chunk loading","webpack://tgshiftschedule-card/./node_modules/@lit/reactive-element/css-tag.js","webpack://tgshiftschedule-card/./node_modules/@lit/reactive-element/reactive-element.js","webpack://tgshiftschedule-card/./node_modules/lit-html/lit-html.js","webpack://tgshiftschedule-card/./node_modules/lit-element/lit-element.js","webpack://tgshiftschedule-card/./src/card-config.js","webpack://tgshiftschedule-card/./src/tools/tg-card-helper.js","webpack://tgshiftschedule-card/./src/super-base.js","webpack://tgshiftschedule-card/./src/card-base.js","webpack://tgshiftschedule-card/./src/views/view-base.js","webpack://tgshiftschedule-card/./src/views/shiftschedule-view/shiftschedule-view.js","webpack://tgshiftschedule-card/./src/card-impl.js","webpack://tgshiftschedule-card/./src/editor/editor-base.js","webpack://tgshiftschedule-card/./src/editor/editor-impl.js","webpack://tgshiftschedule-card/./src/editor/editor.js","webpack://tgshiftschedule-card/./src/card.js"],"sourcesContent":["var inProgress = {};\nvar dataWebpackPrefix = \"tgshiftschedule-card:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".tgshiftschedule-card.js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript && document.currentScript.tagName.toUpperCase() === 'SCRIPT')\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && (!scriptUrl || !/^http(s?):/.test(scriptUrl))) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/^blob:/, \"\").replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunktgshiftschedule_card\"] = self[\"webpackChunktgshiftschedule_card\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=globalThis,e=t.ShadowRoot&&(void 0===t.ShadyCSS||t.ShadyCSS.nativeShadow)&&\"adoptedStyleSheets\"in Document.prototype&&\"replace\"in CSSStyleSheet.prototype,s=Symbol(),o=new WeakMap;class n{constructor(t,e,o){if(this._$cssResult$=!0,o!==s)throw Error(\"CSSResult is not constructable. Use `unsafeCSS` or `css` instead.\");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const s=this.t;if(e&&void 0===t){const e=void 0!==s&&1===s.length;e&&(t=o.get(s)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),e&&o.set(s,t))}return t}toString(){return this.cssText}}const r=t=>new n(\"string\"==typeof t?t:t+\"\",void 0,s),i=(t,...e)=>{const o=1===t.length?t[0]:e.reduce(((e,s,o)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if(\"number\"==typeof t)return t;throw Error(\"Value passed to 'css' function must be a 'css' function result: \"+t+\". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.\")})(s)+t[o+1]),t[0]);return new n(o,t,s)},S=(s,o)=>{if(e)s.adoptedStyleSheets=o.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet));else for(const e of o){const o=document.createElement(\"style\"),n=t.litNonce;void 0!==n&&o.setAttribute(\"nonce\",n),o.textContent=e.cssText,s.appendChild(o)}},c=e?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e=\"\";for(const s of t.cssRules)e+=s.cssText;return r(e)})(t):t;export{n as CSSResult,S as adoptStyles,i as css,c as getCompatibleStyle,e as supportsAdoptingStyleSheets,r as unsafeCSS};\n//# sourceMappingURL=css-tag.js.map\n","import{getCompatibleStyle as t,adoptStyles as s}from\"./css-tag.js\";export{CSSResult,css,supportsAdoptingStyleSheets,unsafeCSS}from\"./css-tag.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const{is:i,defineProperty:e,getOwnPropertyDescriptor:h,getOwnPropertyNames:r,getOwnPropertySymbols:o,getPrototypeOf:n}=Object,a=globalThis,c=a.trustedTypes,l=c?c.emptyScript:\"\",p=a.reactiveElementPolyfillSupport,d=(t,s)=>t,u={toAttribute(t,s){switch(s){case Boolean:t=t?l:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,s){let i=t;switch(s){case Boolean:i=null!==t;break;case Number:i=null===t?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch(t){i=null}}return i}},f=(t,s)=>!i(t,s),b={attribute:!0,type:String,converter:u,reflect:!1,useDefault:!1,hasChanged:f};Symbol.metadata??=Symbol(\"metadata\"),a.litPropertyMetadata??=new WeakMap;class y extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,s=b){if(s.state&&(s.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(t)&&((s=Object.create(s)).wrapped=!0),this.elementProperties.set(t,s),!s.noAccessor){const i=Symbol(),h=this.getPropertyDescriptor(t,i,s);void 0!==h&&e(this.prototype,t,h)}}static getPropertyDescriptor(t,s,i){const{get:e,set:r}=h(this.prototype,t)??{get(){return this[s]},set(t){this[s]=t}};return{get:e,set(s){const h=e?.call(this);r?.call(this,s),this.requestUpdate(t,h,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??b}static _$Ei(){if(this.hasOwnProperty(d(\"elementProperties\")))return;const t=n(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(d(\"finalized\")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(d(\"properties\"))){const t=this.properties,s=[...r(t),...o(t)];for(const i of s)this.createProperty(i,t[i])}const t=this[Symbol.metadata];if(null!==t){const s=litPropertyMetadata.get(t);if(void 0!==s)for(const[t,i]of s)this.elementProperties.set(t,i)}this._$Eh=new Map;for(const[t,s]of this.elementProperties){const i=this._$Eu(t,s);void 0!==i&&this._$Eh.set(i,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(s){const i=[];if(Array.isArray(s)){const e=new Set(s.flat(1/0).reverse());for(const s of e)i.unshift(t(s))}else void 0!==s&&i.push(t(s));return i}static _$Eu(t,s){const i=s.attribute;return!1===i?void 0:\"string\"==typeof i?i:\"string\"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((t=>t(this)))}addController(t){(this._$EO??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.()}removeController(t){this._$EO?.delete(t)}_$E_(){const t=new Map,s=this.constructor.elementProperties;for(const i of s.keys())this.hasOwnProperty(i)&&(t.set(i,this[i]),delete this[i]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return s(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((t=>t.hostConnected?.()))}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach((t=>t.hostDisconnected?.()))}attributeChangedCallback(t,s,i){this._$AK(t,i)}_$ET(t,s){const i=this.constructor.elementProperties.get(t),e=this.constructor._$Eu(t,i);if(void 0!==e&&!0===i.reflect){const h=(void 0!==i.converter?.toAttribute?i.converter:u).toAttribute(s,i.type);this._$Em=t,null==h?this.removeAttribute(e):this.setAttribute(e,h),this._$Em=null}}_$AK(t,s){const i=this.constructor,e=i._$Eh.get(t);if(void 0!==e&&this._$Em!==e){const t=i.getPropertyOptions(e),h=\"function\"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:u;this._$Em=e,this[e]=h.fromAttribute(s,t.type)??this._$Ej?.get(e)??null,this._$Em=null}}requestUpdate(t,s,i){if(void 0!==t){const e=this.constructor,h=this[t];if(i??=e.getPropertyOptions(t),!((i.hasChanged??f)(h,s)||i.useDefault&&i.reflect&&h===this._$Ej?.get(t)&&!this.hasAttribute(e._$Eu(t,i))))return;this.C(t,s,i)}!1===this.isUpdatePending&&(this._$ES=this._$EP())}C(t,s,{useDefault:i,reflect:e,wrapped:h},r){i&&!(this._$Ej??=new Map).has(t)&&(this._$Ej.set(t,r??s??this[t]),!0!==h||void 0!==r)||(this._$AL.has(t)||(this.hasUpdated||i||(s=void 0),this._$AL.set(t,s)),!0===e&&this._$Em!==t&&(this._$Eq??=new Set).add(t))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[t,s]of this._$Ep)this[t]=s;this._$Ep=void 0}const t=this.constructor.elementProperties;if(t.size>0)for(const[s,i]of t){const{wrapped:t}=i,e=this[s];!0!==t||this._$AL.has(s)||void 0===e||this.C(s,void 0,i,e)}}let t=!1;const s=this._$AL;try{t=this.shouldUpdate(s),t?(this.willUpdate(s),this._$EO?.forEach((t=>t.hostUpdate?.())),this.update(s)):this._$EM()}catch(s){throw t=!1,this._$EM(),s}t&&this._$AE(s)}willUpdate(t){}_$AE(t){this._$EO?.forEach((t=>t.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Eq&&=this._$Eq.forEach((t=>this._$ET(t,this[t]))),this._$EM()}updated(t){}firstUpdated(t){}}y.elementStyles=[],y.shadowRootOptions={mode:\"open\"},y[d(\"elementProperties\")]=new Map,y[d(\"finalized\")]=new Map,p?.({ReactiveElement:y}),(a.reactiveElementVersions??=[]).push(\"2.1.0\");export{y as ReactiveElement,s as adoptStyles,u as defaultConverter,t as getCompatibleStyle,f as notEqual};\n//# sourceMappingURL=reactive-element.js.map\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=globalThis,i=t.trustedTypes,s=i?i.createPolicy(\"lit-html\",{createHTML:t=>t}):void 0,e=\"$lit$\",h=`lit$${Math.random().toFixed(9).slice(2)}$`,o=\"?\"+h,n=`<${o}>`,r=document,l=()=>r.createComment(\"\"),c=t=>null===t||\"object\"!=typeof t&&\"function\"!=typeof t,a=Array.isArray,u=t=>a(t)||\"function\"==typeof t?.[Symbol.iterator],d=\"[ \\t\\n\\f\\r]\",f=/<(?:(!--|\\/[^a-zA-Z])|(\\/?[a-zA-Z][^>\\s]*)|(\\/?$))/g,v=/-->/g,_=/>/g,m=RegExp(`>|${d}(?:([^\\\\s\"'>=/]+)(${d}*=${d}*(?:[^ \\t\\n\\f\\r\"'\\`<>=]|(\"|')|))|$)`,\"g\"),p=/'/g,g=/\"/g,$=/^(?:script|style|textarea|title)$/i,y=t=>(i,...s)=>({_$litType$:t,strings:i,values:s}),x=y(1),b=y(2),w=y(3),T=Symbol.for(\"lit-noChange\"),E=Symbol.for(\"lit-nothing\"),A=new WeakMap,C=r.createTreeWalker(r,129);function P(t,i){if(!a(t)||!t.hasOwnProperty(\"raw\"))throw Error(\"invalid template strings array\");return void 0!==s?s.createHTML(i):i}const V=(t,i)=>{const s=t.length-1,o=[];let r,l=2===i?\"<svg>\":3===i?\"<math>\":\"\",c=f;for(let i=0;i<s;i++){const s=t[i];let a,u,d=-1,y=0;for(;y<s.length&&(c.lastIndex=y,u=c.exec(s),null!==u);)y=c.lastIndex,c===f?\"!--\"===u[1]?c=v:void 0!==u[1]?c=_:void 0!==u[2]?($.test(u[2])&&(r=RegExp(\"</\"+u[2],\"g\")),c=m):void 0!==u[3]&&(c=m):c===m?\">\"===u[0]?(c=r??f,d=-1):void 0===u[1]?d=-2:(d=c.lastIndex-u[2].length,a=u[1],c=void 0===u[3]?m:'\"'===u[3]?g:p):c===g||c===p?c=m:c===v||c===_?c=f:(c=m,r=void 0);const x=c===m&&t[i+1].startsWith(\"/>\")?\" \":\"\";l+=c===f?s+n:d>=0?(o.push(a),s.slice(0,d)+e+s.slice(d)+h+x):s+h+(-2===d?i:x)}return[P(t,l+(t[s]||\"<?>\")+(2===i?\"</svg>\":3===i?\"</math>\":\"\")),o]};class N{constructor({strings:t,_$litType$:s},n){let r;this.parts=[];let c=0,a=0;const u=t.length-1,d=this.parts,[f,v]=V(t,s);if(this.el=N.createElement(f,n),C.currentNode=this.el.content,2===s||3===s){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(r=C.nextNode())&&d.length<u;){if(1===r.nodeType){if(r.hasAttributes())for(const t of r.getAttributeNames())if(t.endsWith(e)){const i=v[a++],s=r.getAttribute(t).split(h),e=/([.?@])?(.*)/.exec(i);d.push({type:1,index:c,name:e[2],strings:s,ctor:\".\"===e[1]?H:\"?\"===e[1]?I:\"@\"===e[1]?L:k}),r.removeAttribute(t)}else t.startsWith(h)&&(d.push({type:6,index:c}),r.removeAttribute(t));if($.test(r.tagName)){const t=r.textContent.split(h),s=t.length-1;if(s>0){r.textContent=i?i.emptyScript:\"\";for(let i=0;i<s;i++)r.append(t[i],l()),C.nextNode(),d.push({type:2,index:++c});r.append(t[s],l())}}}else if(8===r.nodeType)if(r.data===o)d.push({type:2,index:c});else{let t=-1;for(;-1!==(t=r.data.indexOf(h,t+1));)d.push({type:7,index:c}),t+=h.length-1}c++}}static createElement(t,i){const s=r.createElement(\"template\");return s.innerHTML=t,s}}function S(t,i,s=t,e){if(i===T)return i;let h=void 0!==e?s._$Co?.[e]:s._$Cl;const o=c(i)?void 0:i._$litDirective$;return h?.constructor!==o&&(h?._$AO?.(!1),void 0===o?h=void 0:(h=new o(t),h._$AT(t,s,e)),void 0!==e?(s._$Co??=[])[e]=h:s._$Cl=h),void 0!==h&&(i=S(t,h._$AS(t,i.values),h,e)),i}class M{constructor(t,i){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:i},parts:s}=this._$AD,e=(t?.creationScope??r).importNode(i,!0);C.currentNode=e;let h=C.nextNode(),o=0,n=0,l=s[0];for(;void 0!==l;){if(o===l.index){let i;2===l.type?i=new R(h,h.nextSibling,this,t):1===l.type?i=new l.ctor(h,l.name,l.strings,this,t):6===l.type&&(i=new z(h,this,t)),this._$AV.push(i),l=s[++n]}o!==l?.index&&(h=C.nextNode(),o++)}return C.currentNode=r,e}p(t){let i=0;for(const s of this._$AV)void 0!==s&&(void 0!==s.strings?(s._$AI(t,s,i),i+=s.strings.length-2):s._$AI(t[i])),i++}}class R{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,i,s,e){this.type=2,this._$AH=E,this._$AN=void 0,this._$AA=t,this._$AB=i,this._$AM=s,this.options=e,this._$Cv=e?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode;const i=this._$AM;return void 0!==i&&11===t?.nodeType&&(t=i.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,i=this){t=S(this,t,i),c(t)?t===E||null==t||\"\"===t?(this._$AH!==E&&this._$AR(),this._$AH=E):t!==this._$AH&&t!==T&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):u(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==E&&c(this._$AH)?this._$AA.nextSibling.data=t:this.T(r.createTextNode(t)),this._$AH=t}$(t){const{values:i,_$litType$:s}=t,e=\"number\"==typeof s?this._$AC(t):(void 0===s.el&&(s.el=N.createElement(P(s.h,s.h[0]),this.options)),s);if(this._$AH?._$AD===e)this._$AH.p(i);else{const t=new M(e,this),s=t.u(this.options);t.p(i),this.T(s),this._$AH=t}}_$AC(t){let i=A.get(t.strings);return void 0===i&&A.set(t.strings,i=new N(t)),i}k(t){a(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let s,e=0;for(const h of t)e===i.length?i.push(s=new R(this.O(l()),this.O(l()),this,this.options)):s=i[e],s._$AI(h),e++;e<i.length&&(this._$AR(s&&s._$AB.nextSibling,e),i.length=e)}_$AR(t=this._$AA.nextSibling,i){for(this._$AP?.(!1,!0,i);t&&t!==this._$AB;){const i=t.nextSibling;t.remove(),t=i}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}}class k{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,i,s,e,h){this.type=1,this._$AH=E,this._$AN=void 0,this.element=t,this.name=i,this._$AM=e,this.options=h,s.length>2||\"\"!==s[0]||\"\"!==s[1]?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=E}_$AI(t,i=this,s,e){const h=this.strings;let o=!1;if(void 0===h)t=S(this,t,i,0),o=!c(t)||t!==this._$AH&&t!==T,o&&(this._$AH=t);else{const e=t;let n,r;for(t=h[0],n=0;n<h.length-1;n++)r=S(this,e[s+n],i,n),r===T&&(r=this._$AH[n]),o||=!c(r)||r!==this._$AH[n],r===E?t=E:t!==E&&(t+=(r??\"\")+h[n+1]),this._$AH[n]=r}o&&!e&&this.j(t)}j(t){t===E?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??\"\")}}class H extends k{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===E?void 0:t}}class I extends k{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==E)}}class L extends k{constructor(t,i,s,e,h){super(t,i,s,e,h),this.type=5}_$AI(t,i=this){if((t=S(this,t,i,0)??E)===T)return;const s=this._$AH,e=t===E&&s!==E||t.capture!==s.capture||t.once!==s.once||t.passive!==s.passive,h=t!==E&&(s===E||e);e&&this.element.removeEventListener(this.name,this,s),h&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){\"function\"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}class z{constructor(t,i,s){this.element=t,this.type=6,this._$AN=void 0,this._$AM=i,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(t){S(this,t)}}const Z={M:e,P:h,A:o,C:1,L:V,R:M,D:u,V:S,I:R,H:k,N:I,U:L,B:H,F:z},j=t.litHtmlPolyfillSupport;j?.(N,R),(t.litHtmlVersions??=[]).push(\"3.3.0\");const B=(t,i,s)=>{const e=s?.renderBefore??i;let h=e._$litPart$;if(void 0===h){const t=s?.renderBefore??null;e._$litPart$=h=new R(i.insertBefore(l(),t),t,void 0,s??{})}return h._$AI(t),h};export{Z as _$LH,x as html,w as mathml,T as noChange,E as nothing,B as render,b as svg};\n//# sourceMappingURL=lit-html.js.map\n","import{ReactiveElement as t}from\"@lit/reactive-element\";export*from\"@lit/reactive-element\";import{render as e,noChange as r}from\"lit-html\";export*from\"lit-html\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const s=globalThis;class i extends t{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=e(r,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return r}}i._$litElement$=!0,i[\"finalized\"]=!0,s.litElementHydrateSupport?.({LitElement:i});const o=s.litElementPolyfillSupport;o?.({LitElement:i});const n={_$AK:(t,e,r)=>{t._$AK(e,r)},_$AL:t=>t._$AL};(s.litElementVersions??=[]).push(\"4.2.0\");export{i as LitElement,n as _$LE};\n//# sourceMappingURL=lit-element.js.map\n","const Version = '2025.12-0035';\nconst CardRegname = 'tgshiftschedule-card';\nconst CardName = 'TG Schichtplan Card';\nconst CardDescription = 'Eine Schichtplan-Karte fr Arbeitszeiten';\nconst CardFilename = 'tgshiftschedule-card.js';\nconst DebugMode = 'true'; // Aktiviere Debug fr alle Komponenten\nconst UseDummyData = 'false';\nconst showVersion = false;\nconst SaveDebounceTime = 300; // Debounce-Zeit in Millisekunden fr das Speichern von nderungen (0 = sofort, ohne Debouncing)\n\n// Schichtplan-Konfiguration\nconst DefaultConfig = {\n  entity: '', // input_text Entity fr Speicherung (muss konfiguriert werden)\n};\n\nexport {\n  CardRegname,\n  CardName,\n  CardDescription,\n  CardFilename,\n  Version,\n  DebugMode,\n  UseDummyData,\n  showVersion,\n  SaveDebounceTime,\n  DefaultConfig,\n};\n","import { CardName, DebugMode, Version } from '../card-config.js';\n\nexport class TgCardHelper {\n  static cardName = CardName;\n  static debugMode = DebugMode;\n  static className = 'TgCardHelper';\n  static version = Version;\n\n  constructor(cardName, debugMode, className, version) {\n    this.cardName = cardName || this.constructor.cardName || null;\n    this.debugMode = debugMode || this.constructor.debugMode || 'true';\n    this.className = className || this.constructor.className || null;\n    this.version = version || this.constructor.version || null;\n    this.getCardInfoString = [\n      `%c${this.cardName}%c${this.version}%c`,\n      'background: #9c27b0; color: white; padding: 2px 6px; border-top-left-radius: 12px; border-bottom-left-radius: 12px; font-weight: bold;',\n      'background: #00bcd4; color: white; padding: 2px 6px; border-top-right-radius: 12px; border-bottom-right-radius: 12px; font-weight: bold;',\n      '',\n    ];\n\n    // this._debug('tgCardHelper initialisiert');\n  }\n  _debug(...args) {\n    if (!this.debugMode) return;\n\n    // Versuche verschiedene Methoden, um den echten Klassennamen zu bekommen\n    let classNameDefault = 'unknownClass';\n    let methodNameDefault = 'unknownMethod';\n    let cardNameDefault = 'unknownCard';\n    let className = null;\n    let methodName = null;\n    let cardName = null;\n    let contextObject = null;\n\n    // Prfe ob das erste Argument ein Kontext-Objekt ist (this aus SuperBase)\n    // Kontext-Objekt erkennt man daran, dass es eine constructor-Eigenschaft hat UND\n    // spezifische Eigenschaften unserer Klassen hat (cardName ist einzigartig fr unsere Klassen)\n    if (Array.isArray(args[0]) && args[0].length === 1 && args[0][0] && typeof args[0][0] === 'object' && args[0][0].constructor && (args[0][0].cardName || args[0][0].constructor.className)) {\n      contextObject = args[0][0];\n      args = args.slice(1);\n    }\n    else {\n      contextObject = this;\n    }\n\n    // Extrahiere Informationen aus dem Kontext-Objekt (immer vorhanden)\n    // Methode 1: Statischer Klassennamen (falls definiert)\n    if (contextObject.constructor.className) {\n      className = contextObject.constructor.className;\n    }\n    // Methode 2: Tag-Name des Custom Elements\n    else if (contextObject.tagName) {\n      className = contextObject.tagName.toLowerCase().replace(/[^a-z0-9]/g, '');\n    }\n    // Methode 3: Constructor name (kann minifiziert sein)\n    else if (contextObject.constructor.name && contextObject.constructor.name.length > 2) {\n      className = contextObject.constructor.name;\n    }\n    // Methode 4: Fallback auf cardName\n    else if (contextObject.cardName) {\n      className = contextObject.cardName;\n    }\n    // Methode 5: Fallback auf Default\n    else {\n      className = classNameDefault;\n    }\n\n    cardName = contextObject.cardName || this.cardName || cardNameDefault;\n\n    // Prfe sofort, ob wir Debug-Meldungen fr diese Klasse ausgeben sollen\n    const debugList = this.debugMode.split(',').map(item => item.trim().toLowerCase());\n    const shouldDebug =\n      debugList[0].toLowerCase() === 'true'\n        ? !debugList.slice(1).includes(className.toLowerCase())\n        : debugList.includes(className.toLowerCase());\n\n    // Wenn wir keine Debug-Meldungen ausgeben sollen, beende hier\n    if (!shouldDebug) return;\n\n    // Ermittle den Methodennamen nur wenn wir Debug-Meldungen ausgeben\n    if (!methodName) {\n      try {\n        const stack = new Error().stack.split('\\n');\n        const callerLine = stack[2]; // Index 2 fr die aufrufende Methode\n\n        // Verschiedene Regex-Patterns fr verschiedene Browser-Formate\n        const patterns = [\n          /at\\s+\\w+\\.(\\w+)/, // Chrome/Node.js: \"at ClassName.methodName\"\n          /(\\w+)@/, // Firefox: \"methodName@\"\n          /(\\w+)\\s+\\(/, // Alternative: \"methodName(\"\n          /at\\s+(\\w+)/, // Fallback: \"at methodName\"\n        ];\n\n        for (const pattern of patterns) {\n          const methodMatch = callerLine.match(pattern);\n          if (methodMatch) {\n            methodName = methodMatch[1];\n            break;\n          }\n        }\n      } catch (error) {\n        // Fallback falls Stack Trace nicht verfgbar\n        methodName = null;\n      }\n    }\n    methodName = methodName || methodNameDefault;\n\n    // Erstelle Debug-Ausgabe\n    let path = `[${cardName}]:[${className}]:[${methodName}]`;\n    while (path.length < 50) {\n      path = path + ' ';\n    }\n  }\n}\n","import { LitElement, css } from 'lit';\nimport { CardName, Version, DebugMode, showVersion, UseDummyData } from './card-config.js';\nimport { TgCardHelper } from './tools/tg-card-helper.js';\n\nexport class SuperBase extends LitElement {\n  static cardName = CardName;\n  static version = Version;\n  static debugMode = DebugMode;\n  static useDummyData = UseDummyData;\n  static showVersion = showVersion;\n  static className = 'SuperBase';\n\n  static properties = {\n    hass: { type: Object },\n    config: { type: Object },\n  };\n\n  static styles = [\n    css`\n      :host {\n        display: block;\n      }\n    `,\n  ];\n\n  constructor() {\n    super();\n    this.dM = `${this.constructor.className}: `; // debugMsgPrefix - Prefix fr Debug-Nachrichten\n\n    this.cardName = this.constructor.cardName;\n    this.version = this.constructor.version;\n    this.debugMode = this.constructor.debugMode;\n    this.useDummyData = this.constructor.useDummyData;\n    this.showVersion = this.constructor.showVersion;\n    this.tgCardHelper = new TgCardHelper(this.constructor.cardName, this.constructor.debugMode);\n    this.getCardInfoString = this.tgCardHelper.getCardInfoString;\n    this._debug('SuperBase-Konstruktor wird aufgerufen');\n  }\n\n  registerMeForChangeNotifys(eventTypes = '', that = this) {\n    const dM = `${this.dM || '?: '}registerMeForChangeNotifys() `;\n    this._debug(`${dM} Aufruf`, { eventTypes, that });\n    this.dispatchEvent(\n      new CustomEvent('registerMeForChanges', {\n        bubbles: true,\n        composed: true,\n        detail: {\n          component: that,\n          callback: this._handleOnChangeNotifys.bind(this),\n          eventType: eventTypes,\n          immediately: true,\n        },\n      })\n    );\n  }\n\n  _handleOnChangeNotifys(eventdata) {\n    const dM = `${this.dM || '?: '}_handleOnChangeNotifys() `;\n    this._debug(`${dM}aufgerufen`, { eventdata });\n    for (const eventType of Object.keys(eventdata)) {\n      const fkt = '_handleOnChangeNotify_' + eventType.charAt(0).toUpperCase() + eventType.slice(1);\n      if (typeof this[fkt] === 'function') {\n        this._debug(`${dM} ${fkt} aufgerufen`, { eventdata: eventdata[eventType] });\n        this[fkt](eventdata[eventType]);\n      } else {\n        this._debug(`${dM} ${fkt} nicht gefunden`, { eventdata: eventdata[eventType] });\n      }\n    }\n  }\n\n  _debug(...args) {\n    // Delegiere komplett an den TgCardHelper mit Kontext-Informationen\n    this.tgCardHelper._debug([this], ...args);\n  }\n}\n","import { css } from 'lit';\nimport { SuperBase } from './super-base.js';\n\nexport class CardBase extends SuperBase {\n  static className = 'CardBase';\n\n  static properties = {\n    ...super.properties,\n    _selectedTab: { type: Number },\n  };\n\n  constructor() {\n    super();\n    this.dM = `${this.constructor.className}: `; // debugMsgPrefix - Prefix fr Debug-Nachrichten\n\n    this._selectedTab = 0;\n    this._debug(`CardBase-Modul wird geladen`);\n\n    // Array fr nderungs-Observer\n    this.informAtChangesClients = [];\n\n    // Eigene Verwaltung der registrierten EventTypes\n    this._registeredEventTypes = new Set();\n\n    // Registriere Event-Listener fr automatische Registrierung\n    this.addEventListener('registerMeForChanges', this._onRegisterMeForChanges.bind(this));\n  }\n\n  async firstUpdated() {\n    this._debug('CardBase firstUpdated: Start');\n    await super.firstUpdated();\n    this._debug('CardBase firstUpdated: Ende');\n  }\n\n  setConfig(config) {\n    this._debug('setConfig wird aufgerufen mit:', config);\n    if (!config) {\n      throw new Error('Keine Konfiguration angegeben');\n    }\n\n    // Prfe, ob es sich um eine neue Konfiguration handelt\n    const isNewConfig = !this.config || Object.keys(this.config).length === 0;\n\n    // Wenn es eine neue Konfiguration ist, verwende sie direkt\n    if (isNewConfig) {\n      this.config = {\n        ...this.getDefaultConfig(),\n        ...config,\n      };\n    } else {\n      // Ansonsten behalte die bestehende Konfiguration bei und aktualisiere nur genderte Werte\n      this.config = {\n        ...this.config,\n        ...config,\n      };\n    }\n\n    this._debug('config nach setConfig:', this.config);\n  }\n\n  getDefaultConfig() {\n    this._debug('getDefaultConfig wird aufgerufen');\n    return {\n      entity: '',\n      numberOfMonths: 14,\n      initialDisplayedMonths: 2,\n      selectedCalendar: 'a', // Erster aktivierter Kalender\n      calendars: [\n        { shortcut: 'a', name: 'Kalender A', color: '#ff9800', enabled: true, statusRelevant: true },\n        { shortcut: 'b', name: 'Kalender B', color: '#ff0000', enabled: false, statusRelevant: true },\n        { shortcut: 'c', name: 'Kalender C', color: '#00ff00', enabled: false, statusRelevant: true },\n        { shortcut: 'd', name: 'Kalender D', color: '#0000ff', enabled: false, statusRelevant: true },\n        { shortcut: 'e', name: 'Kalender E', color: '#ffff00', enabled: false, statusRelevant: true },\n      ],\n      holidays: {\n        neujahr: true,\n        heilige_drei_koenige: true,\n        tag_der_arbeit: true,\n        friedensfest: true,\n        mariae_himmelfahrt: true,\n        tag_der_deutschen_einheit: true,\n        reformationstag: true,\n        allerheiligen: true,\n        weihnachten_1: true,\n        weihnachten_2: true,\n        karfreitag: true,\n        ostermontag: true,\n        christi_himmelfahrt: true,\n        pfingstmontag: true,\n        fronleichnam: true,\n        busstag: true,\n      },\n    };\n  }\n\n  render(content = '') {\n    this._debug('render wird aufgerufen');\n    return html`\n      <ha-card>\n        <div class=\"card-content\">${content}</div>\n        ${this.showVersion ? html` <div class=\"version\">Version: ${this.version}</div> ` : ''}\n      </ha-card>\n    `;\n  }\n\n  static styles = [\n    super.styles,\n    css`\n      :host {\n        display: block;\n      }\n\n      ha-card {\n        padding: 16px;\n      }\n\n      .loading {\n        text-align: center;\n        padding: 20px;\n        color: var(--secondary-text-color);\n      }\n\n      .error {\n        text-align: center;\n        padding: 20px;\n        color: var(--error-color);\n      }\n    `,\n  ];\n\n  _onRegisterMeForChanges(event) {\n    this._debug('Registrierungsanfrage empfangen', {\n      component: event.target,\n      detail: event.detail,\n    });\n\n    const { component, callback, eventType = '', immediately = false } = event.detail;\n\n    if (component && typeof callback === 'function') {\n      this.registerInformAtChangesClients(component, eventType, immediately, callback);\n      this._debug('Komponente erfolgreich registriert', {\n        component: component.tagName || component.constructor.name,\n        eventType: eventType,\n      });\n    } else {\n      this._debug('Registrierung fehlgeschlagen', {\n        componentExists: !!component,\n        hasCallback: typeof callback === 'function',\n      });\n    }\n  }\n\n  /**\n   * Registriert einen Observer fr View-nderungen\n   * @param {Object} me - Das Objekt, das ber nderungen informiert werden soll\n   * @param {string|Array} eventType - Event-Typ als String oder Array von Strings\n   * @param {Function} callback - Callback-Funktion, die bei nderungen aufgerufen wird\n   */\n  registerInformAtChangesClients(me, eventType = '', immediately = false, callback = null) {\n    const dM = `${this.dM || '?: '}registerInformAtChangesClients() `;\n    this._debug(`${dM}Anfrage`, {\n      me,\n      newEventType: eventType,\n    });\n\n    // Normalisiere die neuen EventTypes\n    const eventTypes = Array.isArray(eventType)\n      ? eventType.map(e => e.toLowerCase()).sort()\n      : typeof eventType === 'string'\n        ? eventType\n            .split(',')\n            .map(e => e.trim().toLowerCase())\n            .filter(e => e.length > 0)\n            .sort()\n        : [];\n\n    // Prfe ob bereits ein Observer fr denselben me existiert\n    const existingMeInformer = this.informAtChangesClients.find(informer => informer.me === me);\n    let existingEventTypes = [];\n    if (existingMeInformer) {\n      // Normalisiere die bestehenden eventTypes\n      existingEventTypes = Array.isArray(existingMeInformer.eventType)\n        ? existingMeInformer.eventType.map(e => e.toLowerCase()).sort()\n        : typeof existingMeInformer.eventType === 'string'\n          ? existingMeInformer.eventType\n              .split(',')\n              .map(e => e.trim().toLowerCase())\n              .filter(e => e.length > 0)\n              .sort()\n          : [];\n    }\n    // Finde nur die wirklich neuen EventTypes\n    const newEventTypes = eventTypes.filter(newType => !existingEventTypes.includes(newType));\n    if (existingMeInformer && newEventTypes.length === 0) {\n      this._debug(`${dM}Client war bereits mit allen Typen registriert`, {\n        me,\n        requestedEventTypes: eventTypes,\n        existingEventTypes,\n      });\n      return false;\n    }\n\n    if (existingMeInformer) {\n      // Fge nur die neuen EventTypes hinzu\n      const combinedEventTypes = [...existingEventTypes, ...newEventTypes].sort();\n      existingMeInformer.eventType = combinedEventTypes;\n      this._debug(`${dM}Neue EventTypes hinzugefgt`, {\n        me,\n        newEventTypes,\n        existingEventTypes,\n        combinedEventTypes,\n      });\n    } else {\n      // Fge neuen Client hinzu\n      this.informAtChangesClients.push({\n        me,\n        eventType: newEventTypes,\n        callback,\n      });\n      this._debug(`${dM}Neuer Informer registriert`, {\n        me,\n        newEventTypes,\n        totalObservers: this.informAtChangesClients.length,\n      });\n    }\n    newEventTypes.forEach(eventType => {\n      // Prfe ob bereits ein Listener fr diesen EventType existiert\n      if (!this._registeredEventTypes.has(eventType)) {\n        this._debug(`${dM}Fge Listener fr EventType hinzu`, { eventType });\n        this.addEventListener(eventType + '-event', this._notifyClientsAtChanges.bind(this));\n        this._registeredEventTypes.add(eventType);\n      } else {\n        this._debug(`${dM}Listener fr EventType bereits vorhanden`, { eventType });\n      }\n      const fkt = '_onRegisterMeFor_' + eventType.charAt(0).toUpperCase() + eventType.slice(1);\n      this._debug(`${dM}Registriere Komponente fr EnvSniffer-nderungen`, { fkt });\n      if (typeof this[fkt] === 'function') {\n        this[fkt](immediately, me);\n      }\n    });\n\n    return true;\n  }\n\n  _notifyClientsAtChanges(event) {\n    this._debug('_notifyClientsAtChanges() Anfrage', {\n      event,\n    });\n    // Sichere Extraktion des EventTypes (entferne '-event' Suffix)\n    const eventType = event.type.replace('-event', '');\n    const fkt = '_on' + eventType.charAt(0).toUpperCase() + eventType.slice(1);\n    // const data = {[eventType]: (typeof this[fkt] === 'function') ? this[fkt](event.detail) : event.detail};\n\n    this._debug('_notifyClientsAtChanges() EventType extrahiert', {\n      originalEventType: event.type,\n      extractedEventType: eventType,\n      clients: this.informAtChangesClients,\n      fkt: fkt,\n    });\n\n    this.informAtChangesClients.forEach(client => {\n      // Prfe ob client.me auf ein existierendes DOM-Element verweist\n      if (\n        eventType &&\n        client.eventType.includes(eventType) &&\n        client.me &&\n        (client.me instanceof Element || client.me.nodeType)\n      ) {\n        // Zustzliche Prfung: Ist das Element noch im DOM?\n        if (document.contains(client.me) || client.me.isConnected) {\n          // Client benachrichtigen\n          const details =\n            typeof this[fkt] === 'function' ? this[fkt](client.me, event) : event.detail || {};\n          const data = { [eventType]: details };\n          if (details && client.callback && typeof client.callback === 'function') {\n            try {\n              this._debug('_notifyClientsAtChanges() Client benachrichtigen', {\n                client: client.me.constructor.name,\n                eventType: eventType,\n                data: data,\n              });\n              client.callback(data);\n            } catch (error) {\n              // Fehler beim Benachrichtigen des Clients\n            }\n          }\n        }\n      }\n    });\n  }\n}\n","import { SuperBase } from '../super-base.js';\nimport { css } from 'lit';\n\nexport class ViewBase extends SuperBase {\n  static className = 'ViewBase';\n\n  static properties = {\n    config: { type: Object },\n    epgData: { type: Array },\n    _loading: { type: Boolean },\n    _error: { type: Object },\n  };\n\n  constructor() {\n    super();\n    this._debug('ViewBase-Konstruktor: Start');\n    this.config = {};\n    this.epgData = [];\n    this._loading = false;\n    this._error = null;\n    this._debug('ViewBase-Konstruktor: Initialisierung abgeschlossen');\n  }\n  static styles = [\n    super.styles,\n    css`\n      :host {\n        display: block;\n      }\n    `,\n  ];\n\n  async firstUpdated() {\n    this._debug('ViewBase firstUpdated: Start');\n    await super.firstUpdated();\n    this._debug('ViewBase firstUpdated: Ende');\n  }\n\n  async _loadData() {\n    this._debug('ViewBase _loadData wird aufgerufen');\n    if (!this._dataProvider || !this.config.entity) {\n      this._debug('ViewBase _loadData: bersprungen - dataProvider oder entity fehlt', {\n        dataProvider: !!this._dataProvider,\n        entity: this.config.entity,\n        config: this.config,\n      });\n      return;\n    }\n\n    this._loading = true;\n    this._error = null;\n\n    try {\n      this._debug('Starte _fetchViewData mit Konfiguration:', this.config);\n      const data = await this._fetchViewData(this.config);\n      this.epgData = data;\n      this._debug('_fetchViewData erfolgreich:', data);\n    } catch (error) {\n      this._error = error;\n      this._debug('Fehler in _fetchViewData:', error);\n    } finally {\n      this._loading = false;\n    }\n  }\n\n  async _fetchViewData(config) {\n    throw new Error('_fetchViewData muss in der abgeleiteten Klasse implementiert werden');\n  }\n\n  // Basis-Rendering-Methode, die von den abgeleiteten Klassen berschrieben werden kann\n  render() {\n    if (this._loading) {\n      return this._renderLoading();\n    }\n    if (this._error) {\n      return this._renderError();\n    }\n    return this._renderContent();\n  }\n\n  _renderLoading() {\n    return html`<div class=\"loading\">Lade Daten...</div>`;\n  }\n\n  _renderError() {\n    return html`<div class=\"error\">${this._error}</div>`;\n  }\n\n  _renderContent() {\n    return html`<div>Keine Daten verfgbar</div>`;\n  }\n}\n","import { html, css, unsafeCSS } from 'lit';\nimport { ViewBase } from '../view-base.js';\nimport { SaveDebounceTime } from '../../card-config.js';\n\nexport class ShiftScheduleView extends ViewBase {\n  static className = 'ShiftScheduleView';\n\n  // Zentrale Definition der Standardfarbe fr ausgewhlte Tage im Single-Modus\n  static DEFAULT_SELECTED_DAY_COLOR = '#ff9800'; // Orange\n\n  // Fixe Schicht-Definition: 5 gleichberechtigte Schichten (a, b, c, d, e)\n  static CALENDARS = [\n    { shortcut: 'a', name: 'Schicht A', defaultColor: '#ff9800' },\n    { shortcut: 'b', name: 'Schicht B', defaultColor: '#ff0000' },\n    { shortcut: 'c', name: 'Schicht C', defaultColor: '#00ff00' },\n    { shortcut: 'd', name: 'Schicht D', defaultColor: '#0000ff' },\n    { shortcut: 'e', name: 'Schicht E', defaultColor: '#ffff00' },\n  ];\n\n  static get properties() {\n    return {\n      ...super.properties,\n      hass: { type: Object },\n      config: { type: Object },\n      lovelace: { type: Object },\n      _workingDays: { type: Object },\n      _storageWarning: { type: Object },\n      _configWarning: { type: Object },\n      _statusWarning: { type: Object },\n      _displayedMonths: { type: Number },\n      _startMonthOffset: { type: Number },\n      _selectedCalendar: { type: String },\n    };\n  }\n\n  constructor() {\n    super();\n    this._workingDays = {}; // {\"year:month\": {day: [elements]}} - z.B. {\"25:11\": {1: [\"a\"], 2: [\"a\", \"h\"], 3: [\"b\"]}}\n    this._storageWarning = null; // { show: boolean, currentLength: number, maxLength: number, percentage: number }\n    this._configWarning = null; // { show: boolean, configEntityId: string }\n    this._statusWarning = null; // { show: boolean, statusEntityId: string }\n    this._knownEntityIds = null; // Cache fr bekannte Entities [mainEntity, ...additionalEntities]\n    this._cleanupDone = false; // Flag, ob die Bereinigung bereits beim initialen Laden ausgefhrt wurde\n    this._displayedMonths = 2; // Anzahl der angezeigten Monate (wird aus config.numberOfMonths initialisiert)\n    this._startMonthOffset = 0; // Offset fr den Startmonat (0 = aktueller Monat, -1 = Vormonat, +1 = nchster Monat)\n    this._isWriting = false; // Flag, ob gerade geschrieben wird\n    this._writeLockTimer = null; // Timer fr das 5-Sekunden-Lock nach dem Schreiben\n    this._selectedCalendar = null; // Shortcut des ausgewhlten Kalenders (wird beim Setzen der Config initialisiert)\n    // Performance-Caches\n    this._holidayCache = {}; // Cache fr Feiertage: {\"2025-12\": {1: true, 25: true, ...}}\n    this._cachedHolidayEntities = null; // Cache fr Holiday-Entities (wird bei hass-Update invalidiert)\n    this._editorModeCache = null; // Cache fr Editor-Mode-Erkennung\n    this._editorModeCacheTime = 0; // Zeitstempel fr Cache-Invalidierung\n    // Debouncing fr Speicher-Operationen\n    this._saveDebounceTimer = null; // Timer fr Debouncing beim Speichern\n  }\n\n  // Formatiert eine Zahl auf zwei Ziffern (z.B. 1 -> \"01\", 25 -> \"25\")\n  formatTwoDigits(num) {\n    return String(num).padStart(2, '0');\n  }\n\n  // Prft, ob die Karte im Editor-Modus angezeigt wird (mit Cache)\n  _isInEditorMode() {\n    // Cache: Prfe ob Cache noch gltig ist (5 Sekunden)\n    const now = Date.now();\n    if (this._editorModeCache !== null && (now - this._editorModeCacheTime) < 5000) {\n      return this._editorModeCache;\n    }\n\n    let result = false;\n\n    // Methode 1: Prfe URL-Parameter ?edit=1\n    if (typeof window !== 'undefined' && window.location) {\n      const urlParams = new URLSearchParams(window.location.search);\n      if (urlParams.get('edit') === '1') {\n        result = true;\n      }\n    }\n\n    if (!result) {\n      // Methode 2: Prfe lovelace.editMode\n      if (this.lovelace?.editMode === true) {\n        result = true;\n      }\n    }\n\n    if (!result) {\n      // Methode 3: Prfe, ob hui-dialog-edit-card im DOM existiert\n      if (typeof document !== 'undefined') {\n        const editDialog = document.querySelector('hui-dialog-edit-card');\n        if (editDialog) {\n          result = true;\n        }\n      }\n    }\n\n    if (!result) {\n      // Methode 4: Prfe, ob die Karte in einem Editor-Container ist\n      let element = this;\n      let depth = 0;\n      const maxDepth = 20; // Erhht fr bessere Erkennung\n\n      while (element && depth < maxDepth) {\n        // Prfe auf hui-dialog-edit-card im Parent-Baum\n        if (element.tagName?.toLowerCase() === 'hui-dialog-edit-card') {\n          result = true;\n          break;\n        }\n\n        // Prfe auf Editor-spezifische Klassen oder Attribute\n        if (\n          element.classList?.contains('card-editor') ||\n          element.classList?.contains('hui-card-editor') ||\n          element.classList?.contains('edit-mode') ||\n          element.classList?.contains('hui-card-config-editor') ||\n          element.getAttribute?.('data-card-editor') === 'true' ||\n          element.tagName?.toLowerCase().includes('editor') ||\n          element.tagName?.toLowerCase() === 'hui-card-element-editor'\n        ) {\n          result = true;\n          break;\n        }\n\n        // Prfe auf Editor-spezifische IDs\n        if (element.id && (element.id.includes('editor') || element.id.includes('config'))) {\n          result = true;\n          break;\n        }\n\n        // Prfe auf Editor-spezifische Attribute\n        if (element.hasAttribute && (\n          element.hasAttribute('data-card-editor') ||\n          element.hasAttribute('data-editor')\n        )) {\n          result = true;\n          break;\n        }\n\n        element = element.parentElement || element.parentNode;\n        depth++;\n      }\n    }\n\n    if (!result) {\n      // Methode 5: Prfe, ob die Karte in einem Shadow DOM mit Editor-Klassen ist\n      const root = this.getRootNode();\n      if (root && root !== document) {\n        const host = root.host;\n        if (host) {\n          if (\n            host.tagName?.toLowerCase() === 'hui-dialog-edit-card' ||\n            host.classList?.contains('card-editor') ||\n            host.classList?.contains('hui-card-editor') ||\n            host.classList?.contains('edit-mode') ||\n            host.classList?.contains('hui-card-config-editor') ||\n            host.tagName?.toLowerCase() === 'hui-card-element-editor'\n          ) {\n            result = true;\n          }\n        }\n      }\n    }\n\n    if (!result) {\n      // Methode 6: Prfe URL-Pfad (falls im Editor-Modus)\n      if (typeof window !== 'undefined' && window.location) {\n        const url = window.location.href || window.location.pathname;\n        if (url && (url.includes('/config/lovelace/dashboards') || url.includes('/editor'))) {\n          result = true;\n        }\n      }\n    }\n\n    // Cache speichern\n    this._editorModeCache = result;\n    this._editorModeCacheTime = now;\n\n    return result;\n  }\n\n  // Berechnet die Kontrastfarbe (schwarz oder wei) fr eine gegebene Hintergrundfarbe\n  _getContrastColor(hexColor) {\n    if (!hexColor) return '#000000';\n\n    // Entferne # falls vorhanden\n    const hex = hexColor.replace('#', '');\n\n    // Konvertiere zu RGB\n    const r = parseInt(hex.substr(0, 2), 16);\n    const g = parseInt(hex.substr(2, 2), 16);\n    const b = parseInt(hex.substr(4, 2), 16);\n\n    // Berechne relative Luminanz (nach WCAG)\n    const luminance = (0.299 * r + 0.587 * g + 0.114 * b) / 255;\n\n    // Wenn Luminanz > 0.5, verwende schwarz, sonst wei\n    return luminance > 0.5 ? '#000000' : '#ffffff';\n  }\n\n  // Berechnet das Osterdatum fr ein gegebenes Jahr (nach Gau-Algorithmus)\n  _getEasterDate(year) {\n    const a = year % 19;\n    const b = Math.floor(year / 100);\n    const c = year % 100;\n    const d = Math.floor(b / 4);\n    const e = b % 4;\n    const f = Math.floor((b + 8) / 25);\n    const g = Math.floor((b - f + 1) / 3);\n    const h = (19 * a + b - d - g + 15) % 30;\n    const i = Math.floor(c / 4);\n    const k = c % 4;\n    const l = (32 + 2 * e + 2 * i - h - k) % 7;\n    const m = Math.floor((a + 11 * h + 22 * l) / 451);\n    const month = Math.floor((h + l - 7 * m + 114) / 31);\n    const day = ((h + l - 7 * m + 114) % 31) + 1;\n    return new Date(year, month - 1, day);\n  }\n\n  // Prft ob ein Datum ein Feiertag ist (mit Cache)\n  // Versucht zuerst Home Assistant Holiday-Sensoren zu verwenden, falls vorhanden\n  _isHoliday(year, month, day) {\n    // Cache-Key: \"2025-12\" fr Monat/Jahr\n    const cacheKey = `${year}-${String(month + 1).padStart(2, '0')}`;\n\n    // Prfe Cache\n    if (this._holidayCache[cacheKey] && this._holidayCache[cacheKey][day] !== undefined) {\n      return this._holidayCache[cacheKey][day];\n    }\n\n    // Initialisiere Cache fr diesen Monat\n    if (!this._holidayCache[cacheKey]) {\n      this._holidayCache[cacheKey] = {};\n    }\n\n    let result = false;\n\n    // Prfe ob Home Assistant Holiday-Sensoren verfgbar sind\n    if (this._hass && this._hass.states) {\n      // Suche nach Holiday-Sensoren (z.B. sensor.germany_holidays, sensor.holidays, etc.)\n      // OPTIMIERUNG: Cache Holiday-Entities, nicht bei jedem Aufruf suchen\n      if (!this._cachedHolidayEntities) {\n        this._cachedHolidayEntities = Object.keys(this._hass.states).filter(entityId => {\n          return entityId.startsWith('sensor.') &&\n                 (entityId.includes('holiday') || entityId.includes('feiertag')) &&\n                 this._hass.states[entityId].state === 'on';\n        });\n      }\n\n      const holidayEntities = this._cachedHolidayEntities;\n\n      if (holidayEntities.length > 0) {\n        // Prfe ob das Datum in den Holiday-Attributen enthalten ist\n        for (const entityId of holidayEntities) {\n          const entity = this._hass.states[entityId];\n          if (entity && entity.attributes) {\n            // Prfe verschiedene mgliche Attribute-Formate\n            const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;\n            const dateStrShort = `${String(day).padStart(2, '0')}.${String(month + 1).padStart(2, '0')}.${year}`;\n\n            // Prfe verschiedene Attribute-Namen\n            const possibleAttrs = ['dates', 'holidays', 'feiertage', 'date', 'next_date', 'upcoming'];\n            for (const attr of possibleAttrs) {\n              if (entity.attributes[attr]) {\n                const attrValue = entity.attributes[attr];\n                if (Array.isArray(attrValue)) {\n                  if (attrValue.some(d => d === dateStr || d === dateStrShort || d.includes(dateStr) || d.includes(dateStrShort))) {\n                    result = true;\n                    break;\n                  }\n                } else if (typeof attrValue === 'string') {\n                  if (attrValue.includes(dateStr) || attrValue.includes(dateStrShort)) {\n                    result = true;\n                    break;\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n\n    // Hole Feiertags-Konfiguration aus der Config (Standard: alle aktiviert)\n    const holidaysConfig = this.config?.holidays || {};\n    const isHolidayEnabled = (key) => holidaysConfig[key] !== false; // Default: true wenn nicht gesetzt\n\n    // Fallback: Berechne deutsche Feiertage selbst\n    const easter = this._getEasterDate(year);\n\n    // Feste Feiertage mit Konfigurationsprfung\n    const fixedHolidays = [\n      { month: 0, day: 1, key: 'neujahr' },   // Neujahr\n      { month: 0, day: 6, key: 'heilige_drei_koenige' },   // Heilige Drei Knige\n      { month: 4, day: 1, key: 'tag_der_arbeit' },   // Tag der Arbeit\n      { month: 7, day: 8, key: 'friedensfest' },   // Friedensfest (nur in Augsburg)\n      { month: 7, day: 15, key: 'mariae_himmelfahrt' },  // Mari Himmelfahrt\n      { month: 9, day: 3, key: 'tag_der_deutschen_einheit' },   // Tag der Deutschen Einheit\n      { month: 9, day: 31, key: 'reformationstag' },  // Reformationstag\n      { month: 10, day: 1, key: 'allerheiligen' },  // Allerheiligen\n      { month: 11, day: 25, key: 'weihnachten_1' }, // 1. Weihnachtsfeiertag\n      { month: 11, day: 26, key: 'weihnachten_2' }, // 2. Weihnachtsfeiertag\n    ];\n\n    if (!result) {\n      // Prfe feste Feiertage\n      for (const holiday of fixedHolidays) {\n        if (month === holiday.month && day === holiday.day && isHolidayEnabled(holiday.key)) {\n          result = true;\n          break;\n        }\n      }\n    }\n\n    if (!result) {\n      // Bewegliche Feiertage (abhngig von Ostern)\n      const easterTime = easter.getTime();\n      const oneDay = 24 * 60 * 60 * 1000;\n\n      // Bu- und Bettag: Mittwoch vor dem 23. November (oder am 23. November, falls es ein Mittwoch ist)\n      const nov23 = new Date(year, 10, 23); // 23. November (month ist 0-basiert)\n      const dayOfWeekNov23 = nov23.getDay(); // 0 = Sonntag, 1 = Montag, ..., 3 = Mittwoch, ..., 6 = Samstag\n      // Berechne wie viele Tage zurck zum Mittwoch\n      // Wenn Mittwoch (3): 0 Tage zurck\n      // Wenn Donnerstag (4): 1 Tag zurck  4 - 3 = 1\n      // Wenn Freitag (5): 2 Tage zurck  5 - 3 = 2\n      // Wenn Samstag (6): 3 Tage zurck  6 - 3 = 3\n      // Wenn Sonntag (0): 4 Tage zurck  (0 + 7) - 3 = 4\n      // Wenn Montag (1): 5 Tage zurck  (1 + 7) - 3 = 5\n      // Wenn Dienstag (2): 6 Tage zurck  (2 + 7) - 3 = 6\n      const daysToSubtract = dayOfWeekNov23 <= 3 ? (3 - dayOfWeekNov23) : ((dayOfWeekNov23 + 7) - 3);\n      const busstag = new Date(year, 10, 23 - daysToSubtract);\n\n      const movableHolidays = [\n        { date: new Date(easterTime - 2 * oneDay), key: 'karfreitag' },  // Karfreitag\n        { date: new Date(easterTime + 1 * oneDay), key: 'ostermontag' },  // Ostermontag\n        { date: new Date(easterTime + 39 * oneDay), key: 'christi_himmelfahrt' }, // Christi Himmelfahrt\n        { date: new Date(easterTime + 50 * oneDay), key: 'pfingstmontag' }, // Pfingstmontag\n        { date: new Date(easterTime + 60 * oneDay), key: 'fronleichnam' }, // Fronleichnam (nur in bestimmten Bundeslndern)\n        { date: busstag, key: 'busstag' }, // Bu- und Bettag (nur in Sachsen)\n      ];\n\n      // Prfe bewegliche Feiertage\n      for (const holiday of movableHolidays) {\n        if (holiday.date.getFullYear() === year &&\n            holiday.date.getMonth() === month &&\n            holiday.date.getDate() === day &&\n            isHolidayEnabled(holiday.key)) {\n          result = true;\n          break;\n        }\n      }\n    }\n\n    // Cache speichern\n    this._holidayCache[cacheKey][day] = result;\n\n    return result;\n  }\n\n  // Prft ob ein Datum ein Wochenende ist\n  _isWeekend(year, month, day) {\n    const date = new Date(year, month, day);\n    const dayOfWeek = date.getDay();\n    return dayOfWeek === 0 || dayOfWeek === 6; // Sonntag = 0, Samstag = 6\n  }\n\n  set hass(hass) {\n    // Ignoriere Updates whrend des Schreibens und 5 Sekunden danach\n    if (this._isWriting) {\n      this._hass = hass; // Aktualisiere hass trotzdem, aber lade keine Daten\n      this.requestUpdate();\n      return;\n    }\n\n    const previousEntityState = this._hass?.states[this._config?.entity]?.state;\n    const newEntityState = hass?.states[this._config?.entity]?.state;\n\n    // Prfe auch zustzliche Entities auf nderungen\n    let hasAnyEntityChanged = previousEntityState !== newEntityState;\n    if (!hasAnyEntityChanged && this._config && this._knownEntityIds) {\n      // Prfe alle bekannten zustzlichen Entities\n      for (let i = 1; i < this._knownEntityIds.length; i++) {\n        const entityId = this._knownEntityIds[i];\n        const prevState = this._hass?.states[entityId]?.state;\n        const newState = hass?.states[entityId]?.state;\n        if (prevState !== newState) {\n          hasAnyEntityChanged = true;\n          break;\n        }\n      }\n    }\n\n    this._hass = hass;\n\n    // Cache-Invalidierung: Holiday-Entities Cache zurcksetzen bei hass-Update\n    this._cachedHolidayEntities = null;\n\n    if (this._config) {\n      // Nur laden, wenn sich ein State tatschlich gendert hat (nicht bei jedem Update)\n      if (hasAnyEntityChanged) {\n        this.loadWorkingDays();\n      }\n      // Prfe Config-Entity und Status-Entity bei jedem hass-Update (kann sich ndern)\n      this.checkConfigEntity();\n      this.checkStatusEntity();\n    }\n    this.requestUpdate();\n  }\n\n  set config(config) {\n    this._config = config;\n\n    // Initialisiere _displayedMonths aus der Config\n    if (config && config.initialDisplayedMonths) {\n      // Verwende initialDisplayedMonths als Standardwert\n      const maxMonths = config.numberOfMonths || 14;\n      this._displayedMonths = Math.min(config.initialDisplayedMonths, maxMonths);\n    } else if (config && config.numberOfMonths && !this._displayedMonths) {\n      // Fallback: Verwende numberOfMonths, falls initialDisplayedMonths nicht gesetzt ist\n      this._displayedMonths = config.numberOfMonths;\n    } else if (config && config.numberOfMonths) {\n      // Stelle sicher, dass _displayedMonths nicht grer als numberOfMonths ist\n      this._displayedMonths = Math.min(this._displayedMonths || 2, config.numberOfMonths);\n    }\n\n    // Initialisiere _selectedCalendar - prfe nur aktivierte Kalender\n    // Setze _config zuerst, damit _getAllCalendars() funktioniert\n    this._config = config;\n    const allCalendars = this._getAllCalendars();\n\n    // Synchronisiere _selectedCalendar immer mit config.selectedCalendar\n    if (config && config.selectedCalendar) {\n      // Prfe ob der ausgewhlte Kalender aktiviert ist\n      const exists = allCalendars.some(cal => cal.shortcut === config.selectedCalendar);\n      if (exists) {\n        // Aktualisiere _selectedCalendar, auch wenn es bereits gesetzt ist\n        this._selectedCalendar = config.selectedCalendar;\n      } else {\n        // Wenn der ausgewhlte Kalender nicht aktiviert ist, verwende den ersten aktivierten\n        if (allCalendars.length > 0) {\n          this._selectedCalendar = allCalendars[0].shortcut;\n          if (config) {\n            config.selectedCalendar = this._selectedCalendar;\n            this.dispatchEvent(\n              new CustomEvent('config-changed', {\n                detail: { config: config },\n                bubbles: true,\n                composed: true,\n              })\n            );\n          }\n        } else {\n          // Ausgewhlter Kalender ist nicht aktiviert, verwende den ersten aktivierten\n          if (allCalendars.length > 0) {\n            this._selectedCalendar = allCalendars[0].shortcut;\n            if (config) {\n              config.selectedCalendar = this._selectedCalendar;\n              this.dispatchEvent(\n                new CustomEvent('config-changed', {\n                  detail: { config: config },\n                  bubbles: true,\n                  composed: true,\n                })\n              );\n            }\n          } else {\n            // Kein Kalender aktiviert - keine automatische Aktivierung\n            this._selectedCalendar = null;\n            if (config) {\n              config.selectedCalendar = null;\n            }\n          }\n        }\n      }\n    } else {\n      // Wenn kein selectedCalendar gesetzt ist, verwende den ersten aktivierten Kalender\n      if (allCalendars.length > 0) {\n        this._selectedCalendar = allCalendars[0].shortcut;\n        if (config) {\n          config.selectedCalendar = this._selectedCalendar;\n          this.dispatchEvent(\n            new CustomEvent('config-changed', {\n              detail: { config: config },\n              bubbles: true,\n              composed: true,\n            })\n          );\n        }\n      } else {\n        // Kein Kalender aktiviert - keine automatische Aktivierung\n        this._selectedCalendar = null;\n        if (config) {\n          config.selectedCalendar = null;\n        }\n      }\n    }\n\n    if (this._hass) {\n      this.loadWorkingDays();\n      this.checkConfigEntity();\n      this.checkStatusEntity();\n      this.saveConfigToEntity();\n    }\n    this.requestUpdate();\n  }\n\n  async loadWorkingDays() {\n    if (!this._hass || !this._config || !this._config.entity) return;\n\n    // Ermittle die maximale Lnge fr alle Entities\n    const maxLengths = this.getAllEntityMaxLengths();\n\n    // Sammle alle Daten-Strings aus der Haupt-Entity und zustzlichen Entities\n    const dataStrings = [];\n\n    // Prfe auf zustzliche Entities (z.B. input_text.arbeitszeiten_001, _002, etc.)\n    const baseEntityId = this._config.entity;\n    const additionalEntities = this.findAdditionalEntities(baseEntityId);\n\n    // Speichere die Liste der bekannten Entities fr spteres Schreiben\n    // Diese Liste enthlt: Haupt-Entity + alle zustzlichen Entities\n    this._knownEntityIds = [baseEntityId, ...additionalEntities];\n\n    // Lade Daten aus allen Entities (Haupt-Entity + zustzliche)\n    for (const entityId of this._knownEntityIds) {\n      const entity = this._hass.states[entityId];\n      if (entity && entity.state && entity.state.trim() !== '') {\n        dataStrings.push(entity.state);\n        const currentLength = entity.state.length;\n        const maxLength = maxLengths[entityId];\n        if (maxLength !== undefined) {\n        }\n      }\n    }\n\n    // Fge alle Strings zusammen (mit \";\" als Trennzeichen) und parse dann einmal\n    const additionalEntityIds = this._knownEntityIds ? this._knownEntityIds.slice(1) : [];\n    if (dataStrings.length > 0) {\n      const combinedString = dataStrings.join(';');\n      this.parseWorkingDays(combinedString);\n    } else {\n      this._workingDays = {};\n    }\n\n    // Prfe Speicherverbrauch und zeige Warnung bei 90%+\n    this.checkStorageUsage();\n\n    // Bereinige alte Monate: entferne alle Monate, die nicht angezeigt werden\n    // Die Karte zeigt numberOfMonths Monate an (ab aktueller Monat)\n    // Behalten wir: Vormonat (aktuell - 1) und alle angezeigten Monate (aktuell bis aktuell + numberOfMonths - 1)\n    // Fhre die Bereinigung nur beim initialen Laden aus, nicht bei jedem State-Update\n    // (um zu verhindern, dass gerade geschriebene Daten sofort wieder gelscht werden)\n    if (Object.keys(this._workingDays).length > 0 && !this._cleanupDone) {\n      this._cleanupDone = true;\n      const numberOfMonths = this._config.numberOfMonths || 2;\n      const now = new Date();\n      const currentMonth = now.getMonth() + 1; // 1-12\n      const currentYearFull = now.getFullYear();\n      const currentYear = currentYearFull % 100; // Kurzform, z.B. 25\n\n      // Berechne Vormonat und sein Jahr\n      let previousMonth, previousYear;\n      if (currentMonth === 1) {\n        previousMonth = 12;\n        previousYear = (currentYearFull - 1) % 100; // Jahr des Vormonats (Dezember des Vorjahres)\n      } else {\n        previousMonth = currentMonth - 1;\n        previousYear = currentYear;\n      }\n\n      // Erstelle Liste aller Monate, die behalten werden sollen\n      const monthsToKeep = [];\n\n      // Fge Vormonat hinzu\n      monthsToKeep.push({ year: previousYear, month: previousMonth });\n\n      // Fge alle angezeigten Monate hinzu\n      for (let i = 0; i < numberOfMonths; i++) {\n        const date = new Date(currentYearFull, currentMonth - 1 + i, 1);\n        const year = date.getFullYear() % 100;\n        const month = date.getMonth() + 1;\n        monthsToKeep.push({ year, month });\n      }\n\n      let hasChanges = false;\n\n      for (const key of Object.keys(this._workingDays)) {\n        // Parse den Key um zu prfen, ob er behalten werden soll\n        const keyParts = key.split(':');\n        if (keyParts.length === 2) {\n          const keyYear = parseInt(keyParts[0]);\n          const keyMonth = parseInt(keyParts[1]);\n\n          // Prfe ob dieser Key in der Liste der zu behaltenden Monate ist\n          const shouldKeep = monthsToKeep.some(\n            m => m.year === keyYear && m.month === keyMonth\n          );\n\n          //   key,\n          //   keyYear,\n          //   keyMonth,\n          //   shouldKeep,\n          //   monthsToKeep: monthsToKeep.map(m => `${m.year}:${m.month}`)\n          // });\n\n          if (!shouldKeep) {\n            delete this._workingDays[key];\n            hasChanges = true;\n          }\n        } else {\n          // Ungltiges Format, entfernen\n          delete this._workingDays[key];\n          hasChanges = true;\n        }\n      }\n\n      // Wenn nderungen vorgenommen wurden, speichere die bereinigten Daten\n      if (hasChanges) {\n        const cleanedValue = this.serializeWorkingDays();\n        try {\n          await this._hass.callService('input_text', 'set_value', {\n            entity_id: this._config.entity,\n            value: cleanedValue,\n          });\n        } catch (error) {\n        }\n      }\n    }\n\n    this.requestUpdate();\n  }\n\n  _parseWorkingDaysIntoObject(dataString, targetObject) {\n    if (!dataString || dataString.trim() === '') return;\n\n    const parts = dataString.split(';').filter(p => p.trim() !== '');\n    for (const part of parts) {\n      const trimmedPart = part.trim();\n      if (!trimmedPart) continue;\n\n      // Format: <jahr>:<monat>:<tag><elementen>,<tag><elementen> oder altes Format\n      // Beispiel: \"25:11:01a,02ah,03b\" oder \"25:11:01,02,03\" (altes Format ohne Elemente)\n      const colons = trimmedPart.split(':');\n\n      if (colons.length === 2) {\n        // Altes Format ohne Jahr (Kompatibilitt): <monat>:<tag>,<tag>\n        const month = colons[0].trim();\n        const daysStr = colons[1].trim();\n        if (month && daysStr) {\n          const monthNum = parseInt(month);\n          if (!isNaN(monthNum) && monthNum >= 1 && monthNum <= 12) {\n            // Verwende aktuelles Jahr\n            const now = new Date();\n            const year = now.getFullYear() % 100;\n            const key = `${this.formatTwoDigits(year)}:${this.formatTwoDigits(monthNum)}`;\n            targetObject[key] = this._parseDaysWithElements(daysStr);\n          }\n        }\n      } else if (colons.length >= 3) {\n        // Prfe ob erstes Element ein Jahr ist (kleiner als 13) oder ein Monat\n        const first = parseInt(colons[0].trim());\n        const second = parseInt(colons[1].trim());\n\n        if (first <= 12 && second > 12) {\n          // Altes Format: <monat>:<jahr>:<tag>,<tag> - konvertiere zu neuem Format\n          const monthNum = first;\n          const yearNum = second;\n          const daysStr = colons.slice(2).join(':');\n          if (daysStr && monthNum >= 1 && monthNum <= 12 && !isNaN(yearNum)) {\n            const key = `${this.formatTwoDigits(yearNum)}:${this.formatTwoDigits(monthNum)}`;\n            targetObject[key] = this._parseDaysWithElements(daysStr);\n          }\n        } else if (first > 12 && second <= 12) {\n          // Neues Format: <jahr>:<monat>:<tag><elementen>,<tag><elementen>\n          const yearNum = first;\n          const monthNum = second;\n          const daysStr = colons.slice(2).join(':');\n          if (daysStr && monthNum >= 1 && monthNum <= 12 && !isNaN(yearNum)) {\n            const key = `${this.formatTwoDigits(yearNum)}:${this.formatTwoDigits(monthNum)}`;\n            targetObject[key] = this._parseDaysWithElements(daysStr);\n          }\n        }\n      }\n    }\n  }\n\n  // Parst Tage mit Elementen: \"01a,02ah,03b\" -> {1: [\"a\"], 2: [\"a\", \"h\"], 3: [\"b\"]}\n  // Oder altes Format ohne Elemente: \"01,02,03\" -> {1: [], 2: [], 3: []}\n  _parseDaysWithElements(daysStr) {\n    const result = {};\n    const dayEntries = daysStr.split(',').filter(d => d.trim() !== '');\n\n    for (const entry of dayEntries) {\n      const trimmed = entry.trim();\n      if (!trimmed) continue;\n\n      // Extrahiere Tag und Elemente: \"01a\" -> day=1, elements=[\"a\"]\n      // Oder: \"02ah\" -> day=2, elements=[\"a\", \"h\"]\n      // Oder altes Format: \"01\" -> day=1, elements=[]\n      const match = trimmed.match(/^(\\d+)([a-z]*)$/i);\n      if (match) {\n        const dayNum = parseInt(match[1]);\n        const elementsStr = match[2] || '';\n        const elements = elementsStr.split('').filter(e => e.trim() !== '');\n\n        if (!isNaN(dayNum) && dayNum >= 1 && dayNum <= 31) {\n          // Wenn der Tag bereits existiert, fge Elemente hinzu (keine Duplikate)\n          if (result[dayNum]) {\n            // Vereinige Arrays und entferne Duplikate\n            result[dayNum] = [...new Set([...result[dayNum], ...elements])];\n          } else {\n            result[dayNum] = elements;\n          }\n        }\n      }\n    }\n\n    return result;\n  }\n\n  parseWorkingDays(dataString) {\n    this._workingDays = {};\n    this._parseWorkingDaysIntoObject(dataString, this._workingDays);\n  }\n\n  findAdditionalEntities(baseEntityId) {\n    const additionalEntities = [];\n\n    if (!this._hass || !this._hass.states) {\n      return additionalEntities;\n    }\n\n    // Extrahiere den Domain-Teil (z.B. \"input_text.arbeitszeiten\")\n    const entityParts = baseEntityId.split('.');\n    if (entityParts.length !== 2) {\n      return additionalEntities;\n    }\n\n    const [domain, baseName] = entityParts;\n\n    // Suche nach Entities mit _001, _002, etc. (bis _999)\n    for (let i = 1; i <= 999; i++) {\n      const suffix = String(i).padStart(3, '0'); // _001, _002, ..., _999\n      const additionalEntityId = `${domain}.${baseName}_${suffix}`;\n\n      if (this._hass.states[additionalEntityId]) {\n        additionalEntities.push(additionalEntityId);\n      } else {\n        // Wenn eine Entity nicht existiert, breche ab (Entities sind sequenziell)\n        // Es macht keinen Sinn weiterzusuchen, wenn _001 fehlt\n        break;\n      }\n    }\n\n    return additionalEntities;\n  }\n\n  getEntityMaxLength(entityId) {\n    if (!this._hass || !this._hass.states || !entityId) {\n      return null;\n    }\n\n    const entity = this._hass.states[entityId];\n    if (!entity || !entity.attributes) {\n      return null;\n    }\n\n    // input_text Entities haben ein 'max' Attribut, das die maximale Lnge definiert\n    const maxLength = entity.attributes.max;\n\n    if (maxLength !== undefined && maxLength !== null) {\n      return parseInt(maxLength);\n    }\n\n    return null;\n  }\n\n  getAllEntityMaxLengths() {\n    const maxLengths = {};\n\n    if (!this._hass || !this._config || !this._config.entity) {\n      return maxLengths;\n    }\n\n    // Prfe Haupt-Entity\n    const mainEntityId = this._config.entity;\n    const mainMaxLength = this.getEntityMaxLength(mainEntityId);\n    if (mainMaxLength !== null) {\n      maxLengths[mainEntityId] = mainMaxLength;\n    }\n\n    // Prfe zustzliche Entities\n    const additionalEntities = this.findAdditionalEntities(mainEntityId);\n    for (const additionalEntityId of additionalEntities) {\n      const additionalMaxLength = this.getEntityMaxLength(additionalEntityId);\n      if (additionalMaxLength !== null) {\n        maxLengths[additionalEntityId] = additionalMaxLength;\n      }\n    }\n\n    return maxLengths;\n  }\n\n  checkStorageUsage(serializedDataLength = null) {\n    if (!this._hass || !this._config || !this._config.entity) {\n      this._storageWarning = null;\n      this.requestUpdate();\n      return;\n    }\n\n    // Verwende _knownEntityIds falls verfgbar, sonst suche neu\n    let allEntityIds;\n    if (this._knownEntityIds && this._knownEntityIds.length > 0) {\n      allEntityIds = [...this._knownEntityIds];\n    } else {\n      // Fallback: Suche Entities neu\n      allEntityIds = [this._config.entity, ...this.findAdditionalEntities(this._config.entity)];\n    }\n\n    const maxLengths = this.getAllEntityMaxLengths();\n    if (Object.keys(maxLengths).length === 0) {\n      this._storageWarning = null;\n      this.requestUpdate();\n      return;\n    }\n\n    // Berechne Gesamtlnge und maximale Gesamtlnge\n    let totalCurrentLength = 0;\n    let totalMaxLength = 0;\n\n    // Wenn eine serializedDataLength bergeben wurde, verwende diese (z.B. nach toggleDay)\n    // Ansonsten lese die Lngen aus den aktuellen States\n    if (serializedDataLength !== null && serializedDataLength !== undefined) {\n      totalCurrentLength = serializedDataLength;\n    } else {\n      // Lese Lngen aus den aktuellen States\n      for (const entityId of allEntityIds) {\n        const entity = this._hass.states[entityId];\n        if (entity && entity.state) {\n          totalCurrentLength += entity.state.length;\n        }\n      }\n    }\n\n    // Berechne maximale Gesamtlnge\n    for (const entityId of allEntityIds) {\n      const maxLength = maxLengths[entityId];\n      if (maxLength !== undefined && maxLength !== null) {\n        totalMaxLength += maxLength;\n      }\n    }\n\n    if (totalMaxLength === 0) {\n      this._storageWarning = null;\n      this.requestUpdate();\n      return;\n    }\n\n    const percentage = (totalCurrentLength / totalMaxLength) * 100;\n\n    // Prfe ob 90% berschritten werden\n    if (percentage >= 90) {\n      this._storageWarning = {\n        show: true,\n        currentLength: totalCurrentLength,\n        maxLength: totalMaxLength,\n        percentage: Math.round(percentage * 10) / 10,\n      };\n    } else {\n      this._storageWarning = null;\n    }\n\n    // Wichtig: requestUpdate() aufrufen, damit die Warnung angezeigt wird\n    this.requestUpdate();\n  }\n\n  getConfigEntityId() {\n    // Leite die Config-Entity-ID aus der Haupt-Entity ab\n    if (!this._config || !this._config.entity) {\n      return null;\n    }\n    // Fge \"_config\" an die Entity-ID an\n    // z.B. \"input_text.arbeitszeiten\" -> \"input_text.arbeitszeiten_config\"\n    return this._config.entity + '_config';\n  }\n\n  getStatusEntityId() {\n    // Leite die Status-Entity-ID aus der Haupt-Entity ab\n    if (!this._config || !this._config.entity) {\n      return null;\n    }\n    // Fge \"_status\" an die Entity-ID an\n    // z.B. \"input_text.arbeitszeiten\" -> \"input_text.arbeitszeiten_status\"\n    return this._config.entity + '_status';\n  }\n\n  checkConfigEntity() {\n    // Prfe ob die Config-Entity existiert\n    if (!this._config || !this._config.entity) {\n      this._configWarning = null;\n      this.requestUpdate();\n      return;\n    }\n\n    const configEntityId = this.getConfigEntityId();\n    if (!configEntityId) {\n      this._configWarning = null;\n      this.requestUpdate();\n      return;\n    }\n\n    // Wenn kein hass vorhanden ist (z.B. im Editor), zeige Warnung im Editor-Modus\n    if (!this._hass) {\n      if (this._isInEditorMode()) {\n        this._configWarning = {\n          show: true,\n          type: 'missing',\n          configEntityId: configEntityId,\n        };\n      } else {\n        this._configWarning = null;\n      }\n      this.requestUpdate();\n      return;\n    }\n\n    const configEntity = this._hass.states[configEntityId];\n    if (!configEntity) {\n      this._configWarning = {\n        show: true,\n        type: 'missing',\n        configEntityId: configEntityId,\n      };\n    } else {\n      // Prfe ob es eine Gren-Warnung gibt, die beibehalten werden soll\n      if (this._configWarning && this._configWarning.type === 'size') {\n        // Behalte die Gren-Warnung\n      } else {\n        this._configWarning = null;\n      }\n    }\n\n    this.requestUpdate();\n  }\n\n  // Rendert eine Warnung fr eine fehlende Entity\n  _renderMissingEntityWarning(entityId, entityName, maxLength = 255, isConfig = false) {\n    const entityNameShort = entityId.replace('input_text.', '');\n    return html`\n      <div class=\"storage-warning\">\n        <div class=\"warning-icon\"></div>\n        <div class=\"warning-content\">\n          <div class=\"warning-title\">${entityName} fehlt!</div>\n          <div class=\"warning-message\">\n            Die Entity <code>${entityId}</code> wurde nicht gefunden.\n          </div>\n          <div class=\"warning-action\">\n            Bitte legen Sie diese Entity ber die UI an:\n            <ul>\n              <li>Einstellungen  Automatisierungen &amp; Szenen  Hilfsmittel</li>\n              <li>Hinzufgen  Text</li>\n              <li>Name: <code>${entityNameShort}</code></li>\n              <li>Maximale Lnge: <code>${maxLength}</code> Zeichen</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  checkStatusEntity() {\n    // Prfe ob die Status-Entity existiert\n    if (!this._config || !this._config.entity) {\n      this._statusWarning = null;\n      this.requestUpdate();\n      return;\n    }\n\n    const statusEntityId = this.getStatusEntityId();\n    if (!statusEntityId) {\n      this._statusWarning = null;\n      this.requestUpdate();\n      return;\n    }\n\n    // Wenn kein hass vorhanden ist (z.B. im Editor), zeige Warnung im Editor-Modus\n    if (!this._hass) {\n      if (this._isInEditorMode()) {\n        this._statusWarning = {\n          show: true,\n          type: 'missing',\n          statusEntityId: statusEntityId,\n        };\n      } else {\n        this._statusWarning = null;\n      }\n      this.requestUpdate();\n      return;\n    }\n\n    const statusEntity = this._hass.states[statusEntityId];\n    if (!statusEntity) {\n      this._statusWarning = {\n        show: true,\n        type: 'missing',\n        statusEntityId: statusEntityId,\n      };\n    } else {\n      this._statusWarning = null;\n    }\n\n    this.requestUpdate();\n  }\n\n  async saveConfigToEntity() {\n    // Speichere die Konfiguration in der Config-Entity\n    if (!this._hass || !this._config || !this._config.entity) {\n      return;\n    }\n\n    const configEntityId = this.getConfigEntityId();\n    if (!configEntityId) {\n      return;\n    }\n\n    // Prfe ob die Entity existiert\n    const configEntity = this._hass.states[configEntityId];\n    if (!configEntity) {\n      // Entity existiert nicht, zeige Warnung\n      this.checkConfigEntity();\n      return;\n    }\n\n    // Sammle aktive Schichten als Array mit Subarrays [shortcut, name, start1, end1, start2, end2, statusRelevant]\n    // Reihenfolge: [0] = shortcut, [1] = name, [2] = Startzeit 1, [3] = Endzeit 1, [4] = Startzeit 2, [5] = Endzeit 2, [6] = statusRelevant (0 oder 1)\n    // Leere Positionen bleiben leer (null) wenn Zeitrume nicht gesetzt sind\n    const activeShifts = [];\n    if (this._config.calendars) {\n      for (const calendar of this._config.calendars) {\n        if (calendar && calendar.shortcut && (calendar.enabled === true || calendar.enabled === 'true' || calendar.enabled === 1)) {\n          const shiftData = [\n            calendar.shortcut,\n            calendar.name || `Schicht ${calendar.shortcut.toUpperCase()}`,\n          ];\n\n          // Fge Zeitrume hinzu (feste Positionen, flach ohne Verschachtelung)\n          if (calendar.timeRanges && Array.isArray(calendar.timeRanges)) {\n            // Zeitraum 1: [2] = Startzeit 1, [3] = Endzeit 1\n            const range1 = calendar.timeRanges[0];\n            if (range1 && Array.isArray(range1) && range1.length >= 2) {\n              const start1 = range1[0] && range1[0].trim() !== '' ? range1[0].trim() : null;\n              const end1 = range1[1] && range1[1].trim() !== '' ? range1[1].trim() : null;\n              // Nur hinzufgen wenn beide Zeiten gesetzt sind (vollstndiger Zeitraum)\n              if (start1 && end1) {\n                shiftData.push(start1, end1);\n              } else {\n                shiftData.push(null, null);\n              }\n            } else {\n              shiftData.push(null, null);\n            }\n\n            // Zeitraum 2: [4] = Startzeit 2, [5] = Endzeit 2\n            const range2 = calendar.timeRanges[1];\n            if (range2 && Array.isArray(range2) && range2.length >= 2) {\n              const start2 = range2[0] && range2[0].trim() !== '' ? range2[0].trim() : null;\n              const end2 = range2[1] && range2[1].trim() !== '' ? range2[1].trim() : null;\n              // Nur hinzufgen wenn beide Zeiten gesetzt sind (vollstndiger Zeitraum)\n              if (start2 && end2) {\n                shiftData.push(start2, end2);\n              } else {\n                shiftData.push(null, null);\n              }\n            } else {\n              shiftData.push(null, null);\n            }\n          } else {\n            // Keine Zeitrume definiert, fge leere Positionen hinzu\n            shiftData.push(null, null, null, null);\n          }\n\n          // Fge statusRelevant hinzu: [6] = statusRelevant (0 oder 1)\n          // Default: true (1), wenn nicht explizit auf false gesetzt\n          const statusRelevant = calendar.statusRelevant !== false ? 1 : 0;\n          shiftData.push(statusRelevant);\n\n          activeShifts.push(shiftData);\n        }\n      }\n    }\n\n    // Speichere als JSON (direktes Array, kein Objekt-Wrapper)\n    let configJson = JSON.stringify(activeShifts);\n\n    // Entferne die uere Klammer (erstes [ und letztes ])\n    if (configJson.startsWith('[') && configJson.endsWith(']')) {\n      configJson = configJson.slice(1, -1);\n    }\n\n    // Entferne \"null\" aus dem String (behalte Kommas)\n    // Wiederhole die Ersetzung, bis keine null mehr vorhanden sind (fr mehrere null hintereinander)\n    let previousLength;\n    do {\n      previousLength = configJson.length;\n      // Ersetze ,null, durch ,, (mehrfach, bis keine null mehr vorhanden sind)\n      configJson = configJson.replace(/,null,/g, ',,');\n      // Ersetze ,null] durch ,] (falls am Ende eines Arrays)\n      configJson = configJson.replace(/,null\\]/g, ',]');\n      // Ersetze [null, durch [, (falls am Anfang eines Arrays)\n      configJson = configJson.replace(/\\[null,/g, '[,');\n      // Ersetze ,null, am Ende des Strings (falls letztes Element null ist)\n      configJson = configJson.replace(/,null$/g, ',');\n    } while (configJson.length !== previousLength);\n\n    // Entferne Anfhrungszeichen um Strings\n    // Ersetze \",\" durch , (Anfhrungszeichen um Kommas)\n    configJson = configJson.replace(/\",\"/g, ',');\n    // Ersetze [\" durch [ (Anfhrungszeichen am Anfang eines Arrays)\n    configJson = configJson.replace(/\\[\"/g, '[');\n    // Ersetze \"] durch ] (Anfhrungszeichen am Ende eines Arrays)\n    configJson = configJson.replace(/\"\\]/g, ']');\n    // Ersetze ,\" durch , (Anfhrungszeichen nach Komma)\n    configJson = configJson.replace(/,\"/g, ',');\n    // Ersetze \", durch , (Anfhrungszeichen vor Komma)\n    configJson = configJson.replace(/\",/g, ',');\n\n    const configJsonLength = configJson.length;\n\n    // Prfe ob der JSON-Text in das Entity passt\n    const maxLength = this.getEntityMaxLength(configEntityId);\n    if (maxLength !== null && configJsonLength > maxLength) {\n      // JSON ist zu lang, zeige Warnung\n      const percentage = (configJsonLength / maxLength) * 100;\n      this._configWarning = {\n        show: true,\n        type: 'size',\n        configEntityId: configEntityId,\n        currentLength: configJsonLength,\n        maxLength: maxLength,\n        percentage: Math.round(percentage * 10) / 10,\n      };\n      this.requestUpdate();\n      return;\n    }\n\n    try {\n      await this._hass.callService('input_text', 'set_value', {\n        entity_id: configEntityId,\n        value: configJson,\n      });\n      // Warnung entfernen, da Entity existiert und erfolgreich beschrieben wurde\n      this._configWarning = null;\n      this.requestUpdate();\n    } catch (error) {\n      // Fehler beim Schreiben - knnte bedeuten, dass Entity nicht existiert\n      this.checkConfigEntity();\n    }\n  }\n\n  serializeWorkingDays() {\n    const parts = [];\n    // Sortiere nach Jahr:Monat\n    const keys = Object.keys(this._workingDays).sort((a, b) => {\n      const [yearA, monthA] = a.split(':').map(x => parseInt(x));\n      const [yearB, monthB] = b.split(':').map(x => parseInt(x));\n      if (yearA !== yearB) return yearA - yearB;\n      return monthA - monthB;\n    });\n\n    for (const key of keys) {\n      const days = this._workingDays[key];\n      if (!days || typeof days !== 'object' || Array.isArray(days)) continue;\n\n      // Struktur: {day: [elements]}\n      const dayEntries = Object.keys(days)\n        .map(d => parseInt(d))\n        .filter(d => !isNaN(d))\n        .sort((a, b) => a - b);\n\n      if (dayEntries.length > 0) {\n        // Format: <jahr>:<monat>:<tag><elementen>,<tag><elementen>\n        // Beispiel: \"25:11:01a,02ab,03b\"\n        const formattedDays = dayEntries.map(dayNum => {\n          const elements = days[dayNum];\n          const dayStr = this.formatTwoDigits(dayNum);\n          if (Array.isArray(elements) && elements.length > 0) {\n            // Sortiere die Kalender-Shortcuts alphabetisch (a, b, c, d, e) fr konsistente Reihenfolge\n            const sortedElements = [...elements].sort();\n            // Tag mit Elementen: \"01a\", \"02ab\", etc.\n            return dayStr + sortedElements.join('');\n          } else {\n            // Tag ohne Elemente\n            return dayStr;\n          }\n        }).join(',');\n        parts.push(`${key}:${formattedDays}`);\n      }\n    }\n    return parts.join(';');\n  }\n\n  async distributeDataToEntities(serializedData) {\n    if (!this._hass || !this._config || !this._config.entity) {\n      return;\n    }\n\n    // Setze Schreib-Lock\n    this._isWriting = true;\n\n    // Lsche vorhandenen Timer, falls vorhanden\n    if (this._writeLockTimer) {\n      clearTimeout(this._writeLockTimer);\n      this._writeLockTimer = null;\n    }\n\n    try {\n      // Verwende die gecachte Liste der Entities, falls verfgbar\n    // Prfe aber auch, ob neue Entities hinzugekommen sind\n    let allEntityIds;\n    if (this._knownEntityIds && this._knownEntityIds.length > 0) {\n      // Verwende gecachte Liste\n      allEntityIds = [...this._knownEntityIds];\n\n      // Prfe ob neue Entities hinzugekommen sind\n      const currentAdditionalEntities = this.findAdditionalEntities(this._config.entity);\n      const knownAdditionalCount = this._knownEntityIds.length - 1; // -1 fr Haupt-Entity\n      if (currentAdditionalEntities.length > knownAdditionalCount) {\n        // Neue Entities gefunden, aktualisiere die Liste\n        const newEntities = currentAdditionalEntities.slice(knownAdditionalCount);\n        allEntityIds.push(...newEntities);\n        this._knownEntityIds = [...allEntityIds];\n      }\n    } else {\n      // Keine gecachte Liste vorhanden, sammle Entities neu\n      allEntityIds = [this._config.entity];\n      const additionalEntities = this.findAdditionalEntities(this._config.entity);\n      allEntityIds.push(...additionalEntities);\n      this._knownEntityIds = [...allEntityIds];\n    }\n\n    // Ermittle die maximale Lnge fr jede Entity\n    const maxLengths = {};\n    let totalMaxLength = 0;\n    for (const entityId of allEntityIds) {\n      const maxLength = this.getEntityMaxLength(entityId);\n      if (maxLength !== null) {\n        maxLengths[entityId] = maxLength;\n        totalMaxLength += maxLength;\n      } else {\n        // Wenn keine max-Lnge bekannt ist, verwende einen Standardwert (z.B. 255)\n        maxLengths[entityId] = 255;\n        totalMaxLength += 255;\n      }\n    }\n\n    // Debug: Zeige wie viele Zeichen wir schreiben wollen vs. knnen\n    const dataLength = serializedData ? serializedData.length : 0;\n\n    // Wenn keine Daten vorhanden sind, setze alle Entities auf leer\n    if (!serializedData || serializedData.trim() === '') {\n      for (const entityId of allEntityIds) {\n        try {\n          await this._hass.callService('input_text', 'set_value', {\n            entity_id: entityId,\n            value: '',\n          });\n        } catch (error) {\n        }\n      }\n      // Setze Timer auch wenn keine Daten vorhanden waren\n      this._writeLockTimer = setTimeout(() => {\n        this._isWriting = false;\n        this._writeLockTimer = null;\n      }, 5000);\n      return;\n    }\n\n    // Verteile die Daten zeichenweise auf die Entities (umgekehrt zum Einlesen)\n    // Wir haben einen Datenstring ber alles und schreiben nur so viele Zeichen wie aufgenommen werden knnen\n    const entityValues = {};\n    let currentEntityIndex = 0;\n    let remainingData = serializedData;\n\n    // Verteile die Daten auf die verfgbaren Entities\n    while (remainingData.length > 0 && currentEntityIndex < allEntityIds.length) {\n      const currentEntityId = allEntityIds[currentEntityIndex];\n      const maxLength = maxLengths[currentEntityId];\n\n      // Nimm so viele Zeichen wie mglich aus remainingData\n      const charsToTake = Math.min(remainingData.length, maxLength);\n      const valueToWrite = remainingData.substring(0, charsToTake);\n\n      entityValues[currentEntityId] = valueToWrite;\n      remainingData = remainingData.substring(charsToTake);\n\n\n      // Wenn noch Daten brig sind, wechsle zur nchsten Entity\n      if (remainingData.length > 0) {\n        currentEntityIndex++;\n      }\n    }\n\n    // Wenn am Ende noch Text ber ist, prfe ob zwischenzeitlich eine zustzliche Entitt angelegt wurde\n    if (remainingData.length > 0) {\n\n      // Prfe ob neue Entities hinzugekommen sind\n      const currentAdditionalEntities = this.findAdditionalEntities(this._config.entity);\n      const knownAdditionalCount = this._knownEntityIds ? this._knownEntityIds.length - 1 : 0; // -1 fr Haupt-Entity\n\n      if (currentAdditionalEntities.length > knownAdditionalCount) {\n        // Neue Entities gefunden\n        const newEntities = currentAdditionalEntities.slice(knownAdditionalCount);\n\n        // Aktualisiere die Liste\n        allEntityIds.push(...newEntities);\n        this._knownEntityIds = [...allEntityIds];\n\n        // Ermittle max-Lngen fr neue Entities\n        for (const newEntityId of newEntities) {\n          const maxLength = this.getEntityMaxLength(newEntityId);\n          if (maxLength !== null) {\n            maxLengths[newEntityId] = maxLength;\n          } else {\n            maxLengths[newEntityId] = 255;\n          }\n        }\n\n        // Verteile die verbleibenden Daten auf die neuen Entities\n        currentEntityIndex = allEntityIds.length - newEntities.length;\n        while (remainingData.length > 0 && currentEntityIndex < allEntityIds.length) {\n          const currentEntityId = allEntityIds[currentEntityIndex];\n          const maxLength = maxLengths[currentEntityId];\n\n          const charsToTake = Math.min(remainingData.length, maxLength);\n          const valueToWrite = remainingData.substring(0, charsToTake);\n\n          entityValues[currentEntityId] = valueToWrite;\n          remainingData = remainingData.substring(charsToTake);\n\n\n          if (remainingData.length > 0) {\n            currentEntityIndex++;\n          }\n        }\n      } else {\n      }\n    }\n\n    // Schreibe die Werte in die Entities (sequenziell, um sicherzustellen, dass alle Calls abgeschlossen sind)\n    for (const entityId of allEntityIds) {\n      const value = entityValues[entityId] || '';\n      const maxLength = maxLengths[entityId];\n\n      // Der Wert sollte nie die maximale Lnge berschreiten, da wir zeichenweise verteilen\n      if (value.length > maxLength) {\n        // Krze den Wert auf die maximale Lnge (als Notfall-Lsung)\n        const truncatedValue = value.substring(0, maxLength);\n        try {\n          await this._hass.callService('input_text', 'set_value', {\n            entity_id: entityId,\n            value: truncatedValue,\n          });\n        } catch (error) {\n        }\n      } else {\n        try {\n          await this._hass.callService('input_text', 'set_value', {\n            entity_id: entityId,\n            value: value,\n          });\n        } catch (error) {\n        }\n      }\n    }\n\n    // Leere alle zustzlichen Entities, die nicht verwendet wurden (um alte Daten zu entfernen)\n    // Wir mssen alle bekannten zustzlichen Entities prfen, nicht nur die in allEntityIds\n    const allAdditionalEntities = this.findAdditionalEntities(this._config.entity);\n    for (const additionalEntityId of allAdditionalEntities) {\n      // Wenn diese Entity nicht in entityValues ist, bedeutet das, dass sie nicht verwendet wurde\n      if (!(additionalEntityId in entityValues)) {\n        try {\n          await this._hass.callService('input_text', 'set_value', {\n            entity_id: additionalEntityId,\n            value: '',\n          });\n        } catch (error) {\n        }\n      }\n    }\n\n      // Wenn noch Daten brig sind, die nicht gespeichert werden konnten\n      if (remainingData.length > 0) {\n      }\n    } catch (error) {\n    } finally {\n      // Schreib-Lock fr weitere 5 Sekunden aufrechterhalten (um sicherzustellen, dass alle Updates verarbeitet wurden)\n      this._writeLockTimer = setTimeout(() => {\n        this._isWriting = false;\n        this._writeLockTimer = null;\n      }, 5000);\n    }\n  }\n\n  async toggleDay(month, day, year = null) {\n\n    // Stelle sicher, dass month und day Zahlen sind\n    const monthNum = parseInt(month);\n    const dayNum = parseInt(day);\n\n    if (isNaN(monthNum) || isNaN(dayNum)) {\n      return;\n    }\n\n    // Prfe ob dieser Monat der Vormonat ist (schreibgeschtzt)\n    const now = new Date();\n    const currentMonth = now.getMonth() + 1; // 1-12\n    const currentYearFull = now.getFullYear();\n    const currentYear = currentYearFull % 100;\n\n    // Bestimme das Jahr (Kurzform, z.B. 25 fr 2025)\n    if (!year) {\n      year = currentYear;\n    }\n    const yearNum = parseInt(year);\n\n    let isPreviousMonth = false;\n    if (currentMonth === 1) {\n      // Aktuell ist Januar, Vormonat ist Dezember des Vorjahres\n      isPreviousMonth = (monthNum === 12 && yearNum === (currentYearFull - 1) % 100);\n    } else {\n      // Vormonat ist aktueller Monat - 1 im gleichen Jahr\n      isPreviousMonth = (monthNum === currentMonth - 1 && yearNum === currentYear);\n    }\n\n    if (isPreviousMonth) {\n      return;\n    }\n\n    if (!this._hass || !this._config || !this._config.entity) {\n      return;\n    }\n\n    // yearNum wurde bereits oben deklariert\n    const key = `${this.formatTwoDigits(yearNum)}:${this.formatTwoDigits(monthNum)}`;\n\n    // Stelle sicher, dass die Struktur ein Objekt ist (nicht Array)\n    if (!this._workingDays[key] || Array.isArray(this._workingDays[key])) {\n      this._workingDays[key] = {};\n    }\n\n    // Hole das ausgewhlte Kalender-Shortcut\n    const selectedCalendarShortcut = this._getSelectedCalendarShortcut();\n\n    if (!selectedCalendarShortcut) {\n      // Kein Kalender ausgewhlt - kann nicht togglen\n      return;\n    }\n\n    // Tag mit Kalender\n      if (!this._workingDays[key][dayNum]) {\n        this._workingDays[key][dayNum] = [];\n      }\n\n      // WICHTIG: Erstelle eine Kopie des Arrays, um sicherzustellen, dass wir mit dem richtigen Array arbeiten\n      const elements = [...(this._workingDays[key][dayNum] || [])];\n\n      const elementIndex = elements.indexOf(selectedCalendarShortcut);\n\n      if (elementIndex > -1) {\n        // Kalender entfernen\n        elements.splice(elementIndex, 1);\n        // Wenn keine Kalender mehr vorhanden sind, entferne den Tag\n        if (elements.length === 0) {\n          delete this._workingDays[key][dayNum];\n          // Wenn keine Tage mehr vorhanden sind, entferne den Monat\n          if (Object.keys(this._workingDays[key]).length === 0) {\n            delete this._workingDays[key];\n          }\n        } else {\n          // Aktualisiere das Array im _workingDays\n          this._workingDays[key][dayNum] = elements;\n        }\n      } else {\n        // Kalender hinzufgen (nur wenn noch nicht vorhanden)\n        if (!elements.includes(selectedCalendarShortcut)) {\n          elements.push(selectedCalendarShortcut);\n          // Aktualisiere das Array im _workingDays\n          this._workingDays[key][dayNum] = elements;\n        }\n      }\n\n    // OPTIMIERUNG: Direkte DOM-Manipulation statt komplettes Re-Rendering\n    this._updateDayButtonDirectly(monthNum, dayNum, yearNum, key, elements);\n\n    // OPTIMIERUNG: Debounced Speichern - warte nach dem letzten Klick, bevor gespeichert wird\n    this._scheduleDebouncedSave();\n  }\n\n  // Plant ein debounced Speichern der Daten\n  _scheduleDebouncedSave() {\n    // Lese Debounce-Zeit aus der Config (Standard: 300ms)\n    const debounceTime = this._getSaveDebounceTime();\n\n    // Wenn Debounce-Zeit 0 ist, speichere sofort\n    if (debounceTime === 0) {\n      this._saveToHA();\n      return;\n    }\n\n    // Lsche vorhandenen Timer\n    if (this._saveDebounceTimer) {\n      clearTimeout(this._saveDebounceTimer);\n      this._saveDebounceTimer = null;\n    }\n\n    // Setze neuen Timer\n    this._saveDebounceTimer = setTimeout(() => {\n      this._saveDebounceTimer = null;\n      this._saveToHA();\n    }, debounceTime);\n  }\n\n  // Speichert die Daten asynchron in Home Assistant\n  async _saveToHA() {\n    try {\n      const serializedData = this.serializeWorkingDays();\n\n      // Verteile die Daten auf mehrere Entities, falls ntig\n      await this.distributeDataToEntities(serializedData);\n\n      // Prfe Speicherverbrauch nach dem Toggle\n      // Verwende die Lnge der serialisierten Daten, da die States noch nicht aktualisiert sind\n      this.checkStorageUsage(serializedData.length);\n    } catch (error) {\n      console.error('[TG Schichtplan] Fehler beim Speichern:', error);\n      // Optional: Hier knnte man eine Fehlermeldung anzeigen\n    }\n  }\n\n  // Liest die Debounce-Zeit aus der Config\n  _getSaveDebounceTime() {\n    // Versuche aus Config zu lesen\n    if (this._config && typeof this._config.saveDebounceTime === 'number') {\n      return Math.max(0, this._config.saveDebounceTime); // Mindestens 0\n    }\n\n    // Fallback: Verwende Standard-Wert aus card-config.js\n    return SaveDebounceTime || 300; // Standard: 300ms\n  }\n\n  // Aktualisiert einen einzelnen Button direkt im DOM ohne komplettes Re-Rendering\n  _updateDayButtonDirectly(monthNum, dayNum, yearNum, key, dayElements) {\n    if (!this.shadowRoot) {\n      // Shadow DOM noch nicht bereit, Fallback zu requestUpdate\n      this.requestUpdate();\n      return;\n    }\n\n    // Finde den Button im DOM\n    const button = this.shadowRoot.querySelector(\n      `button[data-month=\"${monthNum}\"][data-day=\"${dayNum}\"][data-year=\"${yearNum}\"]`\n    );\n\n    if (!button) {\n      // Button nicht gefunden, Fallback zu requestUpdate\n      this.requestUpdate();\n      return;\n    }\n\n    // Berechne die neuen Werte fr diesen Button\n    const selectedShortcut = this._getSelectedCalendarShortcut();\n    const hasSelectedShift = selectedShortcut && dayElements.includes(selectedShortcut);\n    const selectedCalendar = this._getCalendarByShortcut(selectedShortcut);\n\n    // Finde die erste aktivierte Schicht\n    let firstActiveShift = null;\n    const shiftOrder = ['a', 'b', 'c', 'd', 'e'];\n    for (const shortcut of shiftOrder) {\n      if (dayElements.includes(shortcut)) {\n        const calendar = this._getCalendarByShortcut(shortcut);\n        if (calendar && calendar.enabled) {\n          firstActiveShift = shortcut;\n          break;\n        }\n      }\n    }\n\n    // Bestimme welche Schicht den Tag frben soll\n    let activeShiftForColor = null;\n    if (hasSelectedShift && selectedCalendar && selectedCalendar.enabled) {\n      activeShiftForColor = selectedShortcut;\n    } else if (firstActiveShift) {\n      activeShiftForColor = firstActiveShift;\n    }\n\n    const isWorking = activeShiftForColor !== null;\n\n    // Aktualisiere CSS-Klasse\n    if (isWorking) {\n      button.classList.add('working');\n    } else {\n      button.classList.remove('working');\n    }\n\n    // Aktualisiere Hintergrundfarbe\n    if (activeShiftForColor) {\n      const activeCalendar = this._getCalendarByShortcut(activeShiftForColor);\n      if (activeCalendar && activeCalendar.color) {\n        button.style.backgroundColor = activeCalendar.color;\n      } else {\n        button.style.backgroundColor = '';\n      }\n    } else {\n      button.style.backgroundColor = '';\n    }\n\n    // Aktualisiere Shift-Indikatoren\n    const shiftsContainer = button.querySelector('.shifts-container');\n    const existingIndicators = shiftsContainer ? Array.from(shiftsContainer.querySelectorAll('.shift-indicator')) : [];\n\n    // Entferne alte Indikatoren\n    if (shiftsContainer) {\n      shiftsContainer.innerHTML = '';\n    }\n\n    // Erstelle neue Indikatoren fr alle Schichten auer der, die den Tag frbt\n    const shiftIndicators = dayElements\n      .filter(shortcut => shortcut !== activeShiftForColor)\n      .map(shortcut => {\n        const calendar = this._getCalendarByShortcut(shortcut);\n        if (calendar && calendar.enabled && calendar.color) {\n          const indicator = document.createElement('span');\n          indicator.className = 'shift-indicator';\n          indicator.style.backgroundColor = calendar.color;\n          indicator.title = calendar.name || `Schicht ${shortcut.toUpperCase()}`;\n          return indicator;\n        }\n        return null;\n      })\n      .filter(indicator => indicator !== null);\n\n    // Fge Indikatoren hinzu\n    if (shiftIndicators.length > 0) {\n      if (!shiftsContainer) {\n        const container = document.createElement('div');\n        container.className = 'shifts-container';\n        button.appendChild(container);\n        shiftIndicators.forEach(ind => container.appendChild(ind));\n      } else {\n        shiftIndicators.forEach(ind => shiftsContainer.appendChild(ind));\n      }\n    } else if (shiftsContainer) {\n      // Entferne Container wenn keine Indikatoren mehr vorhanden\n      shiftsContainer.remove();\n    }\n  }\n\n  getDaysInMonth(year, month) {\n    return new Date(year, month + 1, 0).getDate();\n  }\n\n  getFirstDayOfMonth(year, month) {\n    return new Date(year, month, 1).getDay();\n  }\n\n  getWeekNumber(date) {\n    const d = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()));\n    const dayNum = d.getUTCDay() || 7;\n    d.setUTCDate(d.getUTCDate() + 4 - dayNum);\n    const yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));\n    return Math.ceil((((d - yearStart) / 86400000) + 1) / 7);\n  }\n\n  getMonthName(month) {\n    const months = [\n      'Januar', 'Februar', 'Mrz', 'April', 'Mai', 'Juni',\n      'Juli', 'August', 'September', 'Oktober', 'November', 'Dezember'\n    ];\n    return months[month];\n  }\n\n  /**\n   * Rendert einen einzelnen Tag-Button fr den Kalender\n   * @param {number} currentDay - Der Tag (1-31)\n   * @param {number} monthKey - Der Monat (1-12)\n   * @param {number} yearKey - Das Jahr in Kurzform (z.B. 25 fr 2025)\n   * @param {string} key - Der Schlssel fr diesen Monat (z.B. \"25:11\")\n   * @param {number[]} workingDays - Array der Arbeitstage fr diesen Monat\n   * @param {boolean} isPreviousMonth - Ob dieser Monat der Vormonat ist (schreibgeschtzt)\n   * @param {number} year - Das vollstndige Jahr\n   * @param {number} month - Der Monat (0-11)\n   * @returns {TemplateResult} HTML-Template fr den Tag-Button\n   */\n  renderDay(currentDay, monthKey, yearKey, key, workingDays, isPreviousMonth, year, month) {\n    const now = new Date();\n    const today = now.getDate();\n    const currentMonth = now.getMonth();\n    const currentYear = now.getFullYear();\n\n    const dayElements = this._getDayElements(key, currentDay);\n    const isToday = (year === currentYear && month === currentMonth && currentDay === today);\n\n    // Prfe ob der ausgewhlte Kalender an diesem Tag aktiv ist\n    const selectedShortcut = this._getSelectedCalendarShortcut();\n    const hasSelectedShift = selectedShortcut && dayElements.includes(selectedShortcut);\n    const selectedCalendar = this._getCalendarByShortcut(selectedShortcut);\n    let buttonStyle = '';\n\n    // Finde die erste aktivierte Schicht (in der Reihenfolge a, b, c, d, e)\n    // die an diesem Tag aktiv ist\n    let firstActiveShift = null;\n    const shiftOrder = ['a', 'b', 'c', 'd', 'e'];\n    for (const shortcut of shiftOrder) {\n      if (dayElements.includes(shortcut)) {\n        const calendar = this._getCalendarByShortcut(shortcut);\n        if (calendar && calendar.enabled) {\n          firstActiveShift = shortcut;\n          break;\n        }\n      }\n    }\n\n    // Bestimme welche Schicht den Tag frben soll\n    let activeShiftForColor = null;\n    if (hasSelectedShift && selectedCalendar && selectedCalendar.enabled) {\n      // Wenn der ausgewhlte Kalender aktiv ist, verwende diesen\n      activeShiftForColor = selectedShortcut;\n    } else if (firstActiveShift) {\n      // Ansonsten verwende die erste aktivierte Schicht\n      activeShiftForColor = firstActiveShift;\n    }\n\n    // isWorking ist true, wenn eine Schicht den Tag frbt\n    const isWorking = activeShiftForColor !== null;\n\n    // Verwende die Farbe der aktiven Schicht\n    if (activeShiftForColor) {\n      const activeCalendar = this._getCalendarByShortcut(activeShiftForColor);\n      if (activeCalendar && activeCalendar.color) {\n        buttonStyle = `background-color: ${activeCalendar.color};`;\n      }\n    }\n\n    // Prfe ob es ein Wochenende oder Feiertag ist\n    const isWeekend = this._isWeekend(year, month, currentDay);\n    const isHoliday = this._isHoliday(year, month, currentDay);\n\n        // Erstelle visuelle Darstellung der Kalender (alle auer der Schicht, die den Tag frbt)\n        // Nur aktivierte Kalender werden angezeigt\n        const shiftIndicators = dayElements\n          .filter(shortcut => shortcut !== activeShiftForColor) // Filtere die Schicht heraus, die den Tag frbt\n          .map(shortcut => {\n            const calendar = this._getCalendarByShortcut(shortcut);\n            // Nur anzeigen, wenn der Kalender aktiviert ist\n            if (calendar && calendar.enabled && calendar.color) {\n              return html`\n                <span\n                  class=\"shift-indicator\"\n                  style=\"background-color: ${calendar.color};\"\n                  title=\"${calendar.name || `Schicht ${shortcut.toUpperCase()}`}\">\n                </span>\n              `;\n            }\n            return null; // Nicht anzeigen, wenn Kalender deaktiviert ist\n          })\n          .filter(indicator => indicator !== null); // Entferne null-Werte\n\n    return html`\n      <td>\n        <button\n          class=\"day-button ${isWorking ? 'working' : ''} ${isToday ? 'today' : ''} ${isPreviousMonth ? 'readonly' : ''} ${isWeekend ? 'weekend' : ''} ${isHoliday ? 'holiday' : ''}\"\n          style=\"${buttonStyle}\"\n          @click=${(e) => {\n            if (!isPreviousMonth) {\n              this.toggleDay(monthKey, currentDay, yearKey);\n              // Entferne Fokus nach Klick (wichtig fr mobile Gerte)\n              // Setze Fokus explizit auf die Karte selbst\n              setTimeout(() => {\n                e.target.blur();\n                // Setze Fokus auf das Hauptcontainer-Element der Karte\n                if (this.shadowRoot) {\n                  const wrapper = this.shadowRoot.querySelector('.calendar-wrapper');\n                  if (wrapper) {\n                    // Stelle sicher, dass das Element fokussierbar ist\n                    if (!wrapper.hasAttribute('tabindex')) {\n                      wrapper.setAttribute('tabindex', '-1');\n                    }\n                    wrapper.focus();\n                  } else {\n                    // Fallback: Setze Fokus auf die Komponente selbst\n                    if (this.focus) {\n                      this.focus();\n                    }\n                  }\n                }\n              }, 0);\n            }\n          }}\n          ?disabled=${isPreviousMonth}\n          data-month=\"${monthKey}\"\n          data-day=\"${currentDay}\"\n          data-year=\"${yearKey}\">\n          <span class=\"day-number\">${currentDay}</span>\n          ${shiftIndicators.length > 0 ? html`<div class=\"shifts-container\">${shiftIndicators}</div>` : ''}\n        </button>\n      </td>\n    `;\n  }\n\n  renderMonth(year, month) {\n    const daysInMonth = this.getDaysInMonth(year, month);\n    const firstDay = this.getFirstDayOfMonth(year, month);\n    const firstDayMonday = (firstDay + 6) % 7;\n\n    const monthKey = month + 1;\n    const yearKey = year % 100; // Kurzform, z.B. 25 fr 2025\n    const key = `${this.formatTwoDigits(yearKey)}:${this.formatTwoDigits(monthKey)}`;\n\n    // Hole alle Tage fr diesen Monat (neue Struktur: {day: [elements]})\n    let workingDays = [];\n    if (this._workingDays[key]) {\n      if (Array.isArray(this._workingDays[key])) {\n        // Kompatibilitt: Altes Format [days]\n        workingDays = this._workingDays[key].map(d => parseInt(d)).filter(d => !isNaN(d));\n      } else if (typeof this._workingDays[key] === 'object') {\n        // Neue Struktur: {day: [elements]}\n        workingDays = Object.keys(this._workingDays[key])\n          .map(d => parseInt(d))\n          .filter(d => !isNaN(d));\n      }\n    }\n\n    const now = new Date();\n    const today = now.getDate();\n    const currentMonth = now.getMonth();\n    const currentYear = now.getFullYear();\n\n    // Prfe ob dieser Monat der Vormonat ist (schreibgeschtzt)\n    let isPreviousMonth = false;\n    if (currentMonth === 0) {\n      // Aktuell ist Januar, Vormonat ist Dezember des Vorjahres\n      isPreviousMonth = (month === 11 && year === currentYear - 1);\n    } else {\n      // Vormonat ist aktueller Monat - 1 im gleichen Jahr\n      isPreviousMonth = (month === currentMonth - 1 && year === currentYear);\n    }\n\n    const rows = [];\n    let day = 1;\n\n    // Erste Woche\n    const firstDate = new Date(year, month, 1);\n    const weekNumber = this.getWeekNumber(firstDate);\n    const firstRowCells = [html`<td class=\"week-label\">${weekNumber}</td>`];\n\n    for (let i = 0; i < firstDayMonday; i++) {\n      firstRowCells.push(html`<td></td>`);\n    }\n\n      for (let i = firstDayMonday; i < 7 && day <= daysInMonth; i++) {\n        firstRowCells.push(this.renderDay(day, monthKey, yearKey, key, workingDays, isPreviousMonth, year, month));\n        day++;\n      }\n    rows.push(html`<tr>${firstRowCells}</tr>`);\n\n    // Weitere Wochen\n    while (day <= daysInMonth) {\n      const date = new Date(year, month, day);\n      const weekNum = this.getWeekNumber(date);\n      const rowCells = [html`<td class=\"week-label\">${weekNum}</td>`];\n\n      // Rendere immer 7 Zellen pro Woche (Tage oder leere Zellen)\n      for (let i = 0; i < 7; i++) {\n        if (day <= daysInMonth) {\n          rowCells.push(this.renderDay(day, monthKey, yearKey, key, workingDays, isPreviousMonth, year, month));\n          day++;\n        } else {\n          // Leere Zelle am Ende der letzten Woche\n          rowCells.push(html`<td></td>`);\n        }\n      }\n      rows.push(html`<tr>${rowCells}</tr>`);\n    }\n\n    return html`\n      <div class=\"month-container\">\n        <div class=\"month-header\">${this.getMonthName(month)} ${year}</div>\n        <table class=\"calendar-table\">\n          <thead>\n            <tr>\n              <th class=\"week-label\">KW</th>\n              <th>Mo</th>\n              <th>Di</th>\n              <th>Mi</th>\n              <th>Do</th>\n              <th>Fr</th>\n              <th>Sa</th>\n              <th>So</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${rows}\n          </tbody>\n        </table>\n      </div>\n    `;\n  }\n\n  changeDisplayedMonths(delta) {\n    const maxMonths = this._config?.numberOfMonths || 14;\n    const newValue = Math.max(1, Math.min(maxMonths, (this._displayedMonths || 2) + delta));\n    if (newValue !== this._displayedMonths) {\n      this._displayedMonths = newValue;\n      this.requestUpdate();\n    }\n  }\n\n  changeStartMonth(delta) {\n    const maxMonths = this._config?.numberOfMonths || 14;\n    const displayedMonths = this._displayedMonths || 2;\n    const currentOffset = this._startMonthOffset || 0;\n\n    // Berechne die Grenzen fr die Navigation\n    // Minimum: -1 (Vormonat)\n    // Maximum: maxMonths - displayedMonths (damit der letzte angezeigte Monat nicht ber maxMonths hinausgeht)\n    const minOffset = -1;\n    const maxOffset = maxMonths - displayedMonths;\n\n    const newOffset = Math.max(minOffset, Math.min(maxOffset, currentOffset + delta));\n\n    if (newOffset !== currentOffset) {\n      this._startMonthOffset = newOffset;\n      this.requestUpdate();\n    }\n  }\n\n  getNavigationBounds() {\n    const maxMonths = this._config?.numberOfMonths || 14;\n    const displayedMonths = this._displayedMonths || 2;\n    const currentOffset = this._startMonthOffset || 0;\n\n    const minOffset = -1;\n    const maxOffset = maxMonths - displayedMonths;\n\n    return {\n      canGoBack: currentOffset > minOffset,\n      canGoForward: currentOffset < maxOffset\n    };\n  }\n\n  _getSelectedCalendarShortcut() {\n    // Gibt den Shortcut des ausgewhlten Kalenders zurck\n\n    // Prfe zuerst _selectedCalendar\n    if (this._selectedCalendar !== null && this._selectedCalendar !== undefined && this._selectedCalendar !== '') {\n      return this._selectedCalendar;\n    }\n\n    // Falls _selectedCalendar nicht gesetzt ist, prfe die Config\n    if (this._config?.selectedCalendar) {\n      this._selectedCalendar = this._config.selectedCalendar;\n      return this._selectedCalendar;\n    }\n\n    // Fallback: Verwende den ersten aktivierten Kalender\n    const allCalendars = this._getAllCalendars();\n    if (allCalendars.length > 0) {\n      return allCalendars[0].shortcut;\n    }\n    // Wenn kein Kalender aktiviert ist, gibt es keinen Fallback\n    return null;\n  }\n\n  _getCalendarByShortcut(shortcut) {\n    // Gibt das Kalender-Objekt fr einen gegebenen Shortcut zurck\n    if (!this._config?.calendars) {\n      return null;\n    }\n\n    return this._config.calendars.find(cal => cal.shortcut === shortcut) || null;\n  }\n\n  _getAllCalendars() {\n    // Gibt nur aktivierte Kalender zurck\n    if (!this._config?.calendars) {\n      return [];\n    }\n\n    // Filtere nur aktivierte Kalender und sortiere nach Shortcut (a, b, c, d, e)\n    return this._config.calendars\n      .filter(cal => cal && cal.shortcut && (cal.enabled === true || cal.enabled === 'true' || cal.enabled === 1))\n      .sort((a, b) => a.shortcut.localeCompare(b.shortcut));\n  }\n\n  _getSelectedCalendarValue() {\n    const allCalendars = this._getAllCalendars();\n\n    if (allCalendars.length === 0) {\n      // Wenn keine Kalender aktiviert sind, gibt es keinen ausgewhlten Kalender\n      if (this._selectedCalendar !== null) {\n        this._selectedCalendar = null;\n        if (this._config) {\n          this._config.selectedCalendar = null;\n        }\n        this.requestUpdate();\n      }\n      return null;\n    }\n\n    // Wenn _selectedCalendar noch nicht gesetzt ist, setze es auf den ersten aktivierten Kalender\n    if (this._selectedCalendar === null || this._selectedCalendar === undefined) {\n      this._selectedCalendar = allCalendars[0].shortcut;\n      // Speichere es auch in der Config\n      if (this._config) {\n        this._config.selectedCalendar = this._selectedCalendar;\n      }\n      // Aktualisiere die Ansicht\n      this.requestUpdate();\n      return this._selectedCalendar;\n    }\n\n    // Prfe ob der ausgewhlte Kalender aktiviert ist\n    const exists = allCalendars.some(cal => cal.shortcut === this._selectedCalendar);\n    if (!exists) {\n      // Wenn der ausgewhlte Kalender nicht aktiviert ist, verwende den ersten aktivierten\n      this._selectedCalendar = allCalendars[0].shortcut;\n      if (this._config) {\n        this._config.selectedCalendar = this._selectedCalendar;\n      }\n      this.requestUpdate();\n      return this._selectedCalendar;\n    }\n\n    return this._selectedCalendar;\n  }\n\n  _onCalendarSelectedByIndex(shortcut) {\n    if (shortcut !== '' && shortcut !== null && shortcut !== undefined) {\n      const previousCalendar = this._selectedCalendar;\n      this._selectedCalendar = shortcut;\n\n      // Aktualisiere die Config mit der neuen Auswahl\n      if (this._config) {\n        this._config = {\n          ...this._config,\n          selectedCalendar: shortcut,\n        };\n\n        // Dispatch config-changed Event, damit die Card die Config aktualisiert\n        this.dispatchEvent(\n          new CustomEvent('config-changed', {\n            detail: { config: this._config },\n            bubbles: true,\n            composed: true,\n          })\n        );\n        // Speichere die Config in die Entity\n        this.saveConfigToEntity();\n      }\n\n      // OPTIMIERUNG: Aktualisiere nur die betroffenen Buttons per DOM-Manipulation\n      if (this.shadowRoot && previousCalendar !== shortcut) {\n        this._updateAllDayButtonsForCalendarChange();\n      } else {\n        // Fallback: Komplettes Re-Rendering wenn Shadow DOM nicht bereit\n        this.requestUpdate();\n      }\n    }\n  }\n\n  // Aktualisiert alle Tag-Buttons nach Kalender-Auswahl (nur Farben/Klassen, kein komplettes Re-Rendering)\n  _updateAllDayButtonsForCalendarChange() {\n    if (!this.shadowRoot) return;\n\n    const buttons = this.shadowRoot.querySelectorAll('button.day-button');\n    const selectedShortcut = this._getSelectedCalendarShortcut();\n    const selectedCalendar = this._getCalendarByShortcut(selectedShortcut);\n\n    buttons.forEach(button => {\n      const monthKey = button.getAttribute('data-month');\n      const dayNum = parseInt(button.getAttribute('data-day'));\n      const yearKey = button.getAttribute('data-year');\n\n      if (!monthKey || !dayNum || !yearKey) return;\n\n      const key = `${yearKey}:${monthKey}`;\n      const dayElements = this._getDayElements(key, dayNum);\n      const hasSelectedShift = selectedShortcut && dayElements.includes(selectedShortcut);\n\n      // Finde die erste aktivierte Schicht\n      let firstActiveShift = null;\n      const shiftOrder = ['a', 'b', 'c', 'd', 'e'];\n      for (const shortcut of shiftOrder) {\n        if (dayElements.includes(shortcut)) {\n          const calendar = this._getCalendarByShortcut(shortcut);\n          if (calendar && calendar.enabled) {\n            firstActiveShift = shortcut;\n            break;\n          }\n        }\n      }\n\n      // Bestimme welche Schicht den Tag frben soll\n      let activeShiftForColor = null;\n      if (hasSelectedShift && selectedCalendar && selectedCalendar.enabled) {\n        activeShiftForColor = selectedShortcut;\n      } else if (firstActiveShift) {\n        activeShiftForColor = firstActiveShift;\n      }\n\n      const isWorking = activeShiftForColor !== null;\n\n      // Aktualisiere CSS-Klasse\n      if (isWorking) {\n        button.classList.add('working');\n      } else {\n        button.classList.remove('working');\n      }\n\n      // Aktualisiere Hintergrundfarbe\n      if (activeShiftForColor) {\n        const activeCalendar = this._getCalendarByShortcut(activeShiftForColor);\n        if (activeCalendar && activeCalendar.color) {\n          button.style.backgroundColor = activeCalendar.color;\n        } else {\n          button.style.backgroundColor = '';\n        }\n      } else {\n        button.style.backgroundColor = '';\n      }\n\n      // Aktualisiere Shift-Indikatoren (hnlich wie in _updateDayButtonDirectly)\n      const shiftsContainer = button.querySelector('.shifts-container');\n      if (shiftsContainer) {\n        shiftsContainer.innerHTML = '';\n      }\n\n      const shiftIndicators = dayElements\n        .filter(shortcut => shortcut !== activeShiftForColor)\n        .map(shortcut => {\n          const calendar = this._getCalendarByShortcut(shortcut);\n          if (calendar && calendar.enabled && calendar.color) {\n            const indicator = document.createElement('span');\n            indicator.className = 'shift-indicator';\n            indicator.style.backgroundColor = calendar.color;\n            indicator.title = calendar.name || `Schicht ${shortcut.toUpperCase()}`;\n            return indicator;\n          }\n          return null;\n        })\n        .filter(indicator => indicator !== null);\n\n      if (shiftIndicators.length > 0) {\n        if (!shiftsContainer) {\n          const container = document.createElement('div');\n          container.className = 'shifts-container';\n          button.appendChild(container);\n          shiftIndicators.forEach(ind => container.appendChild(ind));\n        } else {\n          shiftIndicators.forEach(ind => shiftsContainer.appendChild(ind));\n        }\n      } else if (shiftsContainer) {\n        shiftsContainer.remove();\n      }\n    });\n  }\n\n  _getDayElements(monthKey, day) {\n    // Gibt die Elemente fr einen bestimmten Tag zurck\n    if (!this._workingDays[monthKey] || typeof this._workingDays[monthKey] !== 'object') {\n      return [];\n    }\n\n    if (Array.isArray(this._workingDays[monthKey])) {\n      // Altes Format: Array von Tagen\n      return [];\n    }\n\n    return this._workingDays[monthKey][day] || [];\n  }\n\n  // Optimierung: Verhindere unntige Re-Renderings\n  shouldUpdate(changedProperties) {\n    // Prfe ob sich relevante Properties gendert haben\n    const relevantProps = ['hass', 'config', '_workingDays', '_displayedMonths', '_startMonthOffset', '_selectedCalendar', '_storageWarning', '_configWarning', '_statusWarning'];\n    return relevantProps.some(prop => changedProperties.has(prop));\n  }\n\n  render() {\n    if (!this._config || !this._config.entity) {\n      return html`<div class=\"error\">Keine Entity konfiguriert</div>`;\n    }\n\n    const maxMonths = this._config.numberOfMonths || 14;\n    const displayedMonths = this._displayedMonths || 2;\n    const startMonthOffset = this._startMonthOffset || 0;\n    const now = new Date();\n    const months = [];\n\n    for (let i = 0; i < displayedMonths; i++) {\n      const date = new Date(now.getFullYear(), now.getMonth() + startMonthOffset + i, 1);\n      const year = date.getFullYear();\n      const month = date.getMonth();\n      months.push({ year, month });\n    }\n\n    const isEditorMode = this._isInEditorMode();\n    // Speicherwarnung wird immer angezeigt (auch im normalen Modus)\n    const hasStorageWarning = this._storageWarning && this._storageWarning.show;\n    // Config-Warnung: \"missing\" nur im Editor, \"size\" immer (auch im normalen Modus)\n    const hasConfigWarning = this._configWarning && this._configWarning.show && (\n      this._configWarning.type === 'size' || // Speicherplatz-Warnung immer anzeigen\n      (this._configWarning.type === 'missing' && isEditorMode) // Fehlende Entity nur im Editor\n    );\n    // Status-Warnung wird nur im Editor-Modus angezeigt\n    const hasStatusWarning = this._statusWarning && this._statusWarning.show && isEditorMode;\n    const navBounds = this.getNavigationBounds();\n\n    return html`\n      <div class=\"calendar-wrapper ${hasStorageWarning ? 'storage-warning-active' : ''}\">\n        ${hasStorageWarning\n          ? html`\n              <div class=\"storage-warning\">\n                <div class=\"warning-icon\"></div>\n                <div class=\"warning-content\">\n                  <div class=\"warning-title\">Speicherplatz fast voll!</div>\n                  <div class=\"warning-message\">\n                    ${this._storageWarning.percentage}% der verfgbaren Speicherkapazitt verwendet\n                    (${this._storageWarning.currentLength} / ${this._storageWarning.maxLength} Zeichen).\n                  </div>\n                  <div class=\"warning-action\">\n                    Bitte legen Sie ein zustzliches Input-Text-Feld an (z.B. ${this._config.entity}_${String(this.findAdditionalEntities(this._config.entity).length + 1).padStart(3, '0')}).\n                  </div>\n                </div>\n              </div>\n            `\n          : ''}\n        ${hasConfigWarning && this._configWarning.type === 'size'\n          ? html`\n              <div class=\"storage-warning\">\n                <div class=\"warning-icon\"></div>\n                <div class=\"warning-content\">\n                  <div class=\"warning-title\">Konfigurations-Entity zu klein!</div>\n                  <div class=\"warning-message\">\n                    Die Konfiguration passt nicht in die Entity <code>${this._configWarning.configEntityId}</code>.\n                    ${this._configWarning.percentage}% der verfgbaren Speicherkapazitt bentigt\n                    (${this._configWarning.currentLength} / ${this._configWarning.maxLength} Zeichen).\n                  </div>\n                  <div class=\"warning-action\">\n                    Bitte erhhen Sie die maximale Lnge der Entity ber die UI:\n                    <ul>\n                      <li>Einstellungen  Automatisierungen &amp; Szenen  Hilfsmittel</li>\n                      <li>Entity <code>${this._configWarning.configEntityId.replace('input_text.', '')}</code> bearbeiten</li>\n                      <li>Maximale Lnge auf mindestens <code>${Math.ceil(this._configWarning.currentLength * 1.2)}</code> Zeichen erhhen</li>\n                    </ul>\n                  </div>\n                </div>\n              </div>\n            `\n          : ''}\n        ${hasConfigWarning && this._configWarning.type === 'missing'\n          ? this._renderMissingEntityWarning(\n              this._configWarning.configEntityId,\n              'Konfigurations-Entity',\n              255,\n              true\n            )\n          : ''}\n        ${hasStatusWarning\n          ? this._renderMissingEntityWarning(\n              this._statusWarning.statusEntityId,\n              'Status-Entity',\n              255,\n              false\n            )\n          : ''}\n        <div class=\"menu-bar\">\n          <button\n            class=\"menu-button navigation-button\"\n            @click=${() => this.changeStartMonth(-1)}\n            ?disabled=${!navBounds.canGoBack}\n            title=\"Vorheriger Monat\">\n            \n          </button>\n          <button\n            class=\"menu-button decrease-button\"\n            @click=${() => this.changeDisplayedMonths(-1)}\n            ?disabled=${displayedMonths <= 1}\n            title=\"Weniger Monate anzeigen\">\n            \n          </button>\n          <div class=\"menu-number\">${displayedMonths}</div>\n          <button\n            class=\"menu-button increase-button\"\n            @click=${() => this.changeDisplayedMonths(1)}\n            ?disabled=${displayedMonths >= maxMonths}\n            title=\"Mehr Monate anzeigen\">\n            +\n          </button>\n          <button\n            class=\"menu-button navigation-button\"\n            @click=${() => this.changeStartMonth(1)}\n            ?disabled=${!navBounds.canGoForward}\n            title=\"Nchster Monat\">\n            \n          </button>\n          ${(() => {\n              const allCalendars = this._getAllCalendars();\n              const selectedValue = this._getSelectedCalendarValue();\n              return html`\n                <div class=\"calendar-selector\">\n                  <ha-select\n                    .value=${selectedValue || 'a'}\n                    @selected=${(e) => {\n                      try {\n                        // Verhindere Event-Propagation zu Home Assistant's Card-Picker\n                        if (e) {\n                          if (typeof e.stopPropagation === 'function') {\n                            e.stopPropagation();\n                          }\n                          if (typeof e.stopImmediatePropagation === 'function') {\n                            e.stopImmediatePropagation();\n                          }\n                        }\n\n                        if (!e || !e.detail) {\n                          return;\n                        }\n\n                        const index = e.detail.index;\n                        if (index !== undefined && index !== null && index >= 0 && allCalendars && allCalendars[index]) {\n                          const selectedCalendar = allCalendars[index];\n                          if (selectedCalendar && selectedCalendar.shortcut) {\n                            if (typeof this._onCalendarSelectedByIndex === 'function') {\n                              this._onCalendarSelectedByIndex(selectedCalendar.shortcut);\n                            }\n                          }\n                        }\n                      } catch (error) {\n                        console.error('Error in calendar selection handler:', error);\n                      }\n                    }}\n                    naturalMenuWidth\n                    fixedMenuPosition\n                  >\n                    ${allCalendars.map(calendar => {\n                      const bgColor = calendar.color || '';\n                      const textColor = calendar.color ? this._getContrastColor(calendar.color) : '';\n                      return html`\n                        <mwc-list-item\n                          value=\"${calendar.shortcut}\"\n                          data-calendar-color=\"${bgColor}\"\n                          data-calendar-text-color=\"${textColor}\"\n                          style=\"${bgColor ? `--calendar-bg-color: ${bgColor}; --calendar-text-color: ${textColor};` : ''}\">\n                          ${calendar.name || `Schicht ${calendar.shortcut.toUpperCase()}`}\n                        </mwc-list-item>\n                      `;\n                    })}\n                  </ha-select>\n                </div>\n              `;\n            })()}\n        </div>\n        <div class=\"calendar-container\">\n          ${months.map(({ year, month }) => this.renderMonth(year, month))}\n        </div>\n      </div>\n    `;\n  }\n\n  static styles = [\n    super.styles || [],\n    css`\n      :host {\n        display: block;\n        --tgshiftschedule-default-selected-day-color: ${unsafeCSS(ShiftScheduleView.DEFAULT_SELECTED_DAY_COLOR)};\n      }\n\n      .calendar-wrapper {\n        display: block;\n        transition: border-color 0.3s ease;\n      }\n\n      .calendar-wrapper.storage-warning-active {\n        border: 3px solid var(--error-color, #f44336);\n        border-radius: 4px;\n        padding: 8px;\n        box-shadow: 0 0 10px rgba(244, 67, 54, 0.3);\n      }\n\n      .menu-bar {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        gap: 12px;\n        padding: 12px;\n        margin-bottom: 16px;\n        background-color: var(--card-background-color, #ffffff);\n        border-radius: 4px;\n        border: 1px solid var(--divider-color, #e0e0e0);\n      }\n\n      .menu-button {\n        width: 32px;\n        height: 32px;\n        border-radius: 4px;\n        border: 1px solid var(--divider-color, #e0e0e0);\n        background-color: var(--primary-color, #03a9f4);\n        color: var(--text-primary-color, #ffffff);\n        font-size: 20px;\n        font-weight: bold;\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        transition: background-color 0.2s ease, opacity 0.2s ease;\n      }\n\n      .menu-button.navigation-button {\n        background-color: var(--secondary-color, #757575);\n      }\n\n      .menu-button.navigation-button:hover:not(:disabled) {\n        background-color: var(--secondary-color-dark, #616161);\n      }\n\n      .menu-button:hover:not(:disabled) {\n        background-color: var(--primary-color-dark, #0288d1);\n      }\n\n      .menu-button:disabled {\n        opacity: 0.5;\n        cursor: not-allowed;\n      }\n\n      .menu-number {\n        font-size: 18px;\n        font-weight: bold;\n        min-width: 40px;\n        text-align: center;\n        color: var(--primary-text-color, #212121);\n      }\n\n      .element-selector {\n        margin-left: 20px;\n        min-width: 200px;\n      }\n\n      .calendar-selector ha-select {\n        width: 100%;\n      }\n\n      /* Stelle sicher, dass alle Items die Schichtfarbe als Hintergrund haben */\n      .calendar-selector mwc-list-item[data-calendar-color] {\n        background-color: var(--calendar-bg-color) !important;\n        color: var(--calendar-text-color) !important;\n      }\n\n      /* Stelle sicher, dass auch das ausgewhlte/aktivierte Item die Schichtfarbe behlt */\n      .calendar-selector mwc-list-item[data-calendar-color][selected],\n      .calendar-selector mwc-list-item[data-calendar-color][activated],\n      .calendar-selector mwc-list-item[data-calendar-color].selected,\n      .calendar-selector mwc-list-item[data-calendar-color].activated {\n        background-color: var(--calendar-bg-color) !important;\n        color: var(--calendar-text-color) !important;\n        --mdc-list-item-selected-background-color: var(--calendar-bg-color) !important;\n        --mdc-list-item-activated-background-color: var(--calendar-bg-color) !important;\n      }\n\n      /* berschreibe die Standard-Hintergrundfarbe fr ausgewhlte Items (::before Pseudo-Element) */\n      .calendar-selector mwc-list-item[data-calendar-color][selected]::before,\n      .calendar-selector mwc-list-item[data-calendar-color][activated]::before,\n      .calendar-selector mwc-list-item[data-calendar-color].selected::before,\n      .calendar-selector mwc-list-item[data-calendar-color].activated::before {\n        background-color: var(--calendar-bg-color) !important;\n        opacity: 1 !important;\n      }\n\n      /* berschreibe auch fr den Hover-State */\n      .calendar-selector mwc-list-item[data-calendar-color]:hover {\n        background-color: var(--calendar-bg-color) !important;\n        opacity: 0.9 !important;\n      }\n\n      .calendar-container {\n        display: flex;\n        flex-direction: column;\n        gap: 24px;\n      }\n\n      .month-container {\n        display: flex;\n        flex-direction: column;\n      }\n\n      .month-header {\n        font-size: 18px;\n        font-weight: bold;\n        margin-bottom: 12px;\n        text-align: center;\n      }\n\n      .calendar-table {\n        width: 100%;\n        border-collapse: collapse;\n        table-layout: fixed;\n      }\n\n      .calendar-table th {\n        padding: 8px 4px;\n        text-align: center;\n        font-weight: bold;\n        font-size: 12px;\n        border-bottom: 2px solid var(--divider-color, #e0e0e0);\n      }\n\n      .calendar-table td {\n        padding: 4px;\n        text-align: center;\n        vertical-align: middle;\n      }\n\n      .day-button {\n        width: 100%;\n        min-width: 32px;\n        min-height: 32px;\n        padding: 2px;\n        border: 1px solid var(--divider-color, #e0e0e0);\n        border-radius: 4px;\n        background-color: var(--card-background-color, #ffffff);\n        color: var(--primary-text-color, #000000);\n        cursor: pointer;\n        transition: all 0.2s;\n        font-size: 12px;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        gap: 2px;\n      }\n\n      .day-number {\n        font-size: 12px;\n        font-weight: bold;\n        line-height: 1;\n      }\n\n      .shifts-container {\n        display: flex;\n        flex-wrap: wrap;\n        gap: 2px;\n        justify-content: center;\n        align-items: center;\n        max-width: 100%;\n      }\n\n      .shift-indicator {\n        display: inline-block;\n        width: 8px;\n        height: 8px;\n        border-radius: 50%;\n        border: 1px solid rgba(0, 0, 0, 0.2);\n        flex-shrink: 0;\n      }\n\n      .day-button:hover:not(.working) {\n        background-color: var(--primary-color, #03a9f4);\n        color: var(--text-primary-color, #ffffff);\n      }\n\n      .day-button.working:hover {\n        /* Behalte die Hintergrundfarbe bei, aber mache sie etwas dunkler */\n        opacity: 0.9;\n        filter: brightness(0.9);\n      }\n\n      /* Verhindere visuelle Markierung nach Klick auf mobilen Gerten */\n      .day-button:active,\n      .day-button:focus {\n        outline: none !important;\n        box-shadow: none !important;\n      }\n\n      /* Touch-spezifische Behandlung: Verhindere aktiven State nach Touch */\n      .day-button {\n        -webkit-tap-highlight-color: transparent;\n        -webkit-touch-callout: none;\n        touch-action: manipulation;\n      }\n\n      .day-button.working {\n        /* background-color wird jetzt dynamisch per style gesetzt, wenn eine Schicht ausgewhlt ist */\n        color: var(--text-primary-color, #ffffff);\n        font-weight: bold;\n      }\n\n      /* Fallback: Wenn keine Schicht ausgewhlt ist, verwende die Standardfarbe */\n      .day-button.working:not([style*=\"background-color\"]) {\n        background-color: var(--accent-color, var(--tgshiftschedule-default-selected-day-color));\n      }\n\n      /* Basis: Heute-Markierung mit Outline (wird auerhalb des Borders gerendert) */\n      .day-button.today {\n        outline: 3px solid var(--primary-color, #03a9f4);\n        outline-offset: 2px;\n      }\n\n      .day-button.weekend {\n        border: 4px solid var(--secondary-color, #757575);\n      }\n\n      /* Feiertage haben Vorrang vor Wochenenden */\n      .day-button.holiday {\n        border: 4px solid var(--error-color, #f44336);\n      }\n\n      /* Wenn sowohl Wochenende als auch Feiertag, verwende Feiertagsfarbe (strkere Umrandung) */\n      .day-button.weekend.holiday {\n        border: 5px solid var(--error-color, #f44336);\n      }\n\n      /* Heute + Wochenende: Border fr Wochenende, Outline fr heute */\n      .day-button.today.weekend {\n        border: 4px solid var(--secondary-color, #757575);\n        outline: 3px solid var(--primary-color, #03a9f4);\n        outline-offset: 2px;\n      }\n\n      /* Heute + Feiertag: Border fr Feiertag, Outline fr heute */\n      .day-button.today.holiday {\n        border: 4px solid var(--error-color, #f44336);\n        outline: 3px solid var(--primary-color, #03a9f4);\n        outline-offset: 2px;\n      }\n\n      /* Heute + Wochenende + Feiertag: Border fr Feiertag (strker), Outline fr heute */\n      .day-button.today.weekend.holiday {\n        border: 5px solid var(--error-color, #f44336);\n        outline: 3px solid var(--primary-color, #03a9f4);\n        outline-offset: 2px;\n      }\n\n      .day-button.readonly,\n      .day-button:disabled {\n        opacity: 0.5;\n        cursor: not-allowed;\n        background-color: var(--disabled-color, #f5f5f5);\n        color: var(--secondary-text-color, #888888);\n      }\n\n      .day-button.readonly:hover,\n      .day-button:disabled:hover {\n        background-color: var(--disabled-color, #f5f5f5);\n        color: var(--secondary-text-color, #888888);\n      }\n\n      .day-number {\n        font-size: 12px;\n        font-weight: bold;\n        line-height: 1;\n      }\n\n      .shifts-container {\n        display: flex;\n        flex-wrap: wrap;\n        gap: 2px;\n        justify-content: center;\n        align-items: center;\n        max-width: 100%;\n      }\n\n      .shift-indicator {\n        display: inline-block;\n        width: 8px;\n        height: 8px;\n        border-radius: 50%;\n        border: 1px solid rgba(0, 0, 0, 0.2);\n        flex-shrink: 0;\n      }\n\n      .day-button.working .day-number {\n        color: var(--text-primary-color, #ffffff);\n      }\n\n      .week-label {\n        font-size: 11px;\n        color: var(--secondary-text-color, #888888);\n        padding-right: 8px;\n        text-align: right;\n        width: 40px;\n      }\n\n      .error {\n        text-align: center;\n        padding: 20px;\n        color: var(--error-color);\n      }\n\n      .storage-warning {\n        display: flex;\n        align-items: flex-start;\n        gap: 12px;\n        padding: 16px;\n        margin-bottom: 16px;\n        background-color: var(--warning-color, var(--tgshiftschedule-default-selected-day-color));\n        color: var(--text-primary-color, #ffffff);\n        border-radius: 4px;\n        border-left: 4px solid var(--error-color, #f44336);\n      }\n\n      .warning-icon {\n        font-size: 24px;\n        flex-shrink: 0;\n      }\n\n      .warning-content {\n        flex: 1;\n      }\n\n      .warning-title {\n        font-weight: bold;\n        font-size: 16px;\n        margin-bottom: 8px;\n      }\n\n      .warning-message {\n        font-size: 14px;\n        margin-bottom: 8px;\n        line-height: 1.5;\n      }\n\n      .warning-action {\n        font-size: 14px;\n        font-weight: 500;\n        margin-top: 8px;\n        padding-top: 8px;\n        border-top: 1px solid rgba(255, 255, 255, 0.3);\n      }\n\n      .warning-action ul {\n        margin: 8px 0 0 0;\n        padding-left: 20px;\n        list-style-type: disc;\n      }\n\n      .warning-action li {\n        margin: 4px 0;\n        line-height: 1.5;\n      }\n\n      .warning-action code {\n        background-color: rgba(0, 0, 0, 0.2);\n        padding: 2px 6px;\n        border-radius: 3px;\n        font-family: 'Courier New', monospace;\n        font-size: 13px;\n      }\n    `,\n  ];\n}\n\n// Registriere ShiftScheduleView als Custom Element\nif (!customElements.get('shiftschedule-view')) {\n  customElements.define('shiftschedule-view', ShiftScheduleView);\n}\n\n","import { html, css } from 'lit';\nimport { CardBase } from './card-base.js';\nimport './views/shiftschedule-view/shiftschedule-view.js'; // Import fr Custom Element Registrierung\nimport { CardName, CardRegname } from './card-config.js';\n\nexport class CardImpl extends CardBase {\n  static className = 'CardImpl';\n  static get properties() {\n    return {\n      ...super.properties,\n      config: { type: Object },\n      hass: { type: Object },\n      lovelace: { type: Object },\n      _view: { type: Object },\n      _viewType: { type: String },\n    };\n  }\n\n  static getConfigElement() {\n    return document.createElement(`${CardRegname}-editor`);\n  }\n\n  static getStubConfig() {\n    return {\n      entity: '',\n      numberOfMonths: 14,\n      initialDisplayedMonths: 2,\n      useElements: false,\n      selectedElement: null,\n      elements: [\n        { benennung: 'Element 1', aktiv: true, color: '#ff0000', shortcut: '1' },\n        { benennung: 'Element 2', aktiv: true, color: '#00ff00', shortcut: '2' },\n        { benennung: 'Element 3', aktiv: true, color: '#0000ff', shortcut: '3' },\n        { benennung: 'Element 4', aktiv: true, color: '#ffff00', shortcut: '4' },\n      ],\n    };\n  }\n\n  constructor() {\n    super();\n    this._debug(`CardImpl-Modul wird geladen`);\n    this.config = this.getDefaultConfig();\n    this._debug('CardImpl-Konstruktor: Initialisierung abgeschlossen');\n  }\n\n\n  getDefaultConfig() {\n    this._debug(`CardImpl getDefaultConfig wird aufgerufen`);\n    return {\n      entity: '',\n      numberOfMonths: 14,\n      initialDisplayedMonths: 2,\n      selectedCalendar: 'a', // Erster aktivierter Kalender\n      calendars: [\n        { shortcut: 'a', name: 'Kalender A', color: '#ff9800', enabled: true, statusRelevant: true },\n        { shortcut: 'b', name: 'Kalender B', color: '#ff0000', enabled: false, statusRelevant: true },\n        { shortcut: 'c', name: 'Kalender C', color: '#00ff00', enabled: false, statusRelevant: true },\n        { shortcut: 'd', name: 'Kalender D', color: '#0000ff', enabled: false, statusRelevant: true },\n        { shortcut: 'e', name: 'Kalender E', color: '#ffff00', enabled: false, statusRelevant: true },\n      ],\n    };\n  }\n\n  setConfig(config) {\n    this._debug('setConfig wird aufgerufen mit:', config);\n    if (!config) {\n      throw new Error('Keine Konfiguration vorhanden');\n    }\n\n    // Merge Config: Behalte selectedCalendar aus der bergebenen Config, falls vorhanden\n    const defaultConfig = this.getDefaultConfig();\n    this.config = {\n      ...defaultConfig,\n      ...config,\n      // Stelle sicher, dass selectedCalendar aus der bergebenen Config beibehalten wird\n      selectedCalendar: config?.selectedCalendar !== undefined ? config.selectedCalendar : (this.config?.selectedCalendar || defaultConfig.selectedCalendar),\n    };\n\n    this._debug('config nach setConfig:', this.config);\n\n    // View initialisieren oder aktualisieren\n    this._viewType = 'ShiftScheduleView';\n\n    try {\n      if (!this._view) {\n        // Erstelle ShiftScheduleView als Custom Element nur wenn noch nicht vorhanden\n        this._debug('setConfig: Erstelle neue ShiftSchedule-View');\n        this._view = document.createElement('shiftschedule-view');\n\n        // Event-Listener fr Config-nderungen von der View\n        this._view.addEventListener('config-changed', (ev) => {\n          this._debug('config-changed Event von ShiftSchedule-View empfangen:', ev.detail);\n          if (ev.detail && ev.detail.config) {\n            this.config = ev.detail.config;\n            // Dispatch das Event weiter, damit Home Assistant die Config aktualisiert\n            this.dispatchEvent(\n              new CustomEvent('config-changed', {\n                detail: { config: this.config },\n                bubbles: true,\n                composed: true,\n              })\n            );\n          }\n        });\n\n        // bergebe hass und lovelace an die View, falls sie bereits gesetzt wurden\n        if (this._hass) {\n          this._debug('setConfig: bergebe gespeicherten hass an ShiftSchedule-View');\n          this._view.hass = this._hass;\n        }\n        if (this.lovelace) {\n          this._debug('setConfig: bergebe lovelace an ShiftSchedule-View');\n          this._view.lovelace = this.lovelace;\n        }\n      } else {\n        // View existiert bereits, aktualisiere nur die Config\n        this._debug('setConfig: Aktualisiere bestehende ShiftSchedule-View');\n      }\n\n      // Aktualisiere die Config der View (wichtig: auch wenn View bereits existiert)\n      this._view.config = this.config;\n\n      this._debug('setConfig: View initialisiert/aktualisiert:', {\n        viewType: this._viewType,\n        config: this.config,\n      });\n    } catch (error) {\n      this._debug('setConfig: Fehler bei View-Initialisierung:', error);\n      throw new Error(`Fehler bei der View-Initialisierung: ${error.message}`);\n    }\n  }\n\n  set hass(hass) {\n    // this._debug('set hass wird aufgerufen');\n    this._hass = hass;\n    if (this._view) {\n      this._view.hass = hass;\n    } else {\n      this._debug('set hass: View noch nicht initialisiert, speichere hass fr spter');\n    }\n  }\n\n  set lovelace(lovelace) {\n    this._lovelace = lovelace;\n    if (this._view) {\n      this._view.lovelace = lovelace;\n    }\n  }\n\n  get lovelace() {\n    return this._lovelace;\n  }\n\n  get hass() {\n    return this._hass;\n  }\n\n  firstUpdated() {\n    this._debug('firstUpdated wird aufgerufen');\n    if (this._view) {\n      this._view.firstUpdated();\n    }\n    this._debug('firstUpdated abgeschlossen');\n  }\n\n  render() {\n    if (!this._view) {\n      return html`<div class=\"error\">Keine View verfgbar</div>`;\n    }\n\n    try {\n      return html`${this._view}`;\n    } catch (error) {\n      this._debug('render: Fehler beim Rendern der View:', error);\n      return html`<div class=\"error\">Fehler beim Rendern: ${error.message}</div>`;\n    }\n  }\n\n  static styles = [\n    super.styles,\n    css`\n      :host {\n        display: block;\n      }\n\n      ha-card {\n        padding: 16px;\n      }\n\n      .loading {\n        text-align: center;\n        padding: 20px;\n        color: var(--secondary-text-color);\n      }\n\n      .error {\n        text-align: center;\n        padding: 20px;\n        color: var(--error-color);\n      }\n    `,\n  ];\n}\n","import { css } from 'lit';\nimport { SuperBase } from '../super-base.js';\n\nexport class EditorBase extends SuperBase {\n  static properties = {\n    ...super.properties,\n    _selectedTab: { type: Number },\n  };\n\n  static styles = [\n    super.styles,\n    css`\n      :host {\n        display: block;\n      }\n      .editor-container {\n        padding: 16px;\n      }\n    `,\n  ];\n\n  constructor(defaultConfig = {}) {\n    super();\n    this._debug('[EditorBase] EditorBase-Konstruktor wird aufgerufen');\n    this.config = {\n      type: 'custom:tgeditor-card',\n      ...defaultConfig,\n    };\n    this._debug('[EditorBase] EditorBase config nach Konstruktor:', this.config);\n  }\n\n  async firstUpdated() {\n    this._debug('[EditorBase] EditorBase firstUpdated wird aufgerufen');\n    await super.firstUpdated();\n    this._debug('[EditorBase] EditorBase firstUpdated abgeschlossen');\n  }\n\n  async loadHaForm() {\n    this._debug('[EditorBase] EditorBase loadHaForm wird aufgerufen');\n    if (!customElements.get('ha-form')) {\n      this._debug('[EditorBase] EditorBase ha-form nicht gefunden, lade custom-card-helpers');\n      try {\n        const cardHelpers = await import('custom-card-helpers');\n        this._debug('[EditorBase] EditorBase custom-card-helpers geladen');\n        await cardHelpers.loadHaForm();\n        this._debug('[EditorBase] EditorBase ha-form geladen');\n      } catch (error) {\n        throw error;\n      }\n    } else {\n      this._debug('[EditorBase] EditorBase ha-form bereits geladen');\n    }\n  }\n\n  getDefaultConfig() {\n    this._debug('[EditorBase] EditorBase getDefaultConfig wird aufgerufen');\n    throw new Error('getDefaultConfig muss in der abgeleiteten Klasse implementiert werden');\n  }\n\n  getStubConfig() {\n    this._debug('[EditorBase] EditorBase getStubConfig wird aufgerufen');\n    return this.getDefaultConfig();\n  }\n\n  setConfig(config) {\n    this._debug('[EditorBase] EditorBase setConfig wird aufgerufen mit:', config);\n    if (!config) {\n      throw new Error('Keine Konfiguration angegeben');\n    }\n\n    // Prfe, ob es sich um eine neue Konfiguration handelt\n    const isNewConfig = !this.config || Object.keys(this.config).length === 0;\n\n    // Wenn es eine neue Konfiguration ist, verwende sie direkt\n    if (isNewConfig) {\n      this.config = {\n        ...this.getDefaultConfig(),\n        ...config,\n      };\n    } else {\n      // Ansonsten behalte die bestehende Konfiguration bei und aktualisiere nur genderte Werte\n      this.config = {\n        ...this.config,\n        ...config,\n      };\n    }\n\n    this._debug('[EditorBase] EditorBase config nach setConfig:', this.config);\n  }\n}\n","import { html, css } from 'lit';\nimport { EditorBase } from './editor-base.js';\nimport { CardRegname } from '../card-config.js';\n\nexport class EditorImpl extends EditorBase {\n  static properties = {\n    ...super.properties,\n  };\n\n  constructor() {\n    super({\n      entity: '',\n      numberOfMonths: 14,\n      initialDisplayedMonths: 2,\n      selectedCalendar: 'a',\n      calendars: [\n        { shortcut: 'a', name: 'Schicht A', color: '#ff9800', enabled: true, statusRelevant: true },\n        { shortcut: 'b', name: 'Schicht B', color: '#ff0000', enabled: false, statusRelevant: true },\n        { shortcut: 'c', name: 'Schicht C', color: '#00ff00', enabled: false, statusRelevant: true },\n        { shortcut: 'd', name: 'Schicht D', color: '#0000ff', enabled: false, statusRelevant: true },\n        { shortcut: 'e', name: 'Schicht E', color: '#ffff00', enabled: false, statusRelevant: true },\n      ],\n      holidays: {\n        neujahr: true,\n        heilige_drei_koenige: true,\n        tag_der_arbeit: true,\n        friedensfest: true,\n        mariae_himmelfahrt: true,\n        tag_der_deutschen_einheit: true,\n        reformationstag: true,\n        allerheiligen: true,\n        weihnachten_1: true,\n        weihnachten_2: true,\n        karfreitag: true,\n        ostermontag: true,\n        christi_himmelfahrt: true,\n        pfingstmontag: true,\n        fronleichnam: true,\n        busstag: true,\n      },\n    });\n\n    this._debug(`EditorImpl-Modul wird geladen`);\n  }\n\n  async firstUpdated() {\n    this._debug(`EditorImpl firstUpdated wird aufgerufen`);\n    await super.firstUpdated();\n    this._debug(`EditorImpl firstUpdated abgeschlossen`);\n  }\n\n  render() {\n    this._debug('EditorImpl render wird aufgerufen');\n    if (!this.hass) {\n      this._debug(`EditorImpl render: Kein hass`);\n      return html`<div>Loading...</div>`;\n    }\n\n    this._debug(`EditorImpl render mit config:`, this.config);\n\n    // Stelle sicher, dass calendars Array vorhanden ist und alle 5 Kalender enthlt\n    if (!this.config.calendars || !Array.isArray(this.config.calendars)) {\n      this.config.calendars = [\n        { shortcut: 'a', name: 'Schicht A', color: '#ff9800', enabled: false, statusRelevant: true },\n        { shortcut: 'b', name: 'Schicht B', color: '#ff0000', enabled: false, statusRelevant: true },\n        { shortcut: 'c', name: 'Schicht C', color: '#00ff00', enabled: false, statusRelevant: true },\n        { shortcut: 'd', name: 'Schicht D', color: '#0000ff', enabled: false, statusRelevant: true },\n        { shortcut: 'e', name: 'Schicht E', color: '#ffff00', enabled: false, statusRelevant: true },\n      ];\n    }\n\n    // Stelle sicher, dass genau 5 Kalender vorhanden sind (a, b, c, d, e)\n    const defaultCalendars = [\n      { shortcut: 'a', name: 'Schicht A', color: '#ff9800', enabled: false, statusRelevant: true },\n      { shortcut: 'b', name: 'Schicht B', color: '#ff0000', enabled: false, statusRelevant: true },\n      { shortcut: 'c', name: 'Schicht C', color: '#00ff00', enabled: false, statusRelevant: true },\n      { shortcut: 'd', name: 'Schicht D', color: '#0000ff', enabled: false, statusRelevant: true },\n      { shortcut: 'e', name: 'Schicht E', color: '#ffff00', enabled: false, statusRelevant: true },\n    ];\n\n    // Initialisiere oder aktualisiere Kalender-Array\n    const calendarsMap = new Map();\n    this.config.calendars.forEach(cal => calendarsMap.set(cal.shortcut, cal));\n\n    // Fge fehlende Kalender hinzu oder aktualisiere vorhandene\n    this.config.calendars = defaultCalendars.map(defaultCal => {\n      const existing = calendarsMap.get(defaultCal.shortcut);\n      if (existing) {\n        // Behalte konfigurierte Werte, aber stelle sicher, dass shortcut fix bleibt\n        // Stelle sicher, dass statusRelevant vorhanden ist (Default: true)\n        return {\n          ...defaultCal,\n          ...existing,\n          shortcut: defaultCal.shortcut,\n          statusRelevant: existing.statusRelevant !== undefined ? existing.statusRelevant : true\n        };\n      }\n      return defaultCal;\n    });\n\n    return html`\n      <div class=\"card-config\">\n        <ha-form\n          .hass=${this.hass}\n          .data=${this.config}\n          .schema=${this._getBasicSchema()}\n          .computeLabel=${this._computeLabel}\n          @value-changed=${this._valueChanged}\n        ></ha-form>\n        <div class=\"elements-section\">\n          <div class=\"calendars-list\">\n            ${this.config.calendars\n              .map((calendar, index) => this._renderCalendar(index, calendar))}\n          </div>\n        </div>\n        <div class=\"elements-section\">\n          ${this._renderHolidays()}\n        </div>\n      </div>\n    `;\n  }\n\n  _updateUseElements(value) {\n    this.config = {\n      ...this.config,\n      useElements: value,\n    };\n\n    this.dispatchEvent(\n      new CustomEvent('config-changed', {\n        detail: { config: this.config },\n        bubbles: true,\n        composed: true,\n      })\n    );\n    this.requestUpdate();\n  }\n\n  _getColorOptions() {\n    // Liste von vordefinierten Farben\n    return [\n      { value: '#ff0000', name: 'Rot' },\n      { value: '#00ff00', name: 'Grn' },\n      { value: '#0000ff', name: 'Blau' },\n      { value: '#ffff00', name: 'Gelb' },\n      { value: '#ff00ff', name: 'Magenta' },\n      { value: '#00ffff', name: 'Cyan' },\n      { value: '#ff8800', name: 'Orange' },\n      { value: '#8800ff', name: 'Violett' },\n      { value: '#0088ff', name: 'Hellblau' },\n      { value: '#ff0088', name: 'Pink' },\n      { value: '#88ff00', name: 'Lime' },\n      { value: '#008888', name: 'Trkis' },\n      { value: '#888888', name: 'Grau' },\n      { value: '#000000', name: 'Schwarz' },\n      { value: '#ffffff', name: 'Wei' },\n    ];\n  }\n\n  _validateTime(timeString) {\n    if (!timeString || timeString.trim() === '') {\n      return true; // Leer ist erlaubt (optional)\n    }\n    const timePattern = /^([0-1][0-9]|2[0-3]):[0-5][0-9]$/;\n    return timePattern.test(timeString.trim());\n  }\n\n  _validateTimeRange(range) {\n    if (!range || !Array.isArray(range) || range.length < 2) {\n      return { isValid: true, message: '' }; // Leer ist erlaubt\n    }\n    const start = range[0];\n    const end = range[1];\n    const hasStart = start && start.trim() !== '';\n    const hasEnd = end && end.trim() !== '';\n\n    // Beide leer = OK (optional)\n    if (!hasStart && !hasEnd) {\n      return { isValid: true, message: '' };\n    }\n\n    // Beide gesetzt = prfe Format\n    if (hasStart && hasEnd) {\n      const startValid = this._validateTime(start);\n      const endValid = this._validateTime(end);\n      if (!startValid) {\n        return { isValid: false, message: 'Ungltiges Format fr Startzeit. Bitte HH:MM verwenden (z.B. 08:30)' };\n      }\n      if (!endValid) {\n        return { isValid: false, message: 'Ungltiges Format fr Endzeit. Bitte HH:MM verwenden (z.B. 17:00)' };\n      }\n      return { isValid: true, message: '' };\n    }\n\n    // Nur eine Zeit gesetzt = Fehler\n    if (hasStart && !hasEnd) {\n      return { isValid: false, message: 'Bitte auch die Endzeit angeben' };\n    }\n    if (!hasStart && hasEnd) {\n      return { isValid: false, message: 'Bitte auch die Startzeit angeben' };\n    }\n\n    return { isValid: true, message: '' };\n  }\n\n  _renderCalendar(index, calendar) {\n    const colorOptions = this._getColorOptions();\n    const currentColor = calendar.color || '#ff0000';\n    const timeRanges = calendar.timeRanges || [[null, null], [null, null]];\n\n    const shiftName = calendar.name || `Schicht ${calendar.shortcut.toUpperCase()}`;\n    const isEnabled = calendar.enabled || false;\n\n    // Validiere Zeitrume fr visuelles Feedback\n    const range1Validation = this._validateTimeRange(timeRanges[0]);\n    const range2Validation = this._validateTimeRange(timeRanges[1]);\n\n    // Prfe einzelne Zeiten fr Format-Validierung\n    const isValidTimeRange1Start = !timeRanges[0] || !timeRanges[0][0] || this._validateTime(timeRanges[0][0]);\n    const isValidTimeRange1End = !timeRanges[0] || !timeRanges[0][1] || this._validateTime(timeRanges[0][1]);\n    const isValidTimeRange2Start = !timeRanges[1] || !timeRanges[1][0] || this._validateTime(timeRanges[1][0]);\n    const isValidTimeRange2End = !timeRanges[1] || !timeRanges[1][1] || this._validateTime(timeRanges[1][1]);\n\n    // Kombiniere Format- und Vollstndigkeits-Validierung\n    const range1StartError = !isValidTimeRange1Start || !range1Validation.isValid;\n    const range1EndError = !isValidTimeRange1End || !range1Validation.isValid;\n    const range2StartError = !isValidTimeRange2Start || !range2Validation.isValid;\n    const range2EndError = !isValidTimeRange2End || !range2Validation.isValid;\n\n    return html`\n      <details class=\"calendar-item\">\n        <summary class=\"calendar-summary\">\n          <span class=\"calendar-summary-title\">Schicht ${calendar.shortcut.toUpperCase()}: ${shiftName}</span>\n          <span class=\"calendar-summary-status\">\n            ${isEnabled\n              ? html`<span class=\"status-badge status-enabled\">Aktiviert</span>`\n              : html`<span class=\"status-badge status-disabled\">Deaktiviert</span>`\n            }\n          </span>\n        </summary>\n        <div class=\"calendar-fields\">\n          <ha-textfield\n            label=\"Name\"\n            .value=${calendar.name || ''}\n            maxlength=\"30\"\n            @input=${(e) => this._updateCalendar(calendar.shortcut, 'name', e.target.value)}\n          ></ha-textfield>\n          <div class=\"switch-item\">\n            <label class=\"switch-label\">Aktiviert</label>\n            <ha-switch\n              .checked=${calendar.enabled || false}\n              @change=${(e) => this._updateCalendar(calendar.shortcut, 'enabled', e.target.checked)}\n            ></ha-switch>\n          </div>\n          <div class=\"switch-item\">\n            <label class=\"switch-label\">Status relevant</label>\n            <ha-switch\n              .checked=${calendar.statusRelevant !== false}\n              @change=${(e) => this._updateCalendar(calendar.shortcut, 'statusRelevant', e.target.checked)}\n            ></ha-switch>\n          </div>\n          <div class=\"color-selector\">\n            <div class=\"color-selector-label\">Farbe</div>\n            <ha-combo-box\n              label=\"Farbe\"\n              .value=${currentColor}\n              .items=${colorOptions.map(color => ({\n                value: color.value,\n                label: `${color.name} (${color.value})`\n              }))}\n              @value-changed=${(e) => {\n                const value = e.detail?.value;\n                if (value) {\n                  this._updateCalendar(calendar.shortcut, 'color', value);\n                }\n              }}\n            ></ha-combo-box>\n            <div class=\"color-selected-preview\">\n              <span class=\"color-preview-large\" style=\"background-color: ${currentColor};\"></span>\n              <span class=\"color-selected-value\">${currentColor}</span>\n            </div>\n          </div>\n          <div class=\"time-ranges\">\n            <div class=\"time-range-label\">Zeitrume (optional)</div>\n            <div class=\"time-range-item\">\n              <ha-textfield\n                label=\"Startzeit 1\"\n                .value=${timeRanges[0] && timeRanges[0][0] ? timeRanges[0][0] : ''}\n                placeholder=\"HH:MM\"\n                pattern=\"^([0-1][0-9]|2[0-3]):[0-5][0-9]$\"\n                .error=${range1StartError}\n                .helper=${range1StartError ? (range1Validation.message || 'Ungltiges Format. Bitte HH:MM verwenden (z.B. 08:30)') : ''}\n                @input=${(e) => {\n                  const value = e.target.value.trim() || null;\n                  const formatValid = !value || this._validateTime(value);\n                  this._updateTimeRange(calendar.shortcut, 0, 0, value);\n                  // Prfe Vollstndigkeit nach Update\n                  setTimeout(() => {\n                    const updatedCal = this.config.calendars?.find(c => c.shortcut === calendar.shortcut);\n                    const updatedRange = updatedCal?.timeRanges?.[0] || [null, null];\n                    const rangeValidation = this._validateTimeRange(updatedRange);\n                    const hasError = !formatValid || !rangeValidation.isValid;\n                    e.target.error = hasError;\n                    e.target.helper = hasError ? (rangeValidation.message || 'Ungltiges Format. Bitte HH:MM verwenden (z.B. 08:30)') : '';\n                    this.requestUpdate();\n                  }, 0);\n                }}\n                @blur=${(e) => {\n                  const value = e.target.value.trim() || null;\n                  const formatValid = !value || this._validateTime(value);\n                  const updatedCal = this.config.calendars?.find(c => c.shortcut === calendar.shortcut);\n                  const updatedRange = updatedCal?.timeRanges?.[0] || [null, null];\n                  const rangeValidation = this._validateTimeRange(updatedRange);\n                  const hasError = !formatValid || !rangeValidation.isValid;\n                  e.target.error = hasError;\n                  e.target.helper = hasError ? (rangeValidation.message || 'Ungltiges Format. Bitte HH:MM verwenden (z.B. 08:30)') : '';\n                  this.requestUpdate();\n                }}\n              ></ha-textfield>\n              <span class=\"time-separator\">-</span>\n              <ha-textfield\n                label=\"Endzeit 1\"\n                .value=${timeRanges[0] && timeRanges[0][1] ? timeRanges[0][1] : ''}\n                placeholder=\"HH:MM\"\n                pattern=\"^([0-1][0-9]|2[0-3]):[0-5][0-9]$\"\n                .error=${range1EndError}\n                .helper=${range1EndError ? (range1Validation.message || 'Ungltiges Format. Bitte HH:MM verwenden (z.B. 17:00)') : ''}\n                @input=${(e) => {\n                  const value = e.target.value.trim() || null;\n                  const formatValid = !value || this._validateTime(value);\n                  this._updateTimeRange(calendar.shortcut, 0, 1, value);\n                  setTimeout(() => {\n                    const updatedCal = this.config.calendars?.find(c => c.shortcut === calendar.shortcut);\n                    const updatedRange = updatedCal?.timeRanges?.[0] || [null, null];\n                    const rangeValidation = this._validateTimeRange(updatedRange);\n                    const hasError = !formatValid || !rangeValidation.isValid;\n                    e.target.error = hasError;\n                    e.target.helper = hasError ? (rangeValidation.message || 'Ungltiges Format. Bitte HH:MM verwenden (z.B. 17:00)') : '';\n                    this.requestUpdate();\n                  }, 0);\n                }}\n                @blur=${(e) => {\n                  const value = e.target.value.trim() || null;\n                  const formatValid = !value || this._validateTime(value);\n                  const updatedCal = this.config.calendars?.find(c => c.shortcut === calendar.shortcut);\n                  const updatedRange = updatedCal?.timeRanges?.[0] || [null, null];\n                  const rangeValidation = this._validateTimeRange(updatedRange);\n                  const hasError = !formatValid || !rangeValidation.isValid;\n                  e.target.error = hasError;\n                  e.target.helper = hasError ? (rangeValidation.message || 'Ungltiges Format. Bitte HH:MM verwenden (z.B. 17:00)') : '';\n                  this.requestUpdate();\n                }}\n              ></ha-textfield>\n            </div>\n            <div class=\"time-range-item\">\n              <ha-textfield\n                label=\"Startzeit 2\"\n                .value=${timeRanges[1] && timeRanges[1][0] ? timeRanges[1][0] : ''}\n                placeholder=\"HH:MM\"\n                pattern=\"^([0-1][0-9]|2[0-3]):[0-5][0-9]$\"\n                .error=${range2StartError}\n                .helper=${range2StartError ? (range2Validation.message || 'Ungltiges Format. Bitte HH:MM verwenden (z.B. 08:30)') : ''}\n                @input=${(e) => {\n                  const value = e.target.value.trim() || null;\n                  const formatValid = !value || this._validateTime(value);\n                  this._updateTimeRange(calendar.shortcut, 1, 0, value);\n                  setTimeout(() => {\n                    const updatedCal = this.config.calendars?.find(c => c.shortcut === calendar.shortcut);\n                    const updatedRange = updatedCal?.timeRanges?.[1] || [null, null];\n                    const rangeValidation = this._validateTimeRange(updatedRange);\n                    const hasError = !formatValid || !rangeValidation.isValid;\n                    e.target.error = hasError;\n                    e.target.helper = hasError ? (rangeValidation.message || 'Ungltiges Format. Bitte HH:MM verwenden (z.B. 08:30)') : '';\n                    this.requestUpdate();\n                  }, 0);\n                }}\n                @blur=${(e) => {\n                  const value = e.target.value.trim() || null;\n                  const formatValid = !value || this._validateTime(value);\n                  const updatedCal = this.config.calendars?.find(c => c.shortcut === calendar.shortcut);\n                  const updatedRange = updatedCal?.timeRanges?.[1] || [null, null];\n                  const rangeValidation = this._validateTimeRange(updatedRange);\n                  const hasError = !formatValid || !rangeValidation.isValid;\n                  e.target.error = hasError;\n                  e.target.helper = hasError ? (rangeValidation.message || 'Ungltiges Format. Bitte HH:MM verwenden (z.B. 08:30)') : '';\n                  this.requestUpdate();\n                }}\n              ></ha-textfield>\n              <span class=\"time-separator\">-</span>\n              <ha-textfield\n                label=\"Endzeit 2\"\n                .value=${timeRanges[1] && timeRanges[1][1] ? timeRanges[1][1] : ''}\n                placeholder=\"HH:MM\"\n                pattern=\"^([0-1][0-9]|2[0-3]):[0-5][0-9]$\"\n                .error=${range2EndError}\n                .helper=${range2EndError ? (range2Validation.message || 'Ungltiges Format. Bitte HH:MM verwenden (z.B. 17:00)') : ''}\n                @input=${(e) => {\n                  const value = e.target.value.trim() || null;\n                  const formatValid = !value || this._validateTime(value);\n                  this._updateTimeRange(calendar.shortcut, 1, 1, value);\n                  setTimeout(() => {\n                    const updatedCal = this.config.calendars?.find(c => c.shortcut === calendar.shortcut);\n                    const updatedRange = updatedCal?.timeRanges?.[1] || [null, null];\n                    const rangeValidation = this._validateTimeRange(updatedRange);\n                    const hasError = !formatValid || !rangeValidation.isValid;\n                    e.target.error = hasError;\n                    e.target.helper = hasError ? (rangeValidation.message || 'Ungltiges Format. Bitte HH:MM verwenden (z.B. 17:00)') : '';\n                    this.requestUpdate();\n                  }, 0);\n                }}\n                @blur=${(e) => {\n                  const value = e.target.value.trim() || null;\n                  const formatValid = !value || this._validateTime(value);\n                  const updatedCal = this.config.calendars?.find(c => c.shortcut === calendar.shortcut);\n                  const updatedRange = updatedCal?.timeRanges?.[1] || [null, null];\n                  const rangeValidation = this._validateTimeRange(updatedRange);\n                  const hasError = !formatValid || !rangeValidation.isValid;\n                  e.target.error = hasError;\n                  e.target.helper = hasError ? (rangeValidation.message || 'Ungltiges Format. Bitte HH:MM verwenden (z.B. 17:00)') : '';\n                  this.requestUpdate();\n                }}\n              ></ha-textfield>\n            </div>\n          </div>\n        </div>\n      </details>\n    `;\n  }\n\n  _renderHolidays() {\n    // Stelle sicher, dass holidays Konfiguration existiert\n    if (!this.config.holidays) {\n      this.config.holidays = {\n        neujahr: true,\n        heilige_drei_koenige: true,\n        tag_der_arbeit: true,\n        friedensfest: true,\n        mariae_himmelfahrt: true,\n        tag_der_deutschen_einheit: true,\n        reformationstag: true,\n        allerheiligen: true,\n        weihnachten_1: true,\n        weihnachten_2: true,\n        karfreitag: true,\n        ostermontag: true,\n        christi_himmelfahrt: true,\n        pfingstmontag: true,\n        fronleichnam: true,\n        busstag: true,\n      };\n    }\n\n    const holidays = [\n      { key: 'neujahr', label: 'Neujahr (1. Januar)' },\n      { key: 'heilige_drei_koenige', label: 'Heilige Drei Knige (6. Januar)' },\n      { key: 'tag_der_arbeit', label: 'Tag der Arbeit (1. Mai)' },\n      { key: 'friedensfest', label: 'Friedensfest (8. August)' },\n      { key: 'mariae_himmelfahrt', label: 'Mari Himmelfahrt (15. August)' },\n      { key: 'tag_der_deutschen_einheit', label: 'Tag der Deutschen Einheit (3. Oktober)' },\n      { key: 'reformationstag', label: 'Reformationstag (31. Oktober)' },\n      { key: 'allerheiligen', label: 'Allerheiligen (1. November)' },\n      { key: 'weihnachten_1', label: '1. Weihnachtsfeiertag (25. Dezember)' },\n      { key: 'weihnachten_2', label: '2. Weihnachtsfeiertag (26. Dezember)' },\n      { key: 'karfreitag', label: 'Karfreitag' },\n      { key: 'ostermontag', label: 'Ostermontag' },\n      { key: 'christi_himmelfahrt', label: 'Christi Himmelfahrt' },\n      { key: 'pfingstmontag', label: 'Pfingstmontag' },\n      { key: 'fronleichnam', label: 'Fronleichnam' },\n      { key: 'busstag', label: 'Bu- und Bettag' },\n    ];\n\n    return html`\n      <details class=\"holidays-item\">\n        <summary class=\"holidays-summary\">\n          <span class=\"holidays-summary-title\">Feiertage</span>\n        </summary>\n        <div class=\"holidays-fields\">\n          ${holidays.map(holiday => html`\n            <div class=\"holiday-switch-item\">\n              <label class=\"holiday-label\">${holiday.label}</label>\n              <ha-switch\n                .checked=${this.config.holidays[holiday.key] !== false}\n                @change=${(e) => this._updateHoliday(holiday.key, e.target.checked)}\n              ></ha-switch>\n            </div>\n          `)}\n        </div>\n      </details>\n    `;\n  }\n\n  _updateHoliday(key, enabled) {\n    if (!this.config.holidays) {\n      this.config.holidays = {};\n    }\n\n    // Aktualisiere die Config direkt (immutable update)\n    const newConfig = {\n      ...this.config,\n      holidays: {\n        ...this.config.holidays,\n        [key]: enabled,\n      },\n    };\n\n    // Aktualisiere die Config direkt\n    this.config = newConfig;\n\n    // Aktualisiere die Ansicht sofort\n    this.requestUpdate();\n\n    // Dispatch config-changed Event\n    setTimeout(() => {\n      this.dispatchEvent(\n        new CustomEvent('config-changed', {\n          detail: { config: newConfig },\n          bubbles: true,\n          composed: true,\n        })\n      );\n    }, 0);\n  }\n\n  _updateTimeRange(shortcut, rangeIndex, timeIndex, value) {\n    // rangeIndex: 0 oder 1 (erster oder zweiter Zeitraum)\n    // timeIndex: 0 oder 1 (Start oder End)\n    if (!this.config.calendars) {\n      this.config.calendars = [\n        { shortcut: 'a', name: 'Schicht A', color: '#ff9800', enabled: false },\n        { shortcut: 'b', name: 'Schicht B', color: '#ff0000', enabled: false },\n        { shortcut: 'c', name: 'Schicht C', color: '#00ff00', enabled: false },\n        { shortcut: 'd', name: 'Schicht D', color: '#0000ff', enabled: false },\n        { shortcut: 'e', name: 'Schicht E', color: '#ffff00', enabled: false },\n      ];\n    }\n\n    // Erstelle eine neue Kopie des Arrays und aktualisiere den betroffenen Kalender\n    const newCalendars = this.config.calendars.map(cal => {\n      if (cal.shortcut === shortcut) {\n        // Stelle sicher, dass timeRanges Array existiert\n        const timeRanges = cal.timeRanges || [[null, null], [null, null]];\n        // Erstelle eine Kopie des timeRanges Arrays\n        const newTimeRanges = timeRanges.map((range, idx) => {\n          if (idx === rangeIndex) {\n            // Erstelle eine Kopie des Zeitraums\n            const newRange = [...range];\n            newRange[timeIndex] = value || null;\n            return newRange;\n          }\n          return range;\n        });\n\n        return {\n          ...cal,\n          timeRanges: newTimeRanges,\n        };\n      }\n      return cal;\n    });\n\n    // Aktualisiere die Config direkt (immutable update)\n    const newConfig = {\n      ...this.config,\n      calendars: newCalendars,\n    };\n\n    // Aktualisiere die Config direkt\n    this.config = newConfig;\n\n    // Aktualisiere die Ansicht sofort\n    this.requestUpdate();\n\n    // Dispatch config-changed Event\n    setTimeout(() => {\n      this.dispatchEvent(\n        new CustomEvent('config-changed', {\n          detail: { config: newConfig },\n          bubbles: true,\n          composed: true,\n        })\n      );\n    }, 0);\n  }\n\n  _updateCalendar(shortcut, property, value) {\n    if (!this.config.calendars) {\n      this.config.calendars = [\n        { shortcut: 'a', name: 'Schicht A', color: '#ff9800', enabled: false },\n        { shortcut: 'b', name: 'Schicht B', color: '#ff0000', enabled: false },\n        { shortcut: 'c', name: 'Schicht C', color: '#00ff00', enabled: false },\n        { shortcut: 'd', name: 'Schicht D', color: '#0000ff', enabled: false },\n        { shortcut: 'e', name: 'Schicht E', color: '#ffff00', enabled: false },\n      ];\n    }\n\n    // Erstelle eine neue Kopie des Arrays und aktualisiere den betroffenen Kalender\n    const newCalendars = this.config.calendars.map(cal => {\n      if (cal.shortcut === shortcut) {\n        return {\n          ...cal,\n          [property]: value,\n        };\n      }\n      return cal;\n    });\n\n    // Aktualisiere die Config direkt (immutable update)\n    const newConfig = {\n      ...this.config,\n      calendars: newCalendars,\n    };\n\n    // Aktualisiere die Config direkt\n    this.config = newConfig;\n\n    // Aktualisiere die Ansicht sofort\n    this.requestUpdate();\n\n    // Dispatch config-changed Event - Home Assistant speichert die Config automatisch\n    // Verwende setTimeout, um sicherzustellen, dass das Event nicht den Editor schliet\n    setTimeout(() => {\n      this.dispatchEvent(\n        new CustomEvent('config-changed', {\n          detail: { config: newConfig },\n          bubbles: true,\n          composed: true,\n        })\n      );\n    }, 0);\n  }\n\n\n\n  _computeLabel(schema) {\n    switch (schema.name) {\n      case 'entity':\n        return 'Entity (input_text)';\n      case 'numberOfMonths':\n        return 'Maximale Anzahl Monate';\n      case 'initialDisplayedMonths':\n        return 'Standardwert sichtbare Monate';\n      default:\n        return schema.name;\n    }\n  }\n\n  _valueChanged(ev) {\n    this._debug('EditorImpl _valueChanged wird aufgerufen mit:', ev.detail);\n\n    const newValue = ev.detail.value;\n\n    // Stelle sicher, dass initialDisplayedMonths nicht grer als numberOfMonths ist\n    if (newValue.initialDisplayedMonths !== undefined && newValue.numberOfMonths !== undefined) {\n      newValue.initialDisplayedMonths = Math.min(newValue.initialDisplayedMonths, newValue.numberOfMonths);\n    } else if (newValue.initialDisplayedMonths !== undefined && this.config.numberOfMonths) {\n      newValue.initialDisplayedMonths = Math.min(newValue.initialDisplayedMonths, this.config.numberOfMonths);\n    } else if (newValue.numberOfMonths !== undefined && this.config.initialDisplayedMonths) {\n      // Wenn numberOfMonths gendert wird, passe initialDisplayedMonths an, falls ntig\n      if (this.config.initialDisplayedMonths > newValue.numberOfMonths) {\n        newValue.initialDisplayedMonths = newValue.numberOfMonths;\n      }\n    }\n\n    this.config = {\n      ...this.config,\n      ...newValue,\n    };\n    this._debug('EditorImpl config nach _valueChanged:', this.config);\n    this.dispatchEvent(\n      new CustomEvent('config-changed', {\n        detail: { config: this.config },\n        bubbles: true,\n        composed: true,\n      })\n    );\n  }\n\n\n  static styles = [\n    super.styles,\n    css`\n      :host {\n        display: block;\n      }\n\n      .card-config {\n        padding: 10px;\n      }\n\n      .elements-section {\n        margin-top: 20px;\n        padding-top: 20px;\n        border-top: 1px solid var(--divider-color, #e0e0e0);\n      }\n\n      .elements-header {\n        margin-bottom: 15px;\n      }\n\n      .elements-header ha-combo-box {\n        width: 100%;\n      }\n\n      .calendars-list {\n        margin-top: 15px;\n      }\n\n      .calendar-item {\n        margin-bottom: 12px;\n        background-color: var(--card-background-color, #ffffff);\n        border: 1px solid var(--divider-color, #e0e0e0);\n        border-radius: 4px;\n        overflow: hidden;\n      }\n\n      .calendar-item[open] {\n        border-color: var(--primary-color, #03a9f4);\n      }\n\n      .calendar-summary {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        padding: 12px 15px;\n        cursor: pointer;\n        list-style: none;\n        user-select: none;\n        background-color: var(--card-background-color, #ffffff);\n        transition: background-color 0.2s ease;\n      }\n\n      .calendar-summary::-webkit-details-marker {\n        display: none;\n      }\n\n      .calendar-summary::before {\n        content: '';\n        display: inline-block;\n        margin-right: 8px;\n        transition: transform 0.2s ease;\n        color: var(--primary-color, #03a9f4);\n        font-size: 10px;\n      }\n\n      .calendar-item[open] .calendar-summary::before {\n        transform: rotate(90deg);\n      }\n\n      .calendar-summary:hover {\n        background-color: var(--divider-color, #f5f5f5);\n      }\n\n      .calendar-summary-title {\n        font-size: 14px;\n        font-weight: 500;\n        color: var(--primary-text-color, #000000);\n        flex: 1;\n      }\n\n      .calendar-summary-status {\n        display: flex;\n        align-items: center;\n        margin-left: 12px;\n      }\n\n      .status-badge {\n        padding: 4px 8px;\n        border-radius: 12px;\n        font-size: 11px;\n        font-weight: 500;\n        text-transform: uppercase;\n      }\n\n      .status-enabled {\n        background-color: var(--success-color, #4caf50);\n        color: white;\n      }\n\n      .status-disabled {\n        background-color: var(--disabled-color, #9e9e9e);\n        color: white;\n      }\n\n      .calendar-fields {\n        display: grid;\n        grid-template-columns: 1fr;\n        gap: 15px;\n        padding: 15px;\n        border-top: 1px solid var(--divider-color, #e0e0e0);\n      }\n\n      .calendar-fields ha-textfield,\n      .calendar-fields ha-switch,\n      .calendar-fields .color-selector {\n        width: 100%;\n      }\n\n      .switch-item {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        gap: 12px;\n      }\n\n      .switch-label {\n        flex: 1;\n        font-size: 14px;\n        color: var(--primary-text-color, #000000);\n        cursor: pointer;\n      }\n\n      .calendar-fields ha-switch {\n        flex-shrink: 0;\n      }\n\n      ha-switch {\n        display: flex;\n        align-items: center;\n      }\n\n      .color-selector {\n        display: flex;\n        flex-direction: column;\n        gap: 8px;\n      }\n\n      .color-selector-label {\n        font-size: 14px;\n        font-weight: 500;\n        color: var(--primary-text-color, #000000);\n      }\n\n      .color-selector ha-combo-box {\n        width: 100%;\n      }\n\n      .color-option {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n        padding: 4px 0;\n      }\n\n      .color-preview {\n        display: inline-block;\n        width: 24px;\n        height: 24px;\n        border-radius: 4px;\n        border: 1px solid var(--divider-color, #e0e0e0);\n        flex-shrink: 0;\n      }\n\n      .color-preview-large {\n        display: inline-block;\n        width: 32px;\n        height: 32px;\n        border-radius: 4px;\n        border: 2px solid var(--divider-color, #e0e0e0);\n        flex-shrink: 0;\n      }\n\n      .color-name {\n        flex: 1;\n        font-weight: 500;\n      }\n\n      .color-value {\n        font-size: 12px;\n        color: var(--secondary-text-color, #888888);\n        font-family: monospace;\n      }\n\n      .color-selected-preview {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n        padding: 8px;\n        background-color: var(--card-background-color, #f5f5f5);\n        border-radius: 4px;\n        border: 1px solid var(--divider-color, #e0e0e0);\n      }\n\n      .color-selected-value {\n        font-size: 14px;\n        font-family: monospace;\n        color: var(--primary-text-color, #000000);\n        font-weight: 500;\n      }\n\n      .time-ranges {\n        display: flex;\n        flex-direction: column;\n        gap: 12px;\n        margin-top: 15px;\n        padding: 12px;\n        background-color: var(--card-background-color, #f5f5f5);\n        border-radius: 4px;\n        border: 1px solid var(--divider-color, #e0e0e0);\n      }\n\n      .time-range-label {\n        font-size: 14px;\n        font-weight: 500;\n        color: var(--primary-text-color, #000000);\n        margin-bottom: 8px;\n      }\n\n      .time-range-item {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n      }\n\n      .time-range-item ha-textfield {\n        flex: 1;\n      }\n\n      .time-separator {\n        font-size: 16px;\n        font-weight: 500;\n        color: var(--primary-text-color, #000000);\n        flex-shrink: 0;\n      }\n\n      .holidays-item {\n        margin-bottom: 12px;\n        background-color: var(--card-background-color, #ffffff);\n        border: 1px solid var(--divider-color, #e0e0e0);\n        border-radius: 4px;\n        overflow: hidden;\n      }\n\n      .holidays-item[open] {\n        border-color: var(--primary-color, #03a9f4);\n      }\n\n      .holidays-summary {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        padding: 12px 15px;\n        cursor: pointer;\n        list-style: none;\n        user-select: none;\n        background-color: var(--card-background-color, #ffffff);\n        transition: background-color 0.2s ease;\n      }\n\n      .holidays-summary::-webkit-details-marker {\n        display: none;\n      }\n\n      .holidays-summary::before {\n        content: '';\n        display: inline-block;\n        margin-right: 8px;\n        transition: transform 0.2s ease;\n        color: var(--primary-color, #03a9f4);\n        font-size: 10px;\n      }\n\n      .holidays-item[open] .holidays-summary::before {\n        transform: rotate(90deg);\n      }\n\n      .holidays-summary:hover {\n        background-color: var(--divider-color, #f5f5f5);\n      }\n\n      .holidays-summary-title {\n        font-size: 14px;\n        font-weight: 500;\n        color: var(--primary-text-color, #000000);\n        flex: 1;\n      }\n\n      .holidays-fields {\n        display: grid;\n        grid-template-columns: 1fr;\n        gap: 12px;\n        padding: 15px;\n        border-top: 1px solid var(--divider-color, #e0e0e0);\n      }\n\n      .holiday-switch-item {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        gap: 12px;\n      }\n\n      .holiday-label {\n        flex: 1;\n        font-size: 14px;\n        color: var(--primary-text-color, #000000);\n        cursor: pointer;\n      }\n\n      .holidays-fields ha-switch {\n        flex-shrink: 0;\n      }\n    `,\n  ];\n\n  static getConfigElement() {\n    return document.createElement(`${CardRegname}-editor`);\n  }\n\n  static getStubConfig() {\n    return {\n      entity: '',\n      numberOfMonths: 14,\n      initialDisplayedMonths: 2,\n      useElements: false,\n      selectedElement: null,\n      elements: [\n        { benennung: 'Element 1', aktiv: true, color: '#ff0000', shortcut: '1' },\n        { benennung: 'Element 2', aktiv: true, color: '#00ff00', shortcut: '2' },\n        { benennung: 'Element 3', aktiv: true, color: '#0000ff', shortcut: '3' },\n        { benennung: 'Element 4', aktiv: true, color: '#ffff00', shortcut: '4' },\n      ],\n      holidays: {\n        neujahr: true,\n        heilige_drei_koenige: true,\n        tag_der_arbeit: true,\n        friedensfest: true,\n        mariae_himmelfahrt: true,\n        tag_der_deutschen_einheit: true,\n        reformationstag: true,\n        allerheiligen: true,\n        weihnachten_1: true,\n        weihnachten_2: true,\n        karfreitag: true,\n        ostermontag: true,\n        christi_himmelfahrt: true,\n        pfingstmontag: true,\n        fronleichnam: true,\n        busstag: true,\n      },\n    };\n  }\n\n  _getBasicSchema() {\n    return [\n      {\n        name: 'entity',\n        selector: {\n          entity: {\n            domain: 'input_text',\n          },\n        },\n      },\n      {\n        name: 'numberOfMonths',\n        selector: {\n          number: {\n            min: 1,\n            max: 14,\n            step: 1,\n            mode: 'box',\n          },\n        },\n      },\n      {\n        name: 'initialDisplayedMonths',\n        selector: {\n          number: {\n            min: 1,\n            max: 14,\n            step: 1,\n            mode: 'box',\n          },\n        },\n      },\n    ];\n  }\n}\n","import { css } from 'lit';\nimport { EditorImpl } from './editor-impl.js';\nimport { CardRegname } from '../card-config.js';\n\nexport class Editor extends EditorImpl {\n  static styles = [\n    super.styles,\n    css`\n      :host {\n        display: block;\n        padding-top: 2px;\n        padding-bottom: 2px;\n        padding-left: 16px;\n        padding-right: 16px;\n      }\n    `,\n  ];\n\n  constructor() {\n    super();\n  }\n}\n\nif (!customElements.get(`${CardRegname}-editor`)) {\n  customElements.define(`${CardRegname}-editor`, Editor);\n}\n","import { LitElement, html, css } from 'lit';\nimport { property } from 'lit/decorators.js';\nimport { CardImpl } from './card-impl.js';\nimport './editor/editor.js';\nimport { CardRegname, CardName, CardDescription } from './card-config.js';\n\nexport class Card extends CardImpl {\n  // className wird von CardImpl geerbt (ist 'CardImpl')\n  static styles = [\n    super.styles,\n    css`\n      :host {\n      }\n    `,\n  ];\n\n  constructor() {\n    super();\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n  }\n}\n\n// Registriere die Karte in der UI\nif (window.customCards) {\n  window.customCards.push({\n    type: CardRegname,\n    name: CardName,\n    description: CardDescription,\n    preview: true,\n  });\n}\n\n// Registriere die Karte als Custom Element\nif (!customElements.get(CardRegname)) {\n  try {\n    customElements.define(CardRegname, Card);\n  } catch (error) {\n  }\n}\n"],"names":["inProgress","dataWebpackPrefix","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","m","d","definition","key","o","Object","defineProperty","enumerable","get","f","e","chunkId","Promise","all","keys","reduce","promises","u","g","globalThis","this","Function","window","obj","prop","prototype","hasOwnProperty","call","l","url","done","push","script","needAttach","scripts","document","getElementsByTagName","i","length","s","getAttribute","createElement","charset","timeout","nc","setAttribute","src","onScriptComplete","prev","event","onerror","onload","clearTimeout","doneFns","parentNode","removeChild","forEach","fn","setTimeout","bind","type","target","head","appendChild","r","Symbol","toStringTag","value","scriptUrl","importScripts","location","currentScript","tagName","toUpperCase","test","Error","replace","p","installedChunks","j","installedChunkData","promise","resolve","reject","error","errorType","realSrc","message","name","request","webpackJsonpCallback","parentChunkLoadingFunction","data","chunkIds","moreModules","runtime","some","id","chunkLoadingGlobal","self","ShadowRoot","ShadyCSS","nativeShadow","Document","CSSStyleSheet","WeakMap","n","constructor","t","_$cssResult$","cssText","styleSheet","replaceSync","set","toString","c","cssRules","is","getOwnPropertyDescriptor","h","getOwnPropertyNames","getOwnPropertySymbols","getPrototypeOf","a","trustedTypes","emptyScript","reactiveElementPolyfillSupport","toAttribute","Boolean","Array","JSON","stringify","fromAttribute","Number","parse","b","attribute","String","converter","reflect","useDefault","hasChanged","metadata","litPropertyMetadata","y","HTMLElement","addInitializer","_$Ei","observedAttributes","finalize","_$Eh","createProperty","state","create","wrapped","elementProperties","noAccessor","getPropertyDescriptor","requestUpdate","configurable","getPropertyOptions","Map","finalized","properties","_$Eu","elementStyles","finalizeStyles","styles","isArray","Set","flat","reverse","unshift","toLowerCase","super","_$Ep","isUpdatePending","hasUpdated","_$Em","_$Ev","_$ES","enableUpdating","_$AL","_$E_","addController","_$EO","add","renderRoot","isConnected","hostConnected","removeController","delete","size","createRenderRoot","shadowRoot","attachShadow","shadowRootOptions","adoptedStyleSheets","map","litNonce","textContent","connectedCallback","disconnectedCallback","hostDisconnected","attributeChangedCallback","_$AK","_$ET","removeAttribute","_$Ej","hasAttribute","C","_$EP","has","_$Eq","scheduleUpdate","performUpdate","shouldUpdate","willUpdate","hostUpdate","update","_$EM","_$AE","hostUpdated","firstUpdated","updated","updateComplete","getUpdateComplete","mode","ReactiveElement","reactiveElementVersions","createPolicy","createHTML","Math","random","toFixed","slice","createComment","v","_","RegExp","$","_$litType$","strings","values","x","T","for","E","A","createTreeWalker","P","V","lastIndex","exec","startsWith","N","parts","el","currentNode","content","firstChild","replaceWith","childNodes","nextNode","nodeType","hasAttributes","getAttributeNames","endsWith","split","index","ctor","H","I","L","k","append","indexOf","innerHTML","_$Co","_$Cl","_$litDirective$","_$AO","_$AT","_$AS","M","_$AV","_$AN","_$AD","_$AM","_$AU","creationScope","importNode","R","nextSibling","z","_$AI","_$Cv","_$AH","_$AA","_$AB","options","startNode","endNode","_$AR","iterator","O","insertBefore","createTextNode","_$AC","_$AP","remove","setConnected","element","fill","arguments","toggleAttribute","capture","once","passive","removeEventListener","addEventListener","handleEvent","host","litHtmlPolyfillSupport","litHtmlVersions","renderOptions","_$Do","renderBefore","render","_$litPart$","_$litElement$","litElementHydrateSupport","LitElement","litElementPolyfillSupport","litElementVersions","Version","CardRegname","CardName","DebugMode","TgCardHelper","cardName","debugMode","className","version","getCardInfoString","_debug","args","methodName","contextObject","debugList","item","trim","includes","callerLine","stack","patterns","pattern","methodMatch","match","path","_defineProperty","SuperBase","dM","useDummyData","showVersion","tgCardHelper","registerMeForChangeNotifys","eventTypes","that","dispatchEvent","CustomEvent","bubbles","composed","detail","component","callback","_handleOnChangeNotifys","eventType","immediately","eventdata","fkt","charAt","hass","config","css","CardBase","_selectedTab","informAtChangesClients","_registeredEventTypes","_onRegisterMeForChanges","setConfig","isNewConfig","getDefaultConfig","entity","numberOfMonths","initialDisplayedMonths","selectedCalendar","calendars","shortcut","color","enabled","statusRelevant","holidays","neujahr","heilige_drei_koenige","tag_der_arbeit","friedensfest","mariae_himmelfahrt","tag_der_deutschen_einheit","reformationstag","allerheiligen","weihnachten_1","weihnachten_2","karfreitag","ostermontag","christi_himmelfahrt","pfingstmontag","fronleichnam","busstag","html","registerInformAtChangesClients","componentExists","hasCallback","me","newEventType","sort","filter","existingMeInformer","find","informer","existingEventTypes","newEventTypes","newType","requestedEventTypes","combinedEventTypes","totalObservers","_notifyClientsAtChanges","originalEventType","extractedEventType","clients","client","Element","contains","details","_CardBase","_superPropGet","ViewBase","epgData","_loading","_error","_loadData","_dataProvider","_fetchViewData","dataProvider","_renderLoading","_renderError","_renderContent","_ViewBase","ShiftScheduleView","lovelace","_workingDays","_storageWarning","_configWarning","_statusWarning","_displayedMonths","_startMonthOffset","_selectedCalendar","_knownEntityIds","_cleanupDone","_isWriting","_writeLockTimer","_holidayCache","_cachedHolidayEntities","_editorModeCache","_editorModeCacheTime","_saveDebounceTimer","formatTwoDigits","num","padStart","_isInEditorMode","now","Date","result","URLSearchParams","search","editMode","querySelector","depth","maxDepth","classList","parentElement","root","getRootNode","href","pathname","_getContrastColor","hexColor","hex","parseInt","substr","_getEasterDate","year","floor","month","_isHoliday","day","cacheKey","_hass","states","entityId","holidayEntities","attributes","dateStr","dateStrShort","possibleAttrs","attr","attrValue","holidaysConfig","isHolidayEnabled","easter","fixedHolidays","holiday","easterTime","getTime","oneDay","dayOfWeekNov23","getDay","movableHolidays","date","getFullYear","getMonth","getDate","_isWeekend","dayOfWeek","previousEntityState","_config","newEntityState","hasAnyEntityChanged","prevState","newState","loadWorkingDays","checkConfigEntity","checkStatusEntity","maxMonths","min","allCalendars","_getAllCalendars","cal","saveConfigToEntity","maxLengths","getAllEntityMaxLengths","dataStrings","baseEntityId","additionalEntities","findAdditionalEntities","combinedString","join","parseWorkingDays","checkStorageUsage","currentMonth","currentYearFull","previousMonth","previousYear","monthsToKeep","hasChanges","keyParts","keyYear","keyMonth","shouldKeep","cleanedValue","serializeWorkingDays","callService","entity_id","_parseWorkingDaysIntoObject","dataString","targetObject","part","trimmedPart","colons","daysStr","monthNum","isNaN","_parseDaysWithElements","first","second","yearNum","dayEntries","entry","trimmed","dayNum","elements","entityParts","domain","baseName","additionalEntityId","getEntityMaxLength","maxLength","max","mainEntityId","mainMaxLength","additionalMaxLength","serializedDataLength","allEntityIds","totalCurrentLength","totalMaxLength","percentage","show","currentLength","round","getConfigEntityId","getStatusEntityId","configEntityId","_renderMissingEntityWarning","entityName","isConfig","entityNameShort","statusEntityId","statusEntity","activeShifts","calendar","shiftData","timeRanges","range1","start1","end1","range2","start2","end2","previousLength","configJson","configJsonLength","yearA","monthA","yearB","monthB","days","formattedDays","dayStr","distributeDataToEntities","serializedData","currentAdditionalEntities","knownAdditionalCount","newEntities","entityValues","currentEntityIndex","remainingData","currentEntityId","charsToTake","valueToWrite","substring","newEntityId","truncatedValue","allAdditionalEntities","toggleDay","currentYear","isPreviousMonth","selectedCalendarShortcut","_getSelectedCalendarShortcut","elementIndex","splice","_updateDayButtonDirectly","_scheduleDebouncedSave","debounceTime","_getSaveDebounceTime","_saveToHA","console","saveDebounceTime","dayElements","button","selectedShortcut","hasSelectedShift","_getCalendarByShortcut","firstActiveShift","shiftOrder","activeShiftForColor","activeCalendar","style","backgroundColor","shiftsContainer","from","querySelectorAll","shiftIndicators","indicator","title","ind","container","getDaysInMonth","getFirstDayOfMonth","getWeekNumber","UTC","getUTCDay","setUTCDate","getUTCDate","yearStart","getUTCFullYear","ceil","getMonthName","renderDay","currentDay","monthKey","yearKey","workingDays","today","_getDayElements","isToday","buttonStyle","isWorking","isWeekend","isHoliday","blur","wrapper","focus","renderMonth","daysInMonth","firstDayMonday","rows","firstDate","weekNumber","firstRowCells","weekNum","rowCells","changeDisplayedMonths","delta","newValue","changeStartMonth","displayedMonths","currentOffset","maxOffset","newOffset","getNavigationBounds","canGoBack","canGoForward","localeCompare","_getSelectedCalendarValue","_onCalendarSelectedByIndex","previousCalendar","_updateAllDayButtonsForCalendarChange","buttons","changedProperties","startMonthOffset","months","isEditorMode","hasStorageWarning","hasConfigWarning","hasStatusWarning","navBounds","selectedValue","stopPropagation","stopImmediatePropagation","bgColor","textColor","_ShiftScheduleView","defaultColor","unsafeCSS","DEFAULT_SELECTED_DAY_COLOR","customElements","define","CardImpl","_view","_viewType","getConfigElement","getStubConfig","useElements","selectedElement","benennung","aktiv","defaultConfig","ev","viewType","_lovelace","_CardImpl","EditorBase","loadHaForm","cardHelpers","_EditorBase","EditorImpl","calendarsMap","defaultCal","existing","_getBasicSchema","_computeLabel","_valueChanged","_renderCalendar","_renderHolidays","_updateUseElements","_getColorOptions","_validateTime","timeString","_validateTimeRange","range","isValid","start","end","hasStart","hasEnd","startValid","endValid","colorOptions","currentColor","shiftName","isEnabled","range1Validation","range2Validation","isValidTimeRange1Start","isValidTimeRange1End","isValidTimeRange2Start","isValidTimeRange2End","range1StartError","range1EndError","range2StartError","range2EndError","_updateCalendar","checked","label","formatValid","_updateTimeRange","updatedCal","updatedRange","rangeValidation","hasError","helper","_updateHoliday","newConfig","rangeIndex","timeIndex","newCalendars","newTimeRanges","idx","newRange","property","schema","selector","number","step","_EditorImpl","Editor","_Editor","Card","_Card","customCards","description","preview"],"sourceRoot":""}